{"url_object_id": "cc046f39bd58bd3436d2a6869083d93a", "title": "如何识别人的技术能力和水平？", "create_date": "2018/04/25", "url": "http://blog.jobbole.com/113923/", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/04/e268c18430b4378f4b65054379484b31.png"], "praise_nums": 1, "comment_nums": 0, "fav_nums": 0, "tags": "职场,技术,能力", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://acejoy.com/2018/03/14/%E5%A6%82%E4%BD%95%E8%AF%86%E5%88%AB%E4%BA%BA%E7%9A%84%E6%8A%80%E6%9C%AF%E8%83%BD%E5%8A%9B%E5%92%8C%E6%B0%B4%E5%B9%B3%EF%BC%9F/\">ACE开发者</a>   </div><div>\n<p>这个题目是比较复杂的，它包含的东西比较多，认真讨论估计能写几万字。如果是专业研究，我看能写一本书了。这里打算根据自己的学习过程和工作经验，谈一下要点问题，均属个人看法，欢迎讨论。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/e268c18430b4378f4b65054379484b31.png\" alt=\"skills tree\" width=\"600\" height=\"613\"></p>\n<p>写这篇文章的初衷，跟前段时间跟朋友们聊招聘有关。因为技术招聘除了考察人的协作精神和工作态度，一大目标便是判断人的技术能力和实际水平。在这件事情上多做观察、思考是很有意义的。</p>\n<p>对于考察人的技术等级，学界是有认真的研究的。参见：<em><strong><a href=\"https://acejoy.com/2018/03/14/%E5%BE%B7%E9%9B%B7%E7%A6%8F%E6%96%AF%E6%A8%A1%E5%9E%8B%EF%BC%88dreyfus-model-of-skill-acquisition%EF%BC%89/\" target=\"_blank\" rel=\"noopener\">德雷福斯模型解说</a></strong></em>。</p>\n<p>德雷福斯模型把人的技能水平，分成5级：<strong>新手、高级新手、胜任者、精通者、专家。</strong></p>\n<p>对不同技能等级的认定是这样的：</p>\n<hr>\n<p><strong>新手：依靠指令清单，必须按部就班。</strong>就是必须给出详细而具体的操作规则，才能工作。比如你做一道从未做过的菜，需要看菜谱的说明，第一步做什么，第二步做什么等等，直到最后烹饪结束。</p>\n<p><strong>高级新手：有限的情景洞察力，同等对待工作的各个方面。对全局性、体系性的东西没兴趣。</strong>这是小工的水平。比如他能跟着师傅干点活，打打下手。可以靠着反复检索搜索引擎、StackOverflow解决具体的小问题。</p>\n<p><strong>胜任者：能够独立解决各种各样的领域内问题。</strong>这是一般的企业招聘，比较希望招到的等级，招进来稍作适应就能干活了，省心省力。</p>\n<p><strong>精通者：经验丰富，可以自我纠正、自我改进。</strong>这类等级的人，思考可以指向内在，通过反省、反馈改善技能。这种在企业可以算上高手、大拿了，培养不易。</p>\n<p><strong>专家：依靠直觉工作，不需要解释和理由。</strong>实际你让他解释，他可能也说不出个所以然，就是直觉给出答案，然后还是对的。专家人数稀少，需要很长时间训练、实践。通常的说法是10年出专家，10000小时定律。</p>\n<hr>\n<p>这个是理论上的研究，实践中比较缺乏操作性，难以迅速的判定应聘者的实际情况。不信你打开收进来的大把简历，刚毕业的学生，每个技能名词上面都是一堆堆的“<strong>精通</strong>” – 你相信么？但它可以当成一个职业技能等级判定的参照标准。</p>\n<p>于是乎，各家企业开启了各种“笔试”、“机试”，多轮面试，并且严格要求学历以及出身院校，试图以此过滤掉不合意的应征者，留下合格的人选。<strong>它当然是可行的，但是效果一般，而且容易出错，错失有思想有水平的人。</strong>不然也不会催生出各类“推荐式”的招聘。看重学历、学校当然也有其优点：它是快速过滤的手段，毕竟能考上好学校的人智商不会太差吧。但在大数字公司的一朋友说，公司里面还有初中毕业，一直精研安全领域的人，技术能力也是十分出色。如果严苛对待背景，这些人就会错过了。因为人的生活多种多样，有各种历史的背景因素影响经历。而部分人的经历，就是跟一些人不同的，可是不妨碍他们同样可以变得优秀。招聘，实际上是建立信任关系。如果有充足的信息证明，应聘者足够优秀，这就够了。条条框框只是辅助手段，并不是目的。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/6c5299bf43b31ce14b2b8c6245ca1c0f.jpg\" alt=\"\" width=\"600\" height=\"779\"></p>\n<p>任正非的洞察力一流</p>\n<p>推荐式的招聘实际要靠谱的多，因为人很容易了解熟悉的人的水平。<strong>这是靠推荐者的信用背书。</strong>人平时沟通时说什么话，日常看什么书，关注哪些领域，琢磨过啥问题，哪些东西很熟，这个经常聊的熟人往往都知道。可是，这类招聘局限性也很大：<strong>面窄、靠机缘</strong>。靠推荐能招几个好手啊？好手往往是各家争抢的对象，窗口期有限，基本不会缺工作的。</p>\n<p>说了一圈，还是要在技能水准判定上有更高效率的办法，招进合适的人来。</p>\n<p>回到开头的德雷福斯模型，既然人的技能是分级的，那么<strong>对待不同的职位要求，也应该侧重不同的考察角度。</strong>如果千篇一律的走招聘流程，就容易出问题了。比如你明明要找的是“<strong>精通者</strong>”，可上来就让人一堆笔试、机试，这是不合适的。对方会十分的厌烦。体现高水平技术能力的并不在默写什么“字符串算法”那里。这反倒是刚毕业的人占便宜，因为才学过不久，印象深。不信你让工作10年的人跟计算机专业应届生比比写排序算法，真未必能赢。但是这并不重要 – 你干活不看手册不查文档吗？聪明人从不死记硬背。<strong>重要的地方在于对问题域的准确、深刻的理解，对各类技术优劣点、各种条件平衡的评判和把握。</strong></p>\n<p>对待初阶新人，<strong>应着重考察的是基本功是否扎实，专业成绩是否优秀。更重要的，是他对职业的热情，学习能力和研究精神。</strong>某类人要说起技术来，滔滔不绝，两眼放光，充满热情，对未知的、新生的各类概念、技术非常好奇，这种人想差都难。因为他会自我驱动，不用督促，自己就钻研前进。反之，觉得这个职业待遇高，只是想混饭吃的人，很少走得长远。这类初阶新人以毕业生、工作年限少者为多。测试考核，可以笔试查看其对基础概念的理解是否准确，知识领域的大致范围。甚至，布置一个有点挑战性的小任务，让他尝试解决，说明思路。</p>\n<p><strong>考察胜任、精通者的策略不一样</strong>。笔试做题没啥用，原因前面说了。这类招聘是重头戏，企业都喜欢找这样的，能干活。所以考核评估的地方也较多。我觉得可以分成几个方面去看。<strong>意识是否先进，是否会反省思考；是否善于解决问题，富有创造性；是否有比较深的积累和广阔的知识面。</strong></p>\n<p>业界的开发思想也是在不断变化，工具链一直在革新。聪明的人不用蛮力，而爱用工具提升效率，喜欢自动化操作解放人力。<strong>要查看人用什么开发工具链，用什么开发环境，解释下为什么？</strong>好的开发者会及时注意新出现的工具，挖掘它能解决什么问题，并尝试吸收，解决自己的需求。如果没有这个思想意识，工作效率就会打折扣了。因为你会落后行业发展水平。人善于自我反省，则会催动自我纠正，这正是精通者的特征。参考：<a href=\"https://acejoy.com/2018/03/02/%E4%BC%98%E7%A7%80%E7%9A%84%E5%BC%80%E5%8F%91%E8%80%85%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%AD%A6%E4%B9%A0%E7%A0%94%E7%A9%B6%E6%96%B0%E7%9A%84%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%EF%BC%9F/\" target=\"_blank\" rel=\"noopener\"><em><strong>优秀的开发者为什么要学习研究新的编程语言？</strong></em></a></p>\n<p>解决问题的能力是重头戏，也是企业招聘人的主因。人要善于解决实际问题，而且，要学会聪明的解决问题。解决问题要看思路，看手段，看是否有创造性，这是真正考验人能力的地方。好的开发者，会考虑很多可能选项，预估各种优劣，给出一个较优的方案。 遇到难题，会用各种方法尝试。经验丰富的人，常常会使用技术的组合手段来处理难题，而不是一个语言一个工具到处用。所以，<strong>要查看下过往的项目经历遇到的问题、困难，是如何解决的，思路如何。</strong>一些公司据说不招聘不会用谷歌的工程师。谷歌打不开？嘿嘿，这就是你要克服的困难啊。这你都解决不了，还做什么研发。谷歌是人类最全、最新知识的总索引，充分利用事半功倍。</p>\n<p><strong>考察知识的深度、广度，对重要领域的概念是否有深刻的理解和掌握，以及从各类工作经验中得到的认知。</strong>问问他看过什么书，研究过什么东西。说白了，知道的东西是否多。一些公司很喜欢用CheckList模式来考核，列一堆领域的知识点、概念，问人懂不懂，知道就是水平好，不懂就是水平差。实际情况并非如此。人的工作过程是独立的，一些事情如果没有工作机会去接触并解决，那么一些冷僻的问题就永远都碰不上。当然也就不知道。但你能说没做过就一定做不好么？</p>\n<p>另外，人的技能树，其实也是“犬牙交错、参差不齐”的。什么意思？技术领域非常的广阔，你真的没办法每个领域都很精通，实际上是这个做的多，懂的多，那个用的少，知道的少。这个时候，应看具体知识领域，是哪一类。它是否需要复杂的、难度较高的背景。门槛高的技术，需要的配套技能多得多，比如<strong>AI、机器学习</strong>。而一般产品应用领域则不然，了解核心概念、设计意图，看着手册、最佳实践，也就能上手了。这个暂时不会，实际无关紧要的，工作一段学的认真点就会了。但是门槛高的领域，就需要很长时间的学习了。这是本质的差别。</p>\n<p>我曾看见某公司放出的职员技能树，包罗万象，几乎一切IT领域的知识技能都在里面了，还声称要求“全部精通”。我不知道它如何定义的“精通”，如果按德雷福斯模型的定义，能做到的那是神，不是人类。这个纯属吹牛皮，我压根就不信。如果真有这样的人，出来让我膜拜下。因为每个稍大点的领域，都足够让你钻研一辈子，因为它们也在迅速发展呀。业内流传“<strong>全栈工程师</strong>”的说法，鼓吹自己是全栈的人经常是前端工程师。而研究后端工作领域的技术高手经常鄙视这类人：真以为会点Node.js就能解决一堆后端的事务了么？我也懂一些前端，也能号称“全栈”，但在不同领域的专业性是什么水准，自己明白的很。前端要解决的事情也有很多复杂性。全栈实际是反专业化的，是人力资源稀缺时候的低成本选择。</p>\n<p>更高一层，则是考察人本身了。人的视野够广阔么？其它领域的知识有了解吗？一些问题的解答并不在问题域本身，而是在外面的领域。所谓“<strong>功夫在诗外</strong>”。公司讲求团队协作，总要面临不同的分工合作问题。比如产品、运营的人提需求，可以换位思考吗？合作意识强么？谁也不想招个刺头进来吧？把团队的气氛和人际关系搞的一团糟，大家做事都不痛快、不顺心，又如何安心做好工作？最终只能让团队工作效率下降，甚至瓦解。</p>\n<p>要说专家，实际上有研究者认为是需要刻意练习+充分实践才能功成。并不是每个人经过足够的工作年限，都自动成为专家。有的人工作10年，可能后面9年都在重复第一年的工作任务，毫无改进。而职业上的训练机会，又跟大环境乃至运气息息相关，并不是每个人都有机缘的。但是把个人的职业技能做到胜任乃至精通，则是完全可行的，这只需要认真和勤奋，工作态度问题。</p>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113923\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113923votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113923\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"}
{"url_object_id": "627fba360f907b35e30cde7e75e233df", "title": "软件复杂性正在杀死我们", "create_date": "2018/04/14", "url": "http://blog.jobbole.com/113820/", "front_image_url": ["http://ww3.sinaimg.cn/mw690/7cc829d3gw1ezy0oepjyrj21hc0u0wk6.jpg"], "praise_nums": 2, "comment_nums": 1, "fav_nums": 3, "tags": "业界", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/wx138099575\">风木</a> 翻译，<a href=\"http://www.jobbole.com/members/hanxiaomax\">艾凌风</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://www.simplethread.com/software-complexity-killing-us/\">Justin Etheredge</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>代码量少了不代表软件的复杂度降低了，而是编程语言的表达力更强了。太多开发人员痴迷于框架，过度追求软件灵活性、可组合性等等，而忘记自己是不是真的需要这些。</p>\n<hr>\n<p><img class=\"alignnone\" src=\"http://ww3.sinaimg.cn/mw690/7cc829d3gw1ezy0oepjyrj21hc0u0wk6.jpg\" width=\"690\" height=\"388\"></p>\n<p>在有软件之前，只有黑暗。自从时代的黎明到来后，一直存在一个不变的事实：企业想要构建价格更低、运行更快的软件。</p>\n<p>当然，这是可以理解并且值得称赞的目标——尤其是你曾经花费时间跟软件开发人员打过交道。每个工程师都应该全心支持此目标，并且在当前环境的约束下，应该始终努力尽可能有效率地创造产品。</p>\n<p>然而，事实上，我们经常做不到这一点。并非故意为之，只是随着时间流逝，在构建软件时会因为意料之外的复杂性而陷入困境，因此自我训练以寻找边界案例、差距分析以及所有可能起源于同一个需求要点的隐藏故障。</p>\n<p>我们被大量的复杂度以及设计优雅解决方案的精神执念所迷惑：另一层抽象！干起来！分离相关量！继承构成！这也是可以理解的，但是在这个过程中，我们经常忽略正在被解决的业务问题，忘记管理复杂度是软件开发人员<strong>次重要</strong>的责任。</p>\n<p><strong>为什么会造成现在这样的局面？</strong></p>\n<h3>软件在某些方面上已经变得更加简单了</h3>\n<p>在过去的几十年里，软件产业非常成功地降低了编写大多数软件所需要的自定义代码量。</p>\n<p>这种减少大部分是通过使编程语言更有表现性来实现的。像 Python、Ruby 或 JavaScript 这些语言可以用<strong>不到 </strong>C 语言<strong>三分之一的代码</strong>来实现相似的功能。使用 C 语言取代汇编语言编写程序也同样带来了类似的优势。可以预见，在未来，语言设计不大可能带来如同过去几十年一样的改进。</p>\n<p>然而也有很多其他不需要让语言更具有表现力的方法，可以精简构建软件的代码总量。截止到现在，在过去的二十年里，我们最大的收获是开源软件（OSS）。如果没有个人和公司将资金投入到他们为社区免费赠予的软件中，没有这么多的代价和努力，那么我们今天所构建的大部分软件将不会实现。</p>\n<p>这些项目使我们能够站在巨人的肩膀上解决问题，利用工具让我们更专注于解决业务问题，而不是花时间建设基础设施。</p>\n<p>也就是说，业务是复杂的。可笑的复杂，而且只会更多，开源软件非常适合生成用以构建系统的框架和工具，但在很大程度上为了获得关注，又必须解决大量人员共享的问题。因此，大多数开源项目要么是相对通用的，要么是处于非常受欢迎的领域。因此，这些工具中的大部分都是建立系统的绝佳平台，但最终我们仍然需要在日益复杂且要求苛刻的系统中构建所有业务逻辑和接口。</p>\n<p>所以我们剩下的是一个看起来像这样的栈（对于 web 应用程序）…</p>\n<blockquote><p>&lt;Our Code/我们的代码&gt;<br>\n&lt;Libraries/库&gt;<br>\n&lt;Web Framework/Web 框架&gt;<br>\n&lt;Web Server/Web 服务器&gt;<br>\n&lt;Data Stores/数据存储&gt;<br>\n&lt;Operating System/操作系统&gt;</p></blockquote>\n<p>“Our Code”部分最终变得非常复杂，因为它反映了业务及其流程。如果我们有自定义的业务逻辑和自定义流程，那么我们只需编写组建应用程序的接口、工作流程和逻辑即可。当然，我们可以尝试用不同的方式来记录该逻辑（记住业务规则引擎？），但最终，没有其他人会为您的业务编写业务逻辑。实际上似乎没有办法解决这个问题……至少是在机器人到来并将我们从工作中解救出来之前。</p>\n<h3>不喜欢代码，那么低代码（Low-Code）如何？</h3>\n<p>如果我们必须开发应用程序的接口、工作流程和逻辑，这听起来像是难住我们了，对吗？ 在某种程度上，是的，但我们仍有几个选择。</p>\n<p>对于大多数开发者来说，软件等于代码，现实并非如此。 开发软件有许多方法，其中一种是使用可视化工具。 在网络普及之前，视觉开发和 RAD 工具在市场上占有更大的地位。 诸如 PowerBuilder、visual Foxpro、Delphi、VB 和 Access 等工具都具有可视化设计功能，允许开发人员在不输入任何代码的情况下创建界面。</p>\n<p>这些工具涵盖了需要编写的代码，但总的来说，你可以直观地设计应用程序，然后编写大量代码来实现应用程序的逻辑。 在很多情况下，你仍然用编程操作接口，因为使用这些工具构建的接口通常是静态的。 但是，对于大量应用程序，这些工具通过舍弃其他性能获得了巨大的生产力，主要是以灵活性为代价。</p>\n<p>自从网络兴起后，这些工具可能已经不再流行，但公司对它们的渴望并没有降低，尤其是因为势不可挡的软件需求仍然持续不断。 整个行业最新趋势是“低代码”系统。 低代码开发工具是最新一代拖放式软件开发工具的现代术语。 这些工具和其他工具之间最大的区别在于，它们主要基于 Web（和移动端），并且通常被托管于云平台。</p>\n<p>许多公司正活跃于这些平台上。Salesforce（App Cloud）、Outsystems、Mendix 以及 Kony 等厂商承诺能够比“传统”应用程序开发快许多倍。 虽然他们的很多说法可能很夸张，但也有一定的可信度。依赖类似上述平台的所有弊端，可能的确导致某些类型的程序比使用 .NET 或 Java 的传统程序开发更快。</p>\n<h3>那么，问题是什么呢？</h3>\n<p>的确有几个问题。 首先，有经验的开发人员经常讨厌这些工具。 大多数严肃的开发人员™ 喜欢使用真实代码™ 编写真正的软件™。 我知道这听起来像我正在迎合一群呜咽的婴儿（也许我有点儿），但如果你传递的核心价值是技术，那么采用顶尖开发人员不喜欢使用的工具并非是个好主意。</p>\n<p>其次，像我这样的人看着这些被封装的平台，说“不，不要在这里构建应用程序”。这是合情合理的忧虑，也是最让我困扰的事情。</p>\n<p>如果你 10 年前用 PHP 搭建了一个应用程序，那么这个应用程序可能会显老，但它现在仍然可以嗡嗡作响。 语言和生态系统都是开源的，并由社区维护的。 你需要保持应用程序持续更新，却不必担心供应商断定不再值得花时间支持。</p>\n<blockquote><p>像我这样的人看着这些被封装的平台，说“不，不要在这里构建应用程序”。这是合情合理的忧虑，也是最让我困扰的事情。</p></blockquote>\n<p>如果你 10 年前选择了有自己平台的供应商，那么如果他们关闭工具或频繁更改工具（<a href=\"https://techcrunch.com/2017/01/30/facebooks-parse-developer-platform-is-shutting-down-today/\">还记得 Parse 么？</a>），你可能会被迫重写程序。或者更糟，你的系统会停滞在一个停止更新、不再支持服务的平台上。</p>\n<p>有很多理由去警惕这类平台，但对许多企业来说，以更少的付出来搭建软件太具诱惑以至于不忍拒绝。 软件的复杂性仍在持续，不幸的是软件工程师帮不上任何忙。</p>\n<h3>什么需要改变？</h3>\n<p>有高效的平台，可以让我们用真实代码™ 构建真正的软件™，但不幸的是，软件行业太过担心于跟随科技巨头地领导，以至于没有意识到他们的工具并没有对项目添加任何价值。</p>\n<p>我无法告诉你有多少次，曾遇到开发人员跟我说，相比于仅仅渲染 HTML，构建单一页面应用程序（SPA）类似的东西并不会增加开销。我曾听开发人员说过，所有应用都应该基于 NoSQL 数据库来开发，而关系数据库逐渐没落了。也曾听开发人员质疑为什么应用程序不是用 CQRS 和事件溯源编写的。</p>\n<p>正是这种思维过程和常规的开销导致公司认为软件开发过于昂贵。 你可能会说，“但事件溯源如此优雅！在微服务之上搭建 SPA 如此整洁！”当然，它可能是，但对你这种正在写十个微服务的人来说不是这样的。这种额外的复杂性往往是<strong>不必要的</strong>。</p>\n<p>作为从业人员，我们需要找到各种方法来简化搭建软件的过程，并且不忽视业务的合理复杂性。 我们需要承认，并非每个应用程序都需要与 Gmail 相同层次的界面复杂性和运营扩展性。 有很多应用程序需要经过深思熟虑的界面、复杂的逻辑、坚实的体系结构、流畅的工作流程等。但不需要微服务、AI、chatbots、NoSQL、Redux、Kafka、Containers 或任何类似的工具。</p>\n<p>如今很多开发人员似乎对技术能力非常着迷，以至于他们不能退后一步，问问自己是否真的需要这些。</p>\n<p>就像 MasterChef 上的人一样，他们以分子美食家的身份入场兜售自己。 他们将原料分成不同的组成部分，使用科学配对口味的方法，然后用大量的二氧化碳和液氮来制作你见过的最有创意的食物。 然后他们会在一两集之后被踢开，因为他们忘记了大多数烹饪的核心原则，即食物需要口感好。 他们似乎真的很惊讶于没有人喜欢他们发酵的茴香和芒果精华珍珠加上抹了鳀鱼沫的鳕鱼肉。</p>\n<p>对灵活性、可组合性和机敏性的痴迷正在给我们带来巨大的痛苦，并迫使公司远离我们所喜爱的平台和工具。 并不是说我上面列出的那些工具不会增加价值，尽管大公司在大规模操作系统时会遇到典型问题，工具也仅是为了解决真正的痛点而产生的。</p>\n<p>我所说的是，我们需要回到简单化的方向，并开始以更简单的方式创造事物，而不是仅仅一直讨论简单性。 也许我们可以依靠更多的<strong>集成</strong>技术栈来提供开箱即用的模式和工具，以便软件开发人员能够更高效地创建软件。</p>\n<blockquote><p>我们将把越来越多的业务添加到“低代码”平台和其他通过简化、移除起初写过的代码来降低软件成本的工具中。</p></blockquote>\n<p>我们需要停止假装二十行的程序是一些需要认真手工缝制的独特挂毯。</p>\n<h3>聚焦简单性</h3>\n<p>写完之后，我仿佛听到一百万位开发人员磨刀的声音，但我相信如果我们继续坚持如下方向：想写所有东西、配置一切、编写所有内容、无论多大规模的问题都使用相同的堆栈，那么我们将把越来越多的业务添加到“低代码”平台和其他通过简化、移除起初写过的代码来降低软件成本的工具中。</p>\n<p>我们对业务日益复杂的回答不会增加开发过程的复杂性 – 无论它看起来多么优雅。</p>\n<p>我们必须设法通过简化开发流程来管理复杂性。 因为管理复杂性是次重要的责任，我们必须始终记住软件开发人员最重要的责任：通过使用软件来实现价值。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113820\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113820votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113820\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 3 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/wx138099575\">风木</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/wx138099575\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2018/03/e496dcafc16ff266b061f892352783db.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            简介还没来得及写 :）        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/wx138099575\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/wx138099575/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/wx138099575/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 11</a> · <a title=\"微博主页\" target=\"_blank\" href=\"https://weibo.com/6426355449/profile?rightmod=1&amp;wvr=6&amp;mod=personinfo&amp;is_all=1\"><i class=\"fa fa-weibo\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"}
{"url_object_id": "617147c254639a1116c63b146f58b2e8", "title": "可怕的万圣节 Linux 命令", "create_date": "2018/04/18", "url": "http://blog.jobbole.com/113905/", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/04/11489667c4b61dbd7d1f86da23791294.jpg"], "praise_nums": 1, "comment_nums": 0, "fav_nums": 2, "tags": "IT技术,Linux", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.networkworld.com/article/3235219/linux/scary-linux-commands-for-halloween.html\">Sandra Henry-stocker</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9552-1.html\">Linux中国/geekpi</a>   </div><p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/11489667c4b61dbd7d1f86da23791294.jpg\" alt=\"\"></p>\n<p>虽然现在不是万圣节，也可以关注一下 Linux 可怕的一面。什么命令可能会显示鬼、巫婆和僵尸的图像？哪个会鼓励“不给糖果就捣蛋”的精神？</p>\n<h3 id=\"toc_1\">crypt</h3>\n<p>好吧，我们一直看到 <code>crypt</code>。尽管名称不同，crypt 不是一个地窖，也不是垃圾文件的埋葬坑，而是一个加密文件内容的命令。现在，<code>crypt</code> 通常用一个脚本实现，通过调用一个名为 <code>mcrypt</code> 的二进制文件来模拟以前的 <code>crypt</code> 命令来完成它的工作。直接使用 <code>mycrypt</code> 命令是更好的选择。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae13666515fd049077881\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ mcrypt x\r\nEnter the passphrase (maximum of 512 characters)\r\nPlease use a combination of upper and lower case letters and numbers.\r\nEnter passphrase:\r\nEnter passphrase:\r\n\r\nFile x was encrypted.\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae13666515fd049077881-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae13666515fd049077881-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae13666515fd049077881-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae13666515fd049077881-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ae13666515fd049077881-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae13666515fd049077881-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ae13666515fd049077881-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae13666515fd049077881-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae13666515fd049077881-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">mcrypt</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">x</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae13666515fd049077881-2\"><span class=\"crayon-e\">Enter </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">passphrase</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">maximum </span><span class=\"crayon-i\">of</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">512</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">characters</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5ae13666515fd049077881-3\"><span class=\"crayon-e\">Please </span><span class=\"crayon-st\">use</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">combination </span><span class=\"crayon-e\">of </span><span class=\"crayon-e\">upper </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">lower </span><span class=\"crayon-st\">case</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">letters </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">numbers</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae13666515fd049077881-4\"><span class=\"crayon-e\">Enter </span><span class=\"crayon-v\">passphrase</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5ae13666515fd049077881-5\"><span class=\"crayon-e\">Enter </span><span class=\"crayon-v\">passphrase</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae13666515fd049077881-6\"> </div><div class=\"crayon-line\" id=\"crayon-5ae13666515fd049077881-7\"><span class=\"crayon-i\">File</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">was </span><span class=\"crayon-v\">encrypted</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae13666515fd049077881-8\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p>请注意，<code>mcrypt</code> 命令会创建第二个扩展名为 <code>.nc</code> 的文件。它不会覆盖你正在加密的文件。</p>\n<p><code>mcrypt</code> 命令有密钥大小和加密算法的选项。你也可以再选项中指定密钥，但 <code>mcrypt</code> 命令不鼓励这样做。</p>\n<h3 id=\"toc_2\">kill</h3>\n<p>还有 <code>kill</code> 命令 – 当然并不是指谋杀，而是用来强制和非强制地结束进程，这取决于正确终止它们的要求。当然，Linux 并不止于此。相反，它有各种 <code>kill</code> 命令来终止进程。我们有 <code>kill</code>、<code>pkill</code>、<code>killall</code>、<code>killpg</code>、<code>rfkill</code>、<code>skill</code>（）读作 es-kill）、<code>tgkill</code>、<code>tkill</code> 和 <code>xkill</code>。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae1366651607010806944\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ killall runme\r\n[1] Terminated ./runme\r\n[2] Terminated ./runme\r\n[3]- Terminated ./runme\r\n[4]+ Terminated ./runme\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae1366651607010806944-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1366651607010806944-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae1366651607010806944-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1366651607010806944-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ae1366651607010806944-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1366651607010806944-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae1366651607010806944-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">killall </span><span class=\"crayon-i\">runme</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1366651607010806944-2\"><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Terminated</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">runme</span></div><div class=\"crayon-line\" id=\"crayon-5ae1366651607010806944-3\"><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Terminated</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">runme</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1366651607010806944-4\"><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Terminated</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">runme</span></div><div class=\"crayon-line\" id=\"crayon-5ae1366651607010806944-5\"><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Terminated</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">runme</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1366651607010806944-6\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p></p>\n<h3 id=\"toc_3\">shred</h3>\n<p>Linux 系统也支持一个名为 <code>shred</code> 的命令。<code>shred</code> 命令会覆盖文件以隐藏其以前的内容，并确保使用硬盘恢复工具无法恢复它们。请记住，<code>rm</code> 命令基本上只是删除文件在目录文件中的引用，但不一定会从磁盘上删除内容或覆盖它。<code>shred</code> 命令覆盖文件的内容。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae136665160c972162541\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ shred dupes.txt\r\n$ more dupes.txt\r\n▒oΛ▒▒9▒lm▒▒▒▒▒o▒1־▒▒f▒f▒▒▒i▒▒h^}&amp;▒▒▒{▒▒\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae136665160c972162541-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae136665160c972162541-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae136665160c972162541-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae136665160c972162541-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae136665160c972162541-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">shred </span><span class=\"crayon-v\">dupes</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae136665160c972162541-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">more </span><span class=\"crayon-v\">dupes</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line\" id=\"crayon-5ae136665160c972162541-3\">▒<span class=\"crayon-i\">o</span>Λ▒▒<span class=\"crayon-cn\">9</span>▒<span class=\"crayon-i\">lm</span>▒▒▒▒▒<span class=\"crayon-i\">o</span>▒<span class=\"crayon-cn\">1</span>־▒▒<span class=\"crayon-i\">f</span>▒<span class=\"crayon-i\">f</span>▒▒▒<span class=\"crayon-i\">i</span>▒▒<span class=\"crayon-v\">h</span><span class=\"crayon-o\">^</span><span class=\"crayon-sy\">}</span><span class=\"crayon-o\">&amp;</span>▒▒▒<span class=\"crayon-sy\">{</span>▒▒</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae136665160c972162541-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p></p>\n<h3 id=\"toc_4\">僵尸</h3>\n<p>虽然不是命令，但僵尸在 Linux 系统上是很顽固的存在。僵尸基本上是没有完全清理掉的死亡进程的遗骸。进程<em>不应该</em>这样工作 —— 让死亡进程四处游荡，而不是简单地让它们死亡并进入数字天堂，所以僵尸的存在表明了让他们遗留于此的进程有一些缺陷。</p>\n<p>一个简单的方法来检查你的系统是否有僵尸进程遗留，看看 <code>top</code> 命令的标题行。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae136665160f585194325\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-mixed-highlight\" title=\"含多种语言\"></span><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ top\r\ntop - 18:50:38 up 6 days, 6:36, 2 users, load average: 0.00, 0.00, 0.00\r\nTasks: 171 total, 1 running, 167 sleeping, 0 stopped, 3 zombie  `&lt; ==`\r\n%Cpu(s): 0.0 us, 0.0 sy, 0.0 ni, 99.9 id, 0.1 wa, 0.0 hi, 0.0 si, 0.0 st\r\nKiB Mem : 2003388 total, 250840 free, 545832 used, 1206716 buff/cache\r\nKiB Swap: 9765884 total, 9765764 free, 120 used. 1156536 avail Mem</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae136665160f585194325-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae136665160f585194325-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae136665160f585194325-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae136665160f585194325-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ae136665160f585194325-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae136665160f585194325-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ae136665160f585194325-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae136665160f585194325-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">top</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae136665160f585194325-2\"><span class=\"crayon-v\">top</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">50</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">38</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">up</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">days</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">36</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">users</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">load </span><span class=\"crayon-v\">average</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span></div><div class=\"crayon-line\" id=\"crayon-5ae136665160f585194325-3\"><span class=\"crayon-v\">Tasks</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">171</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">total</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">running</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">167</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sleeping</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">stopped</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">zombie</span><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">`</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-sy\">`</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae136665160f585194325-4\"><span class=\"crayon-ta\">%</span><span class=\"crayon-e\">Cpu</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">us</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sy</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ni</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">99.9</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.1</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">wa</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">hi</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">si</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">st</span></div><div class=\"crayon-line\" id=\"crayon-5ae136665160f585194325-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae136665160f585194325-6\"><span class=\"crayon-e\">KiB </span><span class=\"crayon-v\">Mem</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2003388</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">total</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">250840</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">free</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">545832</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">used</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1206716</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">buff</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">cache</span></div><div class=\"crayon-line\" id=\"crayon-5ae136665160f585194325-7\"><span class=\"crayon-e\">KiB </span><span class=\"crayon-v\">Swap</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9765884</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">total</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9765764</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">free</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">120</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">used</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1156536</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">avail </span><span class=\"crayon-v\">Mem</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0057 seconds] -->\r\n<p>可怕！上面显示有三个僵尸进程。</p>\n<h3 id=\"toc_5\">at midnight</h3>\n<p>有时会在万圣节这么说，死者的灵魂从日落开始游荡直到午夜。Linux 可以通过 <code>at midnight</code> 命令跟踪它们的离开。用于安排在下次到达指定时间时运行的作业，<code>at</code> 的作用类似于一次性的 cron。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae1366651613215504141\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ at midnight\r\nwarning: commands will be executed using /bin/sh\r\nat&gt; echo 'the spirits of the dead have left'\r\nat&gt; &lt;EOT&gt;\r\njob 3 at Thu Oct 31 00:00:00 2017\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae1366651613215504141-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1366651613215504141-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae1366651613215504141-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1366651613215504141-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ae1366651613215504141-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1366651613215504141-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae1366651613215504141-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">at </span><span class=\"crayon-e\">midnight</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1366651613215504141-2\"><span class=\"crayon-v\">warning</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">commands </span><span class=\"crayon-e\">will </span><span class=\"crayon-e\">be </span><span class=\"crayon-e\">executed </span><span class=\"crayon-v\">using</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">sh</span></div><div class=\"crayon-line\" id=\"crayon-5ae1366651613215504141-3\"><span class=\"crayon-v\">at</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'the spirits of the dead have left'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1366651613215504141-4\"><span class=\"crayon-v\">at</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">EOT</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5ae1366651613215504141-5\"><span class=\"crayon-i\">job</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">at </span><span class=\"crayon-e\">Thu </span><span class=\"crayon-i\">Oct</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">31</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2017</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1366651613215504141-6\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p></p>\n<h3 id=\"toc_6\">守护进程</h3>\n<p>Linux 系统也高度依赖守护进程 —— 在后台运行的进程，并提供系统的许多功能。许多守护进程的名称以 “d” 结尾。这个 “d” 代表守护进程daemon，表明这个进程一直运行并支持一些重要功能。有的会用单词 “daemon” 。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae1366651616043731985\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ps -ef | grep sshd\r\nroot 1142 1 0 Oct19 ? 00:00:00 /usr/sbin/sshd -D\r\nroot 25342 1142 0 18:34 ? 00:00:00 sshd: shs [priv]\r\n$ ps -ef | grep daemon | grep -v grep\r\nmessage+ 790 1 0 Oct19 ? 00:00:01 /usr/bin/dbus-daemon --system --address=systemd: --nofork --nopidfile --systemd-activation\r\nroot 836 1 0 Oct19 ? 00:00:02 /usr/lib/accountsservice/accounts-daemon\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae1366651616043731985-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1366651616043731985-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae1366651616043731985-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1366651616043731985-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ae1366651616043731985-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1366651616043731985-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ae1366651616043731985-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae1366651616043731985-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ps</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">ef</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">grep </span><span class=\"crayon-e\">sshd</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1366651616043731985-2\"><span class=\"crayon-i\">root</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1142</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Oct19</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sbin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sshd</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">D</span></div><div class=\"crayon-line\" id=\"crayon-5ae1366651616043731985-3\"><span class=\"crayon-i\">root</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">25342</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1142</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">34</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sshd</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">shs</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">priv</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1366651616043731985-4\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ps</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">ef</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">grep </span><span class=\"crayon-v\">daemon</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">grep</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">v</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">grep</span></div><div class=\"crayon-line\" id=\"crayon-5ae1366651616043731985-5\"><span class=\"crayon-v\">message</span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">790</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Oct19</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">01</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">dbus</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">daemon</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">system</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">address</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">systemd</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">nofork</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">nopidfile</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">systemd</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">activation</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1366651616043731985-6\"><span class=\"crayon-i\">root</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">836</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Oct19</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">02</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lib</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">accountsservice</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">accounts</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">daemon</span></div><div class=\"crayon-line\" id=\"crayon-5ae1366651616043731985-7\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0031 seconds] -->\r\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113905\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113905votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113905\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"}
{"url_object_id": "ca9b7fe440dbafc569069b9a27e98bef", "title": "Reddit 如何面试工程师？", "create_date": "2018/04/20", "url": "http://blog.jobbole.com/113744/", "front_image_url": ["http://wx4.sinaimg.cn/mw690/7cc829d3gy1fqeikwffd2j20xc0g4ju2.jpg"], "praise_nums": 1, "comment_nums": 0, "fav_nums": 1, "tags": "职场,Reddit,工程师", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/chenyahui\">精算狗</a> 翻译，<a href=\"http://www.jobbole.com/members/liuchang\">刘唱</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://redditblog.com/2017/08/02/acing-your-technical-interviews-at-reddit/\">Redditblog</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><blockquote><p>Reddit 给来应聘者写的官方指南，描述了整个面试的流程、该如何准备。</p></blockquote>\n<hr>\n<p><img class=\"aligncenter\" src=\"http://wx4.sinaimg.cn/mw690/7cc829d3gy1fqeikwffd2j20xc0g4ju2.jpg\" width=\"578\" height=\"280\"></p>\n<p><strong>在 Reddit，我们理解面试</strong>可能非常令人头疼，因此我们做了这份指南来帮你顺利通过面试。你不会不学习就去参加期末考试，对吧？同样，我们也不希望你不准备就来参加面试。请把这篇文章作为通过面试的学习指南。</p>\n<p><img class=\"aligncenter size-large wp-image-21663\" src=\"https://redditupvoted.files.wordpress.com/2017/08/recruiting-image-1.png?w=720&amp;h=61\"></p>\n<p>到目前为止，你大概已经与我们招聘团队的成员通过电话了，完成了初步的电话面试。那么恭喜你能继续下一步的面试！接下来要面对你的第一个技术面试了——这一次是与我们的工程师进行的电话面试。</p>\n<h3>电话技术面试</h3>\n<p>这部分面试更偏向于一般的能力倾向测试，旨在了解你对网络及其安全漏洞相关基本概念的技能。这部分面试基本上一半是问答形式的题目，一半是编程训练。你可能不知道所有问题的答案，这是可以接受的。重要的是，我们可以了解你的能力范围，并据此决定你的专长能否满足我们团队的需求。</p>\n<p>在回答这些问题时，一定要解释你是如何得到这个答案的，以及为什么采用这种方法。</p>\n<p><em>提示：打开你的笔记本并准备好面试。确保你接上了网线或者连上了可靠的 </em><em>WIFI</em><em>，并仔细检查你准备接电话的地方手机信号是否够强。</em></p>\n<h3>现场面试</h3>\n<p>如果你走到了这一步，那已经快成功啦。现场面试会分成三个技术面试和三个问答形式的面试。总之，面试应该会持续 5 个小时左右，所以来之前请休息好。</p>\n<p><img class=\"aligncenter size-large wp-image-21664\" src=\"https://redditupvoted.files.wordpress.com/2017/08/recruiting-image-2.png?w=720&amp;h=54\"></p>\n<h3>面试环境</h3>\n<p>你参加面试的房间里有一块白板，在技术面试中需要用到它。来参加面试时还要带上你的笔记本电脑，或者告诉我们你更希望我们提供一个笔记本电脑给你。你的技术面试要么是通过白板，要么是通过笔记本上的 coderpad（面试官会在你们见面时分享给你）。</p>\n<p>考虑到我们工作的性质，我们办公室的氛围比较休闲（当然是合理范围内！）。我们没有着装标准，建议你怎么舒服怎么穿。</p>\n<h3>技术面试</h3>\n<p>技术面试占你和我们在一起的大部分时间，总共大概是 3 个小时（每个技术面试占一个小时）。正是因为想看看你的实际编程水平，我们才要求你带笔记本来面试。尽管面试主要是看你的技术水平，但是面试官还要评估其他重要的因素，比如工作风格和团队配合。</p>\n<ul>\n<li><strong>编程</strong><strong>/</strong><strong>算法。</strong>在现场面试中你要完成两个编程面试，一个针对一般软件工程概念，另一个则更深入到你擅长的领域（无论是前端、后端还是机器学习等等）。对于一般的编程面试，我们鼓励你使用最习惯的语言来解决。在这部分会遇到的问题通常都可以利用递归和迭代技巧，用多种不同的方法来解决。</li>\n<li><strong>系统设计。</strong>与其他技术面试不同，这部分面试不是以编程为主的，但是你很可能会用到白板。你应该准备好碰到这种问题：“怎样构建一个这样的服务？”以及“如何扩大上述服务？”。此外，你还应该对互联网工作原理有扎实的理解。</li>\n</ul>\n<p><img class=\"aligncenter size-full wp-image-21665\" src=\"https://redditupvoted.files.wordpress.com/2017/08/recruiting-image-3.gif?w=720\"></p>\n<h3>应当牢记的几点</h3>\n<p><strong>别忽视面试的语言交流方面。</strong></p>\n<p>技术面试不是为了看你能否得出正确答案，而是为了检验你能够多好地与他人合作。把面试官当成一个帮助你解决问题的人，就像你的队友一样。我们明白一个人不可能完成所有事情，因此特意招募了不同背景和有不同技能的人来建立我们的团队。我们更想知道你有哪些领域的技能，而不是想找到完美的工程师。如果你忘了这篇指南里的其他内容，把下面这三点牢记于心就能让你在技术面试中遥遥领先：</p>\n<ul>\n<li><strong>倾听并认真考虑面试官的建议</strong>。他们很可能已经问过上百遍同样的问题，并见识了不同的解决方法。他们的工作就是帮你找到<em>最好</em>的方法。</li>\n<li><strong>把你的思考过程说出来，并能够解释你所用方法的优缺点</strong>。比起你能否想出解决方法，我们更在意你是怎样想出这个解决方法的。</li>\n<li><strong>在你没想好解决方法之前，别急着写代码</strong>。正如我们的一个工程师曾经告诉我的那样，在没有考虑木头的尺寸和如何把每个零件拼在一起之前是不会开始建工作台的；同样，在你开始写代码之前你也应该知道要怎样解决问题。</li>\n</ul>\n<h3>问答面试（Q&amp;A Interviews）</h3>\n<p>在 Reddit，我们给予人们自主权来让他们能做自己。尽管技术面试可能需要集中精神，但是问答面试要轻松得多。问答面试的面试官通常不在你申请的团队中，主要是为了让我们在技术能力层面之外更好地了解你。</p>\n<ul>\n<li><strong>申请者 </strong><strong>AMA</strong><strong>（</strong><strong>Ask Me Anything</strong><strong>）。</strong>这项面试是为了从个人的角度了解你，因为大部分面试更关注你在电脑上能做什么。这说明，应对这项面试最好的方法是准备好谈谈你自己。这是你要面对的所有面试中最随意的，但是它有希望让你更深入地了解我们如何工作，反之亦然。</li>\n</ul>\n<p><em>提示：准备好，会有关我们企业文化、方针和办公室的日常生活的问题。你的动力和<a href=\"https://about.reddit.com/\">我们公司的价值观</a>应该有相似之处。</em></p>\n<ul>\n<li><strong>跨部门面试。</strong>从名字大概就能看出来，这项面试是为了让你初步了解怎样与其他团队合作。除非你负责基础设施，否则你就要和我们的产品团队密切合作，所以我们需要确保你能很好地连接其他技能，而这些技能与你自己所掌握的技能不同；这就意味着你能够流畅地交流并有效解决冲突。在这项面试中，你会见到我们的产品经理之一，因此此时是询问 Reddit 如何运作以及今年的产品路线图（product roadmap）等相关问题的理想时机。</li>\n</ul>\n<p><em>提示：准备一些专业轶事来帮助你突出人际交往能力。提前想好你准备怎么讲故事，从而在面试中传达某些行为属性。</em></p>\n<ul>\n<li><strong>团队负责人面试。</strong>这项面试非常可能是一天中最后一项面试（耶！）。你未来的团队负责人会从高水平上审查你的工作，深入探究你完成过的具体项目，以便确定你能怎样融入团队。这是个很好的机会，可以问问在你未来要做的项目上还不清楚的问题，组织结构的问题，以及下半年团队的规划。</li>\n</ul>\n<h3>接下来呢？</h3>\n<p>你顺利完成了现场面试，好样的！我们知道这不容易。既然你已经完成了最难的部分，那么你可以准备好在面试后一周内接到招聘官的消息。还有问题吗？不要犹豫，联系我们吧！你在每一步都能得到我们的支持。</p>\n<p><img class=\"aligncenter size-full wp-image-21666\" src=\"https://redditupvoted.files.wordpress.com/2017/08/recruiting-image-4.gif?w=720\"></p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113744\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113744votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113744\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui\">精算狗</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2015/04/8fbdaaa5ea6d3b49c8c1c825aafeb5d9.png\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            简介还没来得及写 :）        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/chenyahui\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/chenyahui/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 22</a> · <a title=\"QQ：564968845\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a> <a title=\"个人微信：564968845\" target=\"_blank\" href=\"#\"><i class=\"fa fa-weixin\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"}
{"url_object_id": "19e82073707c6fead43789396f1c0f0a", "title": "Git 12 岁了，为你送上 12 个 Git 的使用技巧！", "create_date": "2018/04/16", "url": "http://blog.jobbole.com/113885/", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/04/e38d25144c3ef2d81d73a884cacbf9c2.jpg"], "praise_nums": 1, "comment_nums": 0, "fav_nums": 4, "tags": "IT技术,Git", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://opensource.com/article/18/4/git-tips\">opensource.com</a>   译文出处：<a target=\"_blank\" href=\"https://www.oschina.net/translate/12-git-tips-gits-12th-birthday\">开源中国</a>   </div><p>使用这12个Git的诀窍与技巧来令你的版本控制经验更加有用。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/e38d25144c3ef2d81d73a884cacbf9c2.jpg\"></p>\n<p>Git，一个分布式版本控制系统，它已经成为了开源世界的源码控制默认工具，在4月7号12岁了。但是使用Git中更另人沮丧的是，你需要了解多少才能让你更有效的使用它。同时这也是使用Git中比较美妙的一件事，因为没有什么比发现一个新的小技巧来简化或提高你的工作流的效率更加令人快乐了。</p>\n<p>为了纪念Git的12岁生日，这篇文章提供12个诀窍与技巧来让你的Git经验更加有用和强大，从一些你可能会忽视的基础开始到一些真正的强大技巧!</p>\n<ol>\n<li>\n<h3>你的 ~/.gitconfig 文件</h3>\n</li>\n</ol>\n<p>在第一次用git命令来提交一个仓库的修改，你可能会首先看到像下面这种内容：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae13f9c55a4e007626228\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n*** Please tell me who you are.\r\nRun\r\n  git config --global user.email \"you@example.com\"\r\n  git config --global user.name \"Your Name\"\r\nto set your account's default identity.</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae13f9c55a4e007626228-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae13f9c55a4e007626228-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae13f9c55a4e007626228-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae13f9c55a4e007626228-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ae13f9c55a4e007626228-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae13f9c55a4e007626228-1\"><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span> <span class=\"crayon-i\">Please</span> <span class=\"crayon-i\">tell</span> <span class=\"crayon-i\">me</span> <span class=\"crayon-i\">who</span> <span class=\"crayon-i\">you</span> <span class=\"crayon-v\">are</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae13f9c55a4e007626228-2\"><span class=\"crayon-i\">Run</span></div><div class=\"crayon-line\" id=\"crayon-5ae13f9c55a4e007626228-3\">  <span class=\"crayon-i\">git</span> <span class=\"crayon-i\">config</span> <span class=\"crayon-o\">--</span><span class=\"crayon-m\">global</span> <span class=\"crayon-v\">user</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">email</span> <span class=\"crayon-s\">\"you@example.com\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae13f9c55a4e007626228-4\">  <span class=\"crayon-i\">git</span> <span class=\"crayon-i\">config</span> <span class=\"crayon-o\">--</span><span class=\"crayon-m\">global</span> <span class=\"crayon-v\">user</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">name</span> <span class=\"crayon-s\">\"Your Name\"</span></div><div class=\"crayon-line\" id=\"crayon-5ae13f9c55a4e007626228-5\"><span class=\"crayon-st\">to</span> <span class=\"crayon-i\">set</span> <span class=\"crayon-i\">your</span> <span class=\"crayon-i\">account</span>'<span class=\"crayon-i\">s</span> <span class=\"crayon-st\">default</span> <span class=\"crayon-v\">identity</span><span class=\"crayon-sy\">.</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p>你可能还没有意识到那些命令正在修改~/.gitconfig文件的内容，这个文件就是Git存储全局配置选项的文件。通过你的~/.gitconfig文件你可要做很多事情，包括定义别名，永久的打开（或关闭）一些特定的命令选项，还可以修改Git如何工作的方面（例如：git diff使用哪个diff算法，或者默认使用什么类型的的合并策略）。你甚至可以按条件地基于路径包含其他配置文件到一个仓库！使用“man git-config”查看所有细节。</p>\n<h3>2. 你的仓库的.gitconfig文件</h3>\n<p>在之前的技巧中，你可能会想知道在git config 命令中的—global标识是做什么的。它告诉Git更新“global”配置，也就是~/.gitconfig发现的这个配置。当然，拥有一个全局的配置代表了一个本地配置，而且足够肯定的是，如果你省略—global选项，git config 会更新这个仓库自己的配置，这个配置文件存储在.git/config。<br>\n在.git/config中设置的选项会推翻在~/.gitconfig文件中的对应设置。因此，例如，如果你需要在一个特定的仓库中使用一个不同的邮箱地址，你可以运行“git config user.email “also_you@example.com””。然后，你在这个仓库中提交会使用你单独配置的这个邮箱地址。如果你使用一个工作的电脑在开源项目中工作，但是希望在这个项目中使用个人的邮箱地址，而其他在主Git配置中仍然使用工作邮箱，这一点是非常有用的。<br>\n在~/.gitconfig中可以设置的任何东西，都可以在.git/config中设置来对这个仓库做特定设置。在下面的这些技巧中，当我提到在你的~/.gitconfig文件中添加什么东西，同时也说明可以在特定的仓库的.git/config中添加来设置那个选项。</p>\n<h3>3、别名</h3>\n<p>别名是你可以在你的~/.gitconfig文件里做的另外一件事。他的工作原理就像shell命令行里的别名——设置一个新的命令名称来调用一个或者多个其他的命令，这些命令通常包括一些特定的选项或标识。别名对于你经常使用的那些又长又复杂的命令行是非常有效的。</p>\n<p>你可以使用git config命令来定义别名——例如，执行”git config —global —add <a href=\"http://alias.st/\" rel=\"nofollow\">alias.st</a> status”命令后，会使得执行git st与执行git status做的是同样的事情——然而，我发现当定义别名的时候，只需要直接在~/.gitconfig文件里编辑通常会更加容易。</p>\n<p>如果你选择这么做，你会发现~/.gitconfig文件就是一个INI文件，INI是一种带有特定段落的基础键值对文件格式。添加一个别名时，你将改变[alias]段落。例如：上面提到的定义相同的git st别名，需要添加下面这段代码：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae13f9c55a59940919980\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[alias]\r\nst = status</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae13f9c55a59940919980-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae13f9c55a59940919980-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae13f9c55a59940919980-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">alias</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae13f9c55a59940919980-2\"><span class=\"crayon-i\">st</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-v\">status</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>（如果已经有了[alias]这个段落，只需要在这个段落中添加到第二行）</p>\n<h3>4. shell命令中的别名</h3>\n<p>别名不仅仅是运行其他Git子命令——你也可以定义别名，这些别名可以运行其他shell命令。这是一个很好的方法来处理一个重复的、罕见的、复杂的任务：一旦你已经想到第一次怎么做，那就使用一个别名保存这个命令。例如，我有几个仓库是我fork了一个开源项目，而且在本地做了一些修改，这些修改不用贡献给这个项目。在项目的持续的开发的过程中我想保持最新的版本，同时保留我的本地修改。为了完成这个想法，我需要定期地从upstream仓库中合并这些修改到我的fork——我定义一个别名“upstream-merge”来完成这个操作。定义如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae13f9c55a5e490524163\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nupstream-merge = !\"git fetch origin -v &amp;&amp; git fetch upstream -v &amp;&amp; git merge upstream/master &amp;&amp; git push\"</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae13f9c55a5e490524163-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae13f9c55a5e490524163-1\"><span class=\"crayon-v\">upstream</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">merge</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-o\">!</span><span class=\"crayon-s\">\"git fetch origin -v &amp;&amp; git fetch upstream -v &amp;&amp; git merge upstream/master &amp;&amp; git push\"</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>别名定义开始的这个“!”是告诉Git来通过shell运行这个命令。这个例子包括了运行一些git命令，但是使用这种方式定义别名可以运行任何shell命令。<br>\n（注意：如果你想复制我的upstream-merge别名，你将需要确认你有一个Git remote命名为upstream来指定这个你fork的upstream仓库。你可以通过“git remote add upstream &lt;URL to repo&gt;”来添加一个。）</p>\n<h3>5. 可视化提交图</h3>\n<p>如果你从事的是一个有很多分支活动的项目，有时可能很难掌握所有正在发生的工作以及它们之间的相关性。各种GUI工具可让你弄清楚不同分支的概况以及在所谓的“提交图”中提交记录。例如，以下是我使用<a href=\"https://gitlab.com/\" target=\"_blank\" rel=\"nofollow\">GitLab</a>提交图查看器进行可视化的一个存储卡的部分截图：<br>\n<img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/5dd3991f489b7311925ad56455d62ba1.png\"></p>\n<p>John Anderson, CC BY</p>\n<p>如果你是专注于命令行的用户，就可以不在多个工具之间切换导致分心，这个工具在命令行上实现了类似图形界面的提交视图。通过 –graph 参数获取 git 的记录：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/1ba96822e6f6beb6bca67ca9a19525af.png\"></p>\n<p>John Anderson, CC BY</p>\n<p>下面的命令可以得到一样的仓库可视化片段：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae13f9c55a62180784814\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ngit log --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an&gt;%Creset' --abbrev-commit --date=relative</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae13f9c55a62180784814-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae13f9c55a62180784814-1\"><span class=\"crayon-i\">git</span> <span class=\"crayon-i\">log</span> <span class=\"crayon-o\">--</span><span class=\"crayon-i\">graph</span> <span class=\"crayon-o\">--</span><span class=\"crayon-v\">pretty</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">format</span><span class=\"crayon-o\">:</span><span class=\"crayon-s\">'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an&gt;%Creset'</span> <span class=\"crayon-o\">--</span><span class=\"crayon-v\">abbrev</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">commit</span> <span class=\"crayon-o\">--</span><span class=\"crayon-v\">date</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">relative</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>–graph 选项将图表添加到日志的左侧，–abbrev-commit 存储提交使用了 <a href=\"https://en.wikipedia.org/wiki/Secure_Hash_Algorithms\" target=\"_blank\" rel=\"nofollow\">SHA</a> 方法，          –date=relative 表达式用相对的术语来表示日期，并且  –pretty 以 bit 格式处理自定义格式。我知道 git lg 的别名，它是我最常运行的10个命令之一。</p>\n<h3>6. 更优雅的强制推送(force-push)</h3>\n<p>有时，就跟你尽量避免使用它一样困难的是，你会发现你需要运行 git push –force 来覆写你仓库的远程副本上的历史记录。你可能已得到了一些反馈，他们会要求你进行交互式的变基(rebase)，或者你可能已经搞砸了，并且希望隐藏证据。</p>\n<p>当他人在仓库的远程副本的同一分支上进行改动后，会发生强制推送的风险。当你强制推送已重写的历史记录时，某些提交将会丢失。这是 git push –force-with-lease 出现的原因 – 如果远程分支已更新，它不会允许你执行强制推送，这将确保你不会丢弃他人的工作。</p>\n<h3>7. git add -N</h3>\n<p>你是否使用过git commit -a在一次行动中提交你所有未完成的修改，只有在你push完你的提交后才发现git commit -a忽略了新添加的文件？解决这个问题你可以用git add -N（“通知”）来告诉Git你想把新添加的文件包含在提交中在你第一次实际提交之前。</p>\n<h3>8. git add -p</h3>\n<p>一最佳的实践为当使用Git时确保每个提交只包含一个逻辑更改–不管是修复一个bug还是（实现）一个新功能。然而，有时当你工作，会在你的仓库中出现一个以上的修改提交。你怎么样把事情分开，使每个提交只包含适当的修改呢？git add –patch来解救！</p>\n<p>这个标志将会使git add命令查看你工作副本中所有的变更，询问你是否愿意将它提交，跳过，或者推迟决定（还有其他一些更强大的选项，你可以通过在运行这命令后选择？来查看）。git add -p是一个神奇的工具来生产结构良好的提交。</p>\n<h3>9. git checkout -p</h3>\n<p>与 git add -p类似，git checkout命令将使用 –patch 或 -p 选项，这会使 git 在本地工作副本中展示每个“大块”的改动，并允许丢弃对应改动 —— 简单地说就是恢复本地工作副本到你改变之前的状态。</p>\n<p>某些场景下这非常有用，例如，在你跟踪一个 bug 时引入了一堆调试日志语句，在修正了这个 bug 之后，你可以先使用 git checkout -p 删除所有新加的调试日志，之后使用 git add -p 来添加 bug 修复。没有比组合一个极好的、结构良好的提交更令人满意的了！</p>\n<h3>10. Rebase with command execution</h3>\n<p>有些项目有一条规则，即存储库中的每个提交都必须处于可工作状态 – 也就是说，在每次提交时，代码应该是可编译的，或运行测试套件应该不会失败的。当你在某分支上工作时间长时，但如果你最终因为某种原因需要rebase时，那么跳过每个变基后的提交以确保你没有意外引入一个中断是有些冗长乏味的。</p>\n<p>幸运的是，git rebase已经支持了-x或–exec选项。git rebase -x &lt;cmd&gt;将在每次提交应用到rebase后运行该命令。因此，例如，如果你有一个项目，其中npm run tests会运行你的测试套件，那么在rebase期间应用每次提交后，git rebase -x npm run tests将会运行测试套件。这使你可以查看测试套件是否在任何变基后的提交中有失败情况，因此你可以确保测试套件在每次提交时仍能通过。</p>\n<h3>11. 基于时间修改的指南</h3>\n<p>很多Git子命令都接受一个修正的参数来决定命令作用于仓库的哪个部分，可能是某次特定的提交的 sha1 值，或者一个分支的名称，又或者是一个符号性的名称如 HEAD（代表当前检出分支最后一次的提交），除了这些简单的形式以外，你还可以附加一个指定的日期或时间作为参数，表示“这个时间的引用”。</p>\n<p>这个功能在某些时候会变得十分有用，比如当你处理最新出现的 bug，自言自语道：“这个功能明明昨天还是好好的，到底又改了些什么”，不用盯着满屏的 git 日志的输出试图弄清楚什么时候更改了提交，您只需运行 git diff HEAD@{yesterday}，会看到从昨天以来的所有修改，这也适用于较长的时间段（例如 git diff HEAD@{‘2 months ago’}） ，以及一个确切的日期（例如git diff HEAD@{‘2010-01-01 12:00:00’}）。</p>\n<p>您还可以将这些基于日期的修改参数与使用修正参数的任何 Git 子命令一起使用。在 gitrevisions 手册页中有关于具体使用哪种格式的详细信息。</p>\n<h3>12. 全知的 reflog</h3>\n<p>你是不是试过在 rebase 时干掉过某次提交，后来又发现你需要保留这次提交的一些东西？你可能觉得这些提交的东西已经永远找不回来了，只能从头再来了。其实不然，但如果你在本地工作副本中提交了，提交就会进入到 “引用日志” ，你仍然可以访问到。</p>\n<p>运行 git reflog 将在本地工作副本中显示当前分支的所有活动的列表，并为您提供每个提交的 SHA1 值。一旦发现你 rebase 时放弃的那个提交，你可以运行 git checkout  来检出该次提交，复制好你需要的信息，然后再运行 git checkout HEAD 返回到分支最新的提交去。</p>\n<h3>以上就是全部内容</h3>\n<p>希望这些技巧中至少有一个能教你一些关于 Git 的新知识，Git 已经 12 岁了，在这个持续创新，不断添加新特性的项目里，你最喜欢哪个技巧？</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113885\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113885votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113885\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"}
{"url_object_id": "e18020cb4a67969752b680d482555760", "title": "线上账务系统余额并发更新问题记录", "create_date": "2018/04/24", "url": "http://blog.jobbole.com/113917/", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/11/e78e36715813f49e9e62fe0c6050075c.png"], "praise_nums": 1, "comment_nums": 0, "fav_nums": 1, "tags": "IT技术,MySQL,数据库", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://my.oschina.net/hebaodan/blog/917141\">hebaodan</a>   </div><p>某电商平台，某天线上用户报bug说账户余额信息与交易流水对不上。可以认为是数据库并发更新问题，由此定位出具体原因，并给出解决方案。</p>\n<h2>问题现象</h2>\n<h3>场景描述</h3>\n<p>线上账务系统，在定时结算给卖家钱时，且高并发量的情况下，出现提现x元（假设当前用户余额为x元）余额为0后，再转入该账户一笔钱（假设为y元），结果账户余额变为了<strong>x+y</strong> 元，导致用户余额错误。 ps：账户余额的变更都是在事务中update的</p>\n<p><strong>环境说明</strong></p>\n<p>mysql5.7 + innodb，事务隔离级别是<strong>REPEATABLE-READ</strong></p>\n<h3>场景模拟</h3>\n<p>我们简化下线上的数据结构，进行场景模拟。 数据表如下： ‘账户主表’</p>\n<p> </p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae13bde347bf750178372\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nCREATE TABLE user (\r\nuid int(11) NOT NULL COMMENT '类型id+自增序列',\r\nname varchar(32) DEFAULT NULL,\r\nPRIMARY KEY (uid)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='账户主表'</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae13bde347bf750178372-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae13bde347bf750178372-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae13bde347bf750178372-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae13bde347bf750178372-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ae13bde347bf750178372-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae13bde347bf750178372-1\"><span class=\"crayon-e\">CREATE </span><span class=\"crayon-e\">TABLE </span><span class=\"crayon-e\">user</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae13bde347bf750178372-2\"><span class=\"crayon-e\">uid </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">COMMENT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'类型id+自增序列'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5ae13bde347bf750178372-3\"><span class=\"crayon-e\">name </span><span class=\"crayon-e\">varchar</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">32</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae13bde347bf750178372-4\"><span class=\"crayon-e\">PRIMARY </span><span class=\"crayon-e\">KEY</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">uid</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5ae13bde347bf750178372-5\"><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ENGINE</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">InnoDB </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">CHARSET</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">utf8 </span><span class=\"crayon-v\">COMMENT</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'账户主表'</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p>‘账户余额明细表’</p>\n<p> </p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae13bde347c7171254611\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nCREATE TABLE user_account (\r\nuid int(11) NOT NULL,\r\namount decimal(19,4) DEFAULT 0 COMMENT '账户余额',\r\nPRIMARY KEY (uid)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='账户余额明细表'</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae13bde347c7171254611-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae13bde347c7171254611-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae13bde347c7171254611-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae13bde347c7171254611-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ae13bde347c7171254611-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae13bde347c7171254611-1\"><span class=\"crayon-e\">CREATE </span><span class=\"crayon-e\">TABLE </span><span class=\"crayon-e\">user_account</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae13bde347c7171254611-2\"><span class=\"crayon-e\">uid </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5ae13bde347c7171254611-3\"><span class=\"crayon-e\">amount </span><span class=\"crayon-e\">decimal</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">19</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">COMMENT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'账户余额'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae13bde347c7171254611-4\"><span class=\"crayon-e\">PRIMARY </span><span class=\"crayon-e\">KEY</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">uid</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5ae13bde347c7171254611-5\"><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ENGINE</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">InnoDB </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">CHARSET</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">utf8 </span><span class=\"crayon-v\">COMMENT</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'账户余额明细表'</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p>账户类型配置</p>\n<p> </p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae13bde347cb950056291\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nCREATE TABLE user_conf (\r\ntype_id int(11) NOT NULL, description varchar(32) DEFAULT NULL COMMENT '类型描述', PRIMARY KEY (type_id) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='账户类型配置'</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae13bde347cb950056291-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae13bde347cb950056291-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae13bde347cb950056291-1\"><span class=\"crayon-e\">CREATE </span><span class=\"crayon-e\">TABLE </span><span class=\"crayon-e\">user_conf</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae13bde347cb950056291-2\"><span class=\"crayon-e\">type_id </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">description </span><span class=\"crayon-e\">varchar</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">32</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">COMMENT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'类型描述'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">PRIMARY </span><span class=\"crayon-e\">KEY</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">type_id</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ENGINE</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">InnoDB </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">CHARSET</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">utf8 </span><span class=\"crayon-v\">COMMENT</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'账户类型配置'</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>具体数据为：</p>\n<p> </p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae13bde347cf393589537\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nselect * from user;\r\n+-------+------+ | uid | name | +-------+------+\r\n| 10001 | a |\r\n| 10002 | b |\r\nselect * from user_account;\r\n+-------+----------+ | uid | amount | +-------+----------+\r\n| 10001 | 10.0000 |\r\n| 10002 | 108.9900 |\r\nselect * from user_conf;\r\n+---------+--------------+ | type_id | description | +---------+--------------+\r\n| 100 | 外部账户 |\r\n| 200 | 内部账户 |</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae13bde347cf393589537-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae13bde347cf393589537-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae13bde347cf393589537-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae13bde347cf393589537-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ae13bde347cf393589537-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae13bde347cf393589537-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ae13bde347cf393589537-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae13bde347cf393589537-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ae13bde347cf393589537-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae13bde347cf393589537-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ae13bde347cf393589537-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae13bde347cf393589537-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae13bde347cf393589537-1\"><span class=\"crayon-e \">select *</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">from </span><span class=\"crayon-v\">user</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae13bde347cf393589537-2\"><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">uid</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">+</span></div><div class=\"crayon-line\" id=\"crayon-5ae13bde347cf393589537-3\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10001</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae13bde347cf393589537-4\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10002</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line\" id=\"crayon-5ae13bde347cf393589537-5\"><span class=\"crayon-e \">select *</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">from </span><span class=\"crayon-v\">user_account</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae13bde347cf393589537-6\"><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">uid</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">amount</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">+</span></div><div class=\"crayon-line\" id=\"crayon-5ae13bde347cf393589537-7\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10001</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10.0000</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae13bde347cf393589537-8\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10002</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">108.9900</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line\" id=\"crayon-5ae13bde347cf393589537-9\"><span class=\"crayon-e \">select *</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">from </span><span class=\"crayon-v\">user_conf</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae13bde347cf393589537-10\"><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">type_id</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">description</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">+</span></div><div class=\"crayon-line\" id=\"crayon-5ae13bde347cf393589537-11\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span>外部账户<span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae13bde347cf393589537-12\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">200</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span>内部账户<span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0033 seconds] -->\r\n<p><strong>模拟</strong>提现（即余额减）和入账（即余额加）<strong>并发操作的事务</strong>如下：</p>\n<table>\n<thead>\n<tr>\n<th>session1-提现10元</th>\n<th>session2-入账20元</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>begin；</td>\n<td></td>\n</tr>\n<tr>\n<td>select description from user_conf where type_id = 100;</td>\n<td></td>\n</tr>\n<tr>\n<td>select * from user where uid = 10001 for update; // user表用来做互斥</td>\n<td></td>\n</tr>\n<tr>\n<td>select amount from user_account where uid = 10001; // 10.00</td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td>begin;</td>\n</tr>\n<tr>\n<td></td>\n<td>select description from user_conf where type_id = 100;</td>\n</tr>\n<tr>\n<td></td>\n<td>select * from user where uid = 10001 for update; // <strong>wating</strong></td>\n</tr>\n<tr>\n<td></td>\n<td>//wating</td>\n</tr>\n<tr>\n<td>update user_account set amount = 0.00 where uid = 10001;</td>\n<td></td>\n</tr>\n<tr>\n<td>commit;</td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td>拿到锁</td>\n</tr>\n<tr>\n<td></td>\n<td>select amount from user_account where uid = 10001; //<strong>10.00</strong></td>\n</tr>\n<tr>\n<td></td>\n<td>入账20元，代码中计算后应该为30元</td>\n</tr>\n<tr>\n<td></td>\n<td>update user_account set amount = 30.00 where uid = 10001;</td>\n</tr>\n<tr>\n<td></td>\n<td>commit;</td>\n</tr>\n</tbody>\n</table>\n<p>问题出现了，后面再查询该用户余额为30元，即用户提现的10元未反映在余额中</p>\n<h2>原因定位</h2>\n<p>熟悉mysql的同学或许已经知道问题是<strong>由REPEATABLE-READ隔离级别下快照读导致</strong>。</p>\n<p><strong>具体解释：</strong></p>\n<p>RR级别下，第一次读操作会生成快照，对于可见性来说，只有当第一次读之前其他事务提交的修改和自己的修改可见，其他的均不可见。</p>\n<blockquote><p>官网文档：<a href=\"https://dev.mysql.com/doc/refman/5.7/en/glossary.html\">https://dev.mysql.com/doc/refman/5.7/en/glossary.html</a> snapshot A representation of data at a particular time, which remains the same even as changes are committed by other transactions.</p>\n<p>With REPEATABLE READ isolation level, the snapshot is based on the time when the first read operation is performed.</p></blockquote>\n<p><strong>可见性原理</strong></p>\n<p>可参考文章：<a href=\"http://hedengcheng.com/?p=148\">http://hedengcheng.com/?p=148</a></p>\n<p>回到上述模拟场景中，session2在sql语句<code>select description from user_conf where type_id = 100;</code> 时已生成快照，虽然session1提交了，但仍然不可见，导致并发更新问题。</p>\n<p>另外，开启事务后，<strong>SELECT … FOR UPDATE 是不会生成快照的</strong>，大家可自行实验</p>\n<h2>解决方案</h2>\n<h3>方案一</h3>\n<p>将REPEATABLE-READ隔离级别改为READ-COMMITTED，这样即能看到最新提交的数据。</p>\n<h3>方案二</h3>\n<p>在读’账户余额明细表’user_account 的时候加 for update，这样会 1.强制读该行记录的最新版本数据，2.且若其他事务未commit，本事务将阻塞，保证串行更新</p>\n<h3>方案三</h3>\n<p>延时生成快照。开启事务后，首先就通过user表做互斥，直接for update加锁，针对多个事务并发更新即变为串行。</p>\n<h2>附：定位过程</h2>\n<ol>\n<li>针对上报bug用户，查询其交易流水明细与余额变更明细，确认账务存在问题</li>\n<li>查询账务系统近几天是否有上线变更，检查无</li>\n<li>拉取账务数据库mysql general log，找到并发更新的两个事务session</li>\n<li>查询数据库设置的隔离级别为RR，查询应用数据库连接池配置即<strong>session的隔离级别未配置</strong>，采用数据库配置</li>\n<li>确认由RR级别导致（当然也可以认为是代码问题导致）</li>\n<li>确认是一个月前账务系统分库分表上线，改用其他<strong>连接池且未设置session隔离级别</strong>。而之前是有配置session的隔离级别为READ-COMMITTED。</li>\n</ol>\n<h2>延伸思考</h2>\n<p>mysql RR级别适用的业务场景是什么，应该怎么选择？ 有兴趣或有见解的同学可以留言回复或私信~~</p>\n<h2>参考</h2>\n<blockquote><p><a href=\"http://blog.csdn.net/chen77716/article/details/6742128#comments\">http://blog.csdn.net/chen77716/article/details/6742128#comments</a></p>\n<p><a href=\"http://hedengcheng.com/?p=148\">http://hedengcheng.com/?p=148</a></p>\n<p><a href=\"https://liuzhengyang.github.io/2017/04/18/innodb-mvcc/\">https://liuzhengyang.github.io/2017/04/18/innodb-mvcc/</a></p></blockquote>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113917\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113917votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113917\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"}
{"url_object_id": "e471e2a60cb82e666c724e013e14e93b", "title": "我曾误删了公司的数据库，但还是活下来了", "create_date": "2018/04/21", "url": "http://blog.jobbole.com/113909/", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2011/12/i-accidentally-deleted-all-our-data.jpg"], "praise_nums": 1, "comment_nums": 0, "fav_nums": 1, "tags": "IT技术,数据库", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://medium.freecodecamp.org/the-times-ive-messed-up-as-a-developer-3c0bcaa1afd6\">Zachary Kuhn</a>   译文出处：<a target=\"_blank\" href=\"http://36kr.com/p/5129182.html\">36氪</a>   </div><p>上周我与同事们进行了一次关于职业生涯中搞砸了一些事情的简短谈话。这确实会沦为他人笑柄，却更给我们带来了珍贵的教训。重要的是，我们应该分享那些曾经的错误，这样其他人就可以从其中学习。下文是最近在我身上发生的例子。</p>\n<h3>为什么有如此多误删生产数据库的事情发生？</h3>\n<p>几个月前，Reddit上有<a href=\"https://www.reddit.com/r/cscareerquestions/comments/6ez8ag/accidentally_destroyed_production_database_on/\">一篇文章</a>，讲了一名初级开发人员在上班的第一天就删除了生产数据库的事。我们都很憷于读到这类犯了这类无法让人忘却的大错误的文章。因为我们离这些也不远，而大多数人都是“死里逃生”。</p>\n<p>在我的第一份工作中，一位高级数据库管理员在上班第一天就误删了生产数据库。这类故事情节比比皆是。这个团队从一个星期的备份中恢复了他导致的错误，并让他继续工作。十年后，他们依然将其作为笑点。</p>\n<p>今年早些时候，我被派去检查一个客户的生产数据上的问题。他们进行了小范围的非公开测试，结果网站上没有显示任何内容。我想查查是否是存在漏洞或是易损性问题导致了这一结果。</p>\n<p>我通过了生产机器上的签名环节，然后打开了数据库。内容库（articles table）内空空如也。这证实了我们在网站上看到的情况是真实的。</p>\n<p>用户库（users table）内依然有用户数据存在。真让人奇怪。所以情况是我们丢失了所有内容，但是至少测试用户的信息依然存在。我们给出的解释是这是一个测试行为，所以这些事情有可能发生。</p>\n<p>接下来的几分钟一片混乱。我不记得自己做了什么。我不认为自己笨到在控制台上执行了删除用户库的操作。但是事实就是这么发生了，现在后台既没有了内容库，也没有了用户库。这真实下了我一大跳。</p>\n<p>然后我的大脑就开始转动起来思考如何解决这个问题。我真的把用户库给删掉了吗？是的。我们存备份了吗？没有。我们应该如何告诉客户这个事情？不知道。</p>\n<p>我犹记得自己走向项目经理那里，坐在她身边，向她解释了发生了什么事情时的场面。因为我们的内容库中没有内容，这就是为什么网站上空空如也的原因。同时，我还删除了用户库。他们现在需要重新邀请所有的用户，如果他们能够弄清楚谁是谁。</p>\n<p>我回到了自己的办公室，垂头丧气。</p>\n<p>不过，我还是没有接受这件事。我们一开始是如何失去这些东西的？</p>\n<p>我开始不停地往深处想。半是为了否认这件事，半是想要挽回面子。不久，我注意到了一些重要事情。</p>\n<p>在服务器上还存在着其他5个数据库。其中一个数据库的名字和我刚才看到的数据库名字很像。</p>\n<p>当我查看这个数据库的时候，发现所有的内容都在里面。用户库也安然无恙。结果证明，是一个配置变动无意中改变了生产设置，使站点指向了一个全新的数据库。我之前所看的用户信息是什么？种子数据。</p>\n<p>真是谢天谢地。早上的神经紧张和胃酸让我觉得很不舒服，但是我们“恢复”了数据，并在坏消息传开之前找到了真正的问题。</p>\n<p>从这件事中可以吸取很多教训。其中一点是关于最简单原则：我们总是在做的备份，也许是开发人员最有成效的挽救药。</p>\n<h3>继续前进但不要冲得过前</h3>\n<p>我最近犯的一个错误不太引人注目。事实上，这是一个经由小错误所引起的小错误最终导致了一场混乱的故事。</p>\n<p>我们面临的是一个时间紧迫的项目。</p>\n<p>在初次会议上，我们团队一致认为完成它会花费比预定时间多一倍的时间。这个最后期限一开始就对我们产生影响，让我宽松地通过了身份认证部分而留有更多时间去关注客户所实际关注的功能设计。</p>\n<p>我只是在一个单一页面测试了身份验证测试，但是当时还不了解它们将如何被组合在一起。</p>\n<p>把它单列出来是我做的一个错误决定。我忽略了一些重要事情：</p>\n<ol class=\" list-paddingleft-2\">\n<li>用户在登陆之后会从cookie中加载内容，但是这个页面却试图在没有任何等待的情况下进行加载。根据事件的发生顺序，用户会得到带来服务器的反映，说其是未经授权的。</li>\n<li>身份验证也未检查令牌是否过期。如果用户不经常访问这个网站。那么当其再一次访问时，网站需要用户登出再登入才会运行。</li>\n<li>令牌应该基于每个请求进行更新，但是我从未花费时间去理解其发生前后的规则。所以，这又产生了一个时间问题。如果我们同时发送了几个请求，根据它们返回的顺序，用户会得到那个在后来的请求中无法使用的令牌。</li>\n</ol>\n<p>我们匆匆忙忙地赶着项目，却仍花费了比规定多一倍的时间。区别之处在于有更多的漏洞，并需要花更多时间去跟踪并修复这些漏洞。</p>\n<p>这使我感到窘迫。之后因为整件事情变得比较糟糕哦而让我在公众场合感到羞愧。</p>\n<p>我想说的是：在此之后，我花费了时间去学习认证程序。我现在了解了OAuth、JWT、刷新令牌和到期行为。我仔细研究了其他人所编写的身份验证代码。我能够在不同的语言和框架中建构身份验证程序。</p>\n<h3>将失败转化为未来的成功</h3>\n<p>这是我从那些表现糟糕的事情中所获得的经验。如果你愿意，那么几乎所有好的结果都会由此而来。</p>\n<p>如果有人能从自己的错误中汲取教训，那么他就会比现在更优秀。我试着不去打击那些第一次犯错误的队友。他们通常都知道自己把事情搞的一团糟。</p>\n<p>我也正尝试不对那些不断犯同样错误的人施加压力。他们仍然值得同情。</p>\n<p>如果在错误中做到这4点，那么你就会不断成长：</p>\n<ol class=\" list-paddingleft-2\">\n<li>嘲笑自己。</li>\n<li>从中汲取经验教训。</li>\n<li>改正错误。</li>\n<li>分享自己的错误，让其他人也有所收获。</li>\n</ol>\n<p>最后，我想讲一个关于错误价值的轶事。20世纪初，IBM的首席执行官托马斯·J·沃森曾遇到过一名员工，这名员工的一系列糟糕决策让公司付出了巨大代价。当沃森被问到是否会解雇这名员工时，他回应道：</p>\n<blockquote><p>“不，我刚在他身上花了60万美元的培训费。为什么要让别人白白捡去这个便宜？”</p></blockquote>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113909\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113909votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113909\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"}
{"url_object_id": "6e3fcf5927147f4633e5566c0c847b94", "title": "精通 Linux 的 “kill” 命令", "create_date": "2018/04/17", "url": "http://blog.jobbole.com/113894/", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/05/77d80105fd15f2465894827e23cc4842.jpeg"], "praise_nums": 2, "comment_nums": 0, "fav_nums": 2, "tags": "IT技术,Linux", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"http://www.maketecheasier.com/kill-command-in-linux/\">maketecheasier</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-2116-1-rel.html\">Linux中国/flsf</a>   </div><p>无论你使用哪种操作系统，你一定会遇到某个行为失常的应用，它把自己锁死并拒绝关闭。在Linux(还有Mac)，你可以用一个”kill”命令强制终结它。在这个教程中，我们将展示给你多种方式使用”kill”命令终结应用。</p>\n<h3><strong>Kill命令和信号</strong></h3>\n<p>当你执行一个”kill”命令，你实际上发送了一个信号给系统，让它去终结不正常的应用。总共有60个你可以使用的信号，但是基本上你只需要知道SIGTERM(15)和SIGKILL(9)。</p>\n<p>你可以用这个命令看到所有信号的列表：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae132ccb3c4a875186987\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nkill -l</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae132ccb3c4a875186987-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae132ccb3c4a875186987-1\"><span class=\"crayon-v\">kill</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">l</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/48403246372fb16ffcd27eb6495b82a0.png\" alt=\"\" width=\"740\" height=\"341\"></p>\n<ul>\n<li>SIGTERM – 此信号请求一个进程停止运行。此信号是可以被忽略的。进程可以用一段时间来正常关闭，一个程序的正常关闭一般需要一段时间来保存进度并释放资源。换句话说，它不是强制停止。</li>\n<li>SIGKILL – 此信号强制进程立刻停止运行。程序不能忽略此信号，而未保存的进度将会丢失。</li>\n</ul>\n<p>使用”kill”的语法是：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae132ccb3c54486265407\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nkill [信号或选项] PID(s)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae132ccb3c54486265407-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae132ccb3c54486265407-1\"><span class=\"crayon-i\">kill</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span>信号或选项<span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">PID</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>默认信号（当没有指定的时候）是SIGTERM。当它不起作用时，你可以使用下面的命令来强制kill掉一个进程:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae132ccb3c58655617958\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nkill SIGKILL PID</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae132ccb3c58655617958-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae132ccb3c58655617958-1\"><span class=\"crayon-e\">kill </span><span class=\"crayon-e\">SIGKILL </span><span class=\"crayon-v\">PID</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>或者</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae132ccb3c5c703786275\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nkill -9 PID</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae132ccb3c5c703786275-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae132ccb3c5c703786275-1\"><span class=\"crayon-v\">kill</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">9</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">PID</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>这里”-9″代表着SIGKILL信号。</p>\n<p>如果你不知道应用的PID，仅需要运行这个命令：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae132ccb3c5f098037079\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nps ux</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae132ccb3c5f098037079-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae132ccb3c5f098037079-1\"><span class=\"crayon-e\">ps </span><span class=\"crayon-v\">ux</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>它会显示所有正在运行的应用还有应用的PID。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/fdb483b1624e6e05fd5e2b6f84722403.png\" alt=\"\" width=\"700\" height=\"414\"></p>\n<p>例如，要kill掉Chrome，我会运行命令：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae132ccb3c63770120785\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nkill -9 3629</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae132ccb3c63770120785-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae132ccb3c63770120785-1\"><span class=\"crayon-v\">kill</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">9</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3629</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>也可以在同一时间kill多个进程。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae132ccb3c66019693035\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nkill -9 PID1 PID2 PID3</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae132ccb3c66019693035-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae132ccb3c66019693035-1\"><span class=\"crayon-v\">kill</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">9</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">PID1 </span><span class=\"crayon-e\">PID2 </span><span class=\"crayon-v\">PID3</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p></p>\n<h3><strong>PKill</strong></h3>\n<p>“pkill”命令允许使用扩展的正则表达式和其它匹配方式。你现在可以使用应用的进程名kill掉它们，而不是使用PID。例如，要kill掉Firefox浏览器，只需要运行命令：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae132ccb3c69661232469\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npkill firefox</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae132ccb3c69661232469-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae132ccb3c69661232469-1\"><span class=\"crayon-e\">pkill </span><span class=\"crayon-v\">firefox</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>使用正则表达式匹配的话，你可以输入进程名的部分字符，比如：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae132ccb3c6c783589718\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npkill fire</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae132ccb3c6c783589718-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae132ccb3c6c783589718-1\"><span class=\"crayon-e\">pkill </span><span class=\"crayon-v\">fire</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>为了避免kill掉错误的进程，你应该用一下”pgrep -l [进程名]”列表来匹配进程名称。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/4bf646e70d32b860715b16e57e81ca38.png\" alt=\"\" width=\"396\" height=\"244\"></p>\n<h3><strong>Killall</strong></h3>\n<p>killall同样使用进程名替代PID，并且它会kill掉所有的同名进程。例如，如果你正在运行多个Firefox浏览器的实例，可以用命令把它们全部kill掉:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae132ccb3c70087047677\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nkillall firefox</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae132ccb3c70087047677-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae132ccb3c70087047677-1\"><span class=\"crayon-e\">killall </span><span class=\"crayon-v\">firefox</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>在Gnome中，你可以使用这个命令重启Nautilus：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae132ccb3c73025901894\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nkillall nautilus</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae132ccb3c73025901894-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae132ccb3c73025901894-1\"><span class=\"crayon-e\">killall </span><span class=\"crayon-v\">nautilus</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p></p>\n<h3><strong>xkill</strong></h3>\n<p>xkill 是图形方式kill一个应用。当你在终端键入”xkill”，你的光标将立刻变成一个”十字”。你只需要做的是在不正常的应用上点击一下，它就会立刻kill掉这个应用。如果你经常用的话，你也可以添加一个<a href=\"http://www.maketecheasier.com/quick-tips/kill-unresponsive-application-in-ubuntu/\" target=\"_blank\" rel=\"external nofollow\">键盘快捷键来激活xkill</a>。</p>\n<h3><strong>结论</strong></h3>\n<p>当应用不正常而导致系统挂起的时候，人们往往重启计算机并且再一次开启所有的任务。而有了这些”kill”命令，你将能够更好的处理不正常的应用，从而避免导致系统崩溃。当你不想因一个不正常的进程而导致服务器宕机时，它尤其的有用。</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113894\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113894votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113894\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"}
{"url_object_id": "9b7fbbbdabdb7fefb5606fee9d447604", "title": "用信鸽来解释 HTTPS", "create_date": "2018/04/14", "url": "http://blog.jobbole.com/113883/", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/04/9b4c9b679332b4ee36faf1fb4002ed2f.png"], "praise_nums": 1, "comment_nums": 0, "fav_nums": 1, "tags": "IT技术,HTTPS", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://medium.freecodecamp.org/https-explained-with-carrier-pigeons-7029d2193351\">Andrea Zanin</a>   译文出处：<a target=\"_blank\" href=\"https://www.oschina.net/translate/https-explained-with-carrier-pigeons\">开源中国</a>   </div><p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/9b4c9b679332b4ee36faf1fb4002ed2f.png\"></p>\n<p>密码学是一门难以理解的学科，因为它充满了数学定理。但是除非你要实际开发出一套加密算法系统，否则你是没必要强制理解那些深奥的数学定理的。</p>\n<p>如果你阅读本文的目的是想设计下一套 HTTPS 协议，那我只能抱歉的说本文的知识还远远不够；如果不是的话，那么就煮杯咖啡，轻松愉悦的阅读本文吧。</p>\n<p><strong>爱丽丝、鲍伯和 … 信鸽？</strong></p>\n<p>你在互联网上从事的任何活动（阅读这篇文章、在亚马逊上购物、上传图片等）归结到底都是从某台服务器上发送和接收信息。</p>\n<p>这个说起来可能有点抽象，不如让我们假设这些消息都是由信鸽来传递的。我知道这个假设有些太过随意，但相信我 HTTPS 就是这样工作的，尽管它的速度快的多。</p>\n<p>我们先不谈服务器、客户端或者黑客攻击，先来聊一下爱丽丝、鲍伯和马洛里。如果这已不是你第一次接触密码学理论，你应该会认识这些名字，因为他们经常在各种密码学文献中被提及。</p>\n<p><strong>初级交流</strong></p>\n<p>如果爱丽丝想要给鲍勃发送一段信息，她会把信息绑在信鸽的腿上然后送往鲍勃那里。鲍勃收到了信息，并阅读了信息，非常完美。</p>\n<p>但如果马洛里拦截了爱丽丝的鸽子并且篡改了信息呢？鲍勃就没有办法去知道爱丽丝发出的信息在传递过程中遭到了修改。</p>\n<p>这就是 HTTP 如何运作的。看起来很可怕对吧？我是不会通过 HTTP 来发送我的银行资信证明的，并且你也不应如此。</p>\n<p><strong>隐蔽的密码</strong></p>\n<p>那么如果爱丽丝和鲍勃都非常的机智。他们一致认同使用一种隐蔽的密码来书写他们的信息。他们会将信息中的每个字母按照字母表中的顺序前移三位。比如，D→A，E→B，F→C。如此一来，原文为 “secret message” 的信息就变成了 “pbzobq jbppxdb” 。</p>\n<p>那现在如果马洛里再截获了信鸽，她既不能做出有意义的修改同时也不会知道信息的内容，因为她不知道隐蔽的密码到底是什么。然而鲍勃却可以很容易反转密码，依靠 A → D, B → E, C → F 之类的规则破译信息的内容。加密后的信息 “pbzobq jbppxdb” 会被破解还原为 “secret message” 。</p>\n<p>搞定！</p>\n<p>这就是<strong>对称密匙加密</strong>，因为如果你知道如何加密一段信息那么你同样可以解密这段信息。</p>\n<p>上述的密码通常被称为凯撒码。在现实生活中，我们会使用更为奇特和复杂的密码，但原理相同。</p>\n<p><strong>我们如何决定密匙？</strong></p>\n<p>如果除了发信者和收信者之外没有人知道使用的是什么密匙，对称密匙加密是非常安全的。在凯撒加密中，密匙就是每个字母变到加密字母需要移动多少位的偏移量。我之前的距离中，使用的偏移量是 3 ，但是也可以用 4 或者 12 。</p>\n<p>问题是如果爱丽丝和鲍勃在开始用信鸽传信之前没有碰过头，他们没有一个安全的方式来确立密匙。如果他们自己来在信中传递密匙，马洛里就会截获信息并发现密匙。这就使得马洛里可以在爱丽丝和鲍勃开始加密他们的信息之前或之后，阅读到他们信息的内容并按照她的意愿来篡改信息。</p>\n<p>这是一个<strong>中间人攻击</strong>的典型例子，避免这个问题的唯一方法就是收发信的两方一起修改他们的编码系统。</p>\n<p><strong>通过信鸽传递盒子</strong></p>\n<p>所以爱丽丝和鲍勃就想出了一个更好的系统。当鲍勃想要给爱丽丝发送信息时，他会按照如下的步骤来进行：</p>\n<ul>\n<li>鲍勃向爱丽丝送一只没有携带任何信息的鸽子。</li>\n<li>爱丽丝给鲍勃送回鸽子，并且这只鸽子带有一个有开着的锁的盒子，爱丽丝保管着锁的钥匙。</li>\n<li>鲍勃把信放进盒子中，把锁锁上然后把盒子送给爱丽丝。</li>\n<li>爱丽丝收到盒子，用钥匙打开然后阅读信息。</li>\n</ul>\n<p>这样马洛里就不能通过截获鸽子来篡改信息了，因为她没有打开盒子的钥匙。当爱丽丝要给鲍勃发送消息的时候同样按照上述的流程。</p>\n<p>爱丽丝和鲍勃所使用的流程通常被称为<strong>非对称密钥加密</strong>。之所以称之为非对称，是因为即使是你把信息编码（锁上盒子）也不能破译信息（打开锁住的盒子）。</p>\n<p>在术语中，盒子被称为<strong>公匙</strong>而用来打开盒子的钥匙被称为<strong>私匙</strong>。</p>\n<p><strong>如何信任盒子</strong></p>\n<p>如果你稍加注意你就会发现还是存在问题。当鲍勃收到盒子时他如何能确定这个盒子来自爱丽丝而不是马洛里截获了鸽子然后换了一个她有钥匙能打开的盒子呢？</p>\n<p>爱丽丝决定签名标记一下盒子，这样鲍勃收到盒子的时候就可以检查签名来确定是爱丽丝送出的盒子了。</p>\n<p>那么你们之中的一些人可能就会想了，鲍勃如何打一开始就能识别出爱丽丝的签名呢？这是个好问题。爱丽丝和鲍勃也确实有这个问题，所以他们决定让泰德代替爱丽丝来标记这个盒子。</p>\n<p>那么谁是泰德呢？泰德很有名的，是一个值得信任的家伙。他会给任何人签名并且所有人都信任他只会给合法的人签名标记盒子。</p>\n<p>如果泰德可以确认索要签名的人是爱丽丝，他就会在爱丽丝的盒子上签名。因此马洛里就不可能搞到一个有着泰德代表爱丽丝签了名的盒子，因为鲍勃知道泰德只会给他确认过的人签名，从而识破马洛里的诡计。</p>\n<p>泰德的角色在术语中被称为<strong>认证机构</strong>。而你阅读此文时所用的浏览器打包存有许多认证机构的签名。</p>\n<p>所以当你首次接入一个网站的时候你可以信任来自这个站点的盒子因为你信任泰德而泰德会告诉你盒子是合法的。</p>\n<p>沉重的盒子</p>\n<p>现在爱丽丝和鲍勃有了一个可靠的系统来进行交流，然他们也意识到让鸽子携带盒子比原本只携带信件要慢一些。</p>\n<p>因此他们决定只有在选择用对称加密来给信息编码（还记得凯撒加密法吧？）的密匙时，使用传递盒子的方法（非对称加密）。</p>\n<p>这样就可以二者的优点兼具了，非对称加密的可靠性和对称加密的高效性。</p>\n<p>现实世界中我们不会用信鸽这样慢的送信手段，但用非对称加密来编码信息仍要慢于使用对称加密技术，所以我们只有在交换编码密匙的时候会使用非对称加密技术。</p>\n<p>现在你已经了解了HTTPS是如何工作的了，你的咖啡也应该准备好了。好好享用吧你受之无愧。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113883\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113883votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113883\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"}
{"url_object_id": "f65acad5ef6af86c7aabdf707fd8d461", "title": "给初学者的 fc 示例教程", "create_date": "2018/04/25", "url": "http://blog.jobbole.com/113926/", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/04/9d9a2ae51099793ebcb0c2af97dc331b.png"], "praise_nums": 1, "comment_nums": 0, "fav_nums": 0, "tags": "IT技术,Linux", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.ostechnix.com/the-fc-command-tutorial-with-examples-for-beginners/\">SK</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9572-1.html\">Linux中国/Dotcra</a>   </div><p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/9d9a2ae51099793ebcb0c2af97dc331b.png\" alt=\"\"></p>\n<p><code>fc</code> （<strong>F</strong>ix <strong>C</strong>ommands 的缩写）是个 shell 内置命令，用于在交互式 shell 里列出、编辑和执行最近输入的命令。你可以用你喜欢的编辑器编辑最近的命令并再次执行，而不用把它们整个重新输入一遍。除了可以避免重复输入又长又复杂的命令，它对修正拼写错误来说也很有用。因为是 shell 内置命令，大多 shell 都包含它，比如 Bash 、 Zsh 、 Ksh 等。在这篇短文中，我们来学一学在 Linux 中使用 <code>fc</code> 命令。</p>\n<h3 id=\"toc_1\">fc 命令教程及示例</h3>\n<h4 id=\"toc_2\">列出最近执行的命令</h4>\n<p>执行不带其它参数的 <code>fc -l</code> 命令，它会列出最近 16 个命令。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae1347eb2beb721328747\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ fc -l\r\n507 fish\r\n508 fc -l\r\n509 sudo netctl restart wlp9s0sktab\r\n510 ls -l\r\n511 pwd\r\n512 uname -r\r\n513 uname -a\r\n514 touch ostechnix.txt\r\n515 vi ostechnix.txt\r\n516 echo \"Welcome to OSTechNix\"\r\n517 sudo apcman -Syu\r\n518 sudo pacman -Syu\r\n519 more ostechnix.txt\r\n520 wc -l ostechnix.txt\r\n521 cat ostechnix.txt\r\n522 clear\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2beb721328747-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2beb721328747-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2beb721328747-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2beb721328747-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2beb721328747-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2beb721328747-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2beb721328747-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2beb721328747-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2beb721328747-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2beb721328747-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2beb721328747-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2beb721328747-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2beb721328747-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2beb721328747-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2beb721328747-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2beb721328747-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2beb721328747-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2beb721328747-18\">18</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae1347eb2beb721328747-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2beb721328747-2\"><span class=\"crayon-cn\">507</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">fish</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2beb721328747-3\"><span class=\"crayon-cn\">508</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2beb721328747-4\"><span class=\"crayon-cn\">509</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">netctl </span><span class=\"crayon-e\">restart </span><span class=\"crayon-i\">wlp9s0sktab</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2beb721328747-5\"><span class=\"crayon-cn\">510</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ls</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2beb721328747-6\"><span class=\"crayon-cn\">511</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">pwd</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2beb721328747-7\"><span class=\"crayon-cn\">512</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">uname</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">r</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2beb721328747-8\"><span class=\"crayon-cn\">513</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">uname</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">a</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2beb721328747-9\"><span class=\"crayon-cn\">514</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">touch </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2beb721328747-10\"><span class=\"crayon-cn\">515</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">vi </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2beb721328747-11\"><span class=\"crayon-cn\">516</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Welcome to OSTechNix\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2beb721328747-12\"><span class=\"crayon-cn\">517</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">apcman</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">Syu</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2beb721328747-13\"><span class=\"crayon-cn\">518</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">pacman</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">Syu</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2beb721328747-14\"><span class=\"crayon-cn\">519</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">more </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2beb721328747-15\"><span class=\"crayon-cn\">520</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">wc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2beb721328747-16\"><span class=\"crayon-cn\">521</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">cat </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2beb721328747-17\"><span class=\"crayon-cn\">522</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">clear</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2beb721328747-18\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0023 seconds] -->\r\n<p><code>-r</code> 选项用于将输出反向排序。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae1347eb2bf5642595331\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ fc -lr\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2bf5642595331-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2bf5642595331-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae1347eb2bf5642595331-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">lr</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2bf5642595331-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p><code>-n</code> 选项用于隐藏行号。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae1347eb2bf9704449039\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ fc -ln\r\n nano ~/.profile\r\n source ~/.profile\r\n source ~/.profile\r\n fc -ln\r\n fc -l\r\n sudo netctl restart wlp9s0sktab\r\n ls -l\r\n pwd\r\n uname -r\r\n uname -a\r\n echo \"Welcome to OSTechNix\"\r\n sudo apcman -Syu\r\n cat ostechnix.txt\r\n wc -l ostechnix.txt\r\n more ostechnix.txt\r\n clear\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2bf9704449039-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2bf9704449039-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2bf9704449039-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2bf9704449039-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2bf9704449039-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2bf9704449039-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2bf9704449039-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2bf9704449039-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2bf9704449039-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2bf9704449039-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2bf9704449039-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2bf9704449039-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2bf9704449039-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2bf9704449039-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2bf9704449039-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2bf9704449039-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2bf9704449039-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2bf9704449039-18\">18</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae1347eb2bf9704449039-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">ln</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2bf9704449039-2\"><span class=\"crayon-e\"> </span><span class=\"crayon-v\">nano</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">/</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">profile</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2bf9704449039-3\"><span class=\"crayon-e\"> </span><span class=\"crayon-v\">source</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">/</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">profile</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2bf9704449039-4\"><span class=\"crayon-e\"> </span><span class=\"crayon-v\">source</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">/</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">profile</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2bf9704449039-5\"><span class=\"crayon-e\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">ln</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2bf9704449039-6\"><span class=\"crayon-e\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2bf9704449039-7\"><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">netctl </span><span class=\"crayon-e\">restart </span><span class=\"crayon-e\">wlp9s0sktab</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2bf9704449039-8\"><span class=\"crayon-e\"> </span><span class=\"crayon-v\">ls</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2bf9704449039-9\"><span class=\"crayon-h\"> </span><span class=\"crayon-e\">pwd</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2bf9704449039-10\"><span class=\"crayon-e\"> </span><span class=\"crayon-v\">uname</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">r</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2bf9704449039-11\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">uname</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">a</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2bf9704449039-12\"><span class=\"crayon-h\"> </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Welcome to OSTechNix\"</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2bf9704449039-13\"><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">apcman</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">Syu</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2bf9704449039-14\"><span class=\"crayon-e\"> </span><span class=\"crayon-e\">cat </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">txt</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2bf9704449039-15\"><span class=\"crayon-e\"> </span><span class=\"crayon-v\">wc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2bf9704449039-16\"><span class=\"crayon-e\"> </span><span class=\"crayon-e\">more </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">txt</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2bf9704449039-17\"><span class=\"crayon-e\"> </span><span class=\"crayon-i\">clear</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2bf9704449039-18\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0035 seconds] -->\r\n<p>这样行号就不再显示了。</p>\n<p>如果想以某个命令开始，只需在 <code>-l</code> 选项后面加上行号即可。比如，要显示行号 520 至最近的命令，可以这样：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae1347eb2bfd849902862\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ fc -l 520\r\n520 ls -l\r\n521 pwd\r\n522 uname -r\r\n523 uname -a\r\n524 echo \"Welcome to OSTechNix\"\r\n525 sudo apcman -Syu\r\n526 cat ostechnix.txt\r\n527 wc -l ostechnix.txt\r\n528 more ostechnix.txt\r\n529 clear\r\n530 fc -ln\r\n531 fc -l\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2bfd849902862-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2bfd849902862-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2bfd849902862-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2bfd849902862-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2bfd849902862-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2bfd849902862-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2bfd849902862-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2bfd849902862-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2bfd849902862-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2bfd849902862-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2bfd849902862-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2bfd849902862-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2bfd849902862-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2bfd849902862-14\">14</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae1347eb2bfd849902862-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">520</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2bfd849902862-2\"><span class=\"crayon-cn\">520</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ls</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2bfd849902862-3\"><span class=\"crayon-cn\">521</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">pwd</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2bfd849902862-4\"><span class=\"crayon-cn\">522</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">uname</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">r</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2bfd849902862-5\"><span class=\"crayon-cn\">523</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">uname</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">a</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2bfd849902862-6\"><span class=\"crayon-cn\">524</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Welcome to OSTechNix\"</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2bfd849902862-7\"><span class=\"crayon-cn\">525</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">apcman</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">Syu</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2bfd849902862-8\"><span class=\"crayon-cn\">526</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">cat </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2bfd849902862-9\"><span class=\"crayon-cn\">527</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">wc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2bfd849902862-10\"><span class=\"crayon-cn\">528</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">more </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2bfd849902862-11\"><span class=\"crayon-cn\">529</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">clear</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2bfd849902862-12\"><span class=\"crayon-cn\">530</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">ln</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2bfd849902862-13\"><span class=\"crayon-cn\">531</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2bfd849902862-14\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0019 seconds] -->\r\n<p>要列出一段范围内的命令，将始、末行号作为 <code>fc -l</code> 的参数即可，比如 520 至 525：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae1347eb2c01218517078\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ fc -l 520 525\r\n520 ls -l\r\n521 pwd\r\n522 uname -r\r\n523 uname -a\r\n524 echo \"Welcome to OSTechNix\"\r\n525 sudo apcman -Syu\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2c01218517078-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2c01218517078-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2c01218517078-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2c01218517078-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2c01218517078-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2c01218517078-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2c01218517078-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2c01218517078-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae1347eb2c01218517078-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">520</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">525</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2c01218517078-2\"><span class=\"crayon-cn\">520</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ls</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2c01218517078-3\"><span class=\"crayon-cn\">521</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">pwd</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2c01218517078-4\"><span class=\"crayon-cn\">522</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">uname</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">r</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2c01218517078-5\"><span class=\"crayon-cn\">523</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">uname</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">a</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2c01218517078-6\"><span class=\"crayon-cn\">524</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Welcome to OSTechNix\"</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2c01218517078-7\"><span class=\"crayon-cn\">525</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">apcman</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">Syu</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2c01218517078-8\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>除了使用行号，我们还可以使用字符。比如，要列出最近一个 <code>pwd</code> 至最近一个命令之间的所有命令，只需要像下面这样使用起始字母即可：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae1347eb2c04630761485\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ fc -l p\r\n521 pwd\r\n522 uname -r\r\n523 uname -a\r\n524 echo \"Welcome to OSTechNix\"\r\n525 sudo apcman -Syu\r\n526 cat ostechnix.txt\r\n527 wc -l ostechnix.txt\r\n528 more ostechnix.txt\r\n529 clear\r\n530 fc -ln\r\n531 fc -l\r\n532 fc -l 520\r\n533 fc -l 520 525\r\n534 fc -l 520\r\n535 fc -l 522\r\n536 fc -l l\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2c04630761485-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2c04630761485-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2c04630761485-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2c04630761485-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2c04630761485-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2c04630761485-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2c04630761485-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2c04630761485-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2c04630761485-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2c04630761485-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2c04630761485-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2c04630761485-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2c04630761485-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2c04630761485-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2c04630761485-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2c04630761485-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2c04630761485-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2c04630761485-18\">18</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae1347eb2c04630761485-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">p</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2c04630761485-2\"><span class=\"crayon-cn\">521</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">pwd</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2c04630761485-3\"><span class=\"crayon-cn\">522</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">uname</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">r</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2c04630761485-4\"><span class=\"crayon-cn\">523</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">uname</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">a</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2c04630761485-5\"><span class=\"crayon-cn\">524</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Welcome to OSTechNix\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2c04630761485-6\"><span class=\"crayon-cn\">525</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">apcman</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">Syu</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2c04630761485-7\"><span class=\"crayon-cn\">526</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">cat </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2c04630761485-8\"><span class=\"crayon-cn\">527</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">wc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2c04630761485-9\"><span class=\"crayon-cn\">528</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">more </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2c04630761485-10\"><span class=\"crayon-cn\">529</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">clear</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2c04630761485-11\"><span class=\"crayon-cn\">530</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">ln</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2c04630761485-12\"><span class=\"crayon-cn\">531</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2c04630761485-13\"><span class=\"crayon-cn\">532</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">520</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2c04630761485-14\"><span class=\"crayon-cn\">533</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">520</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">525</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2c04630761485-15\"><span class=\"crayon-cn\">534</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">520</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2c04630761485-16\"><span class=\"crayon-cn\">535</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">522</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2c04630761485-17\"><span class=\"crayon-cn\">536</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">l</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2c04630761485-18\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0026 seconds] -->\r\n<p>要列出所有 <code>pwd</code> 和 <code>more</code> 之间的命令，你可以都使用起始字母，像这样：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae1347eb2c09277083436\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ fc -l p m\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2c09277083436-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2c09277083436-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae1347eb2c09277083436-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">m</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2c09277083436-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>或者，使用开始命令的首字母以及结束命令的行号：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae1347eb2c0d301906020\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ fc -l p 528\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2c0d301906020-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2c0d301906020-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae1347eb2c0d301906020-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">528</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2c0d301906020-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>或者都使用行号：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae1347eb2c10346652491\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ fc -l 521 528\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2c10346652491-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2c10346652491-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae1347eb2c10346652491-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">521</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">528</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2c10346652491-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>这三个命令都显示一样的结果。</p>\n<h4 id=\"toc_3\">编辑并执行上一个命令</h4>\n<p>我们经常敲错命令，这时你可以用默认编辑器修正拼写错误并执行而不用将命令重新再敲一遍。</p>\n<p>编辑并执行上一个命令：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae1347eb2c13220557312\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ fc\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2c13220557312-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2c13220557312-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae1347eb2c13220557312-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">fc</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2c13220557312-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>这会在默认编辑器里载入上一个命令。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/ee5eae4873e4a4d9086aff61084b77b0.png\" alt=\"\"></p>\n<p>你可以看到，我上一个命令是 <code>fc -l</code>。你可以随意修改，它会在你保存退出编辑器时自动执行。这在命令或参数又长又复杂时很有用。需要注意的是，它同时也可能是<strong>毁灭性</strong>的。比如，如果你的上一个命令是危险的 <code>rm -fr &lt;some-path&gt;</code>，当它自动执行时你可能丢掉你的重要数据。所以，小心谨慎对待每一个命令。</p>\n<h4 id=\"toc_4\">更改默认编辑器</h4>\n<p>另一个有用的选项是 <code>-e</code> ，它可以用来为 <code>fc</code> 命令选择不同的编辑器。比如，如果我们想用 <code>nano</code> 来编辑上一个命令:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae1347eb2c17686620369\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ fc -e nano\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2c17686620369-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2c17686620369-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae1347eb2c17686620369-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">e</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">nano</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2c17686620369-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>这个命令会打开 <code>nano</code> 编辑器（而不是默认编辑器）编辑上一个命令。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/36c07793330d0f7269668ced5d0b30c8.png\" alt=\"\"></p>\n<p>如果你觉得用 <code>-e</code> 选项太麻烦，你可以修改你的默认编辑器，只需要将环境变量 <code>FCEDIT</code> 设为你想要让 <code>fc</code> 使用的编辑器名称即可。</p>\n<p>比如，要把 <code>nano</code> 设为默认编辑器，编辑你的 <code>~/.profile</code> 或其他初始化文件： （LCTT 译注：如果 <code>~/.profile</code> 不存在可自己创建；如果使用的是 bash ，可以编辑 <code>~/.bash_profile</code> ）</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae1347eb2c1b452009831\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ vi ~/.profile\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2c1b452009831-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2c1b452009831-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae1347eb2c1b452009831-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">vi</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">/</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">profile</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2c1b452009831-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>添加下面一行：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae1347eb2c1e532864723\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nFCEDIT=nano\r\n# LCTT译注：如果在子 shell 中会用到 fc ，最好在这里 export FCEDIT\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2c1e532864723-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2c1e532864723-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2c1e532864723-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae1347eb2c1e532864723-1\"><span class=\"crayon-v\">FCEDIT</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">nano</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2c1e532864723-2\"><span class=\"crayon-p\"># LCTT译注：如果在子 shell 中会用到 fc ，最好在这里 export FCEDIT</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2c1e532864723-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>你也可以使用编辑器的完整路径：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae1347eb2c21116771307\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nFCEDIT=/usr/local/bin/emacs\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2c21116771307-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2c21116771307-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae1347eb2c21116771307-1\"><span class=\"crayon-v\">FCEDIT</span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">emacs</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2c21116771307-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>输入 <code>:wq</code> 保存退出。要使改动立即生效，运行以下命令：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae1347eb2c25687700656\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ source ~/.profile\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2c25687700656-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2c25687700656-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae1347eb2c25687700656-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">source</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">/</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">profile</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2c25687700656-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>现在再输入 <code>fc</code> 就可以使用 <code>nano</code> 编辑器来编辑上一个命令了。</p>\n<h4 id=\"toc_5\">不编辑而直接执行上一个命令</h4>\n<p>我们现在知道 <code>fc</code> 命令不带任何参数的话会将上一个命令载入编辑器。但有时你可能不想编辑，仅仅是想再次执行上一个命令。这很简单，在末尾加上连字符（<code>-</code>）就可以了：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae1347eb2c28599773376\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ echo \"Welcome to OSTechNix\"\r\nWelcome to OSTechNix\r\n\r\n$ fc -e -\r\necho \"Welcome to OSTechNix\"\r\nWelcome to OSTechNix\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2c28599773376-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2c28599773376-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2c28599773376-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2c28599773376-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2c28599773376-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2c28599773376-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2c28599773376-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae1347eb2c28599773376-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Welcome to OSTechNix\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2c28599773376-2\"><span class=\"crayon-e\">Welcome </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">OSTechNix</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2c28599773376-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2c28599773376-4\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">e</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2c28599773376-5\"><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Welcome to OSTechNix\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2c28599773376-6\"><span class=\"crayon-e\">Welcome </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">OSTechNix</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2c28599773376-7\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>如你所见，<code>fc</code> 带了 <code>-e</code> 选项，但并没有编辑上一个命令（例中的 <code>echo \" Welcome to OSTechNix\"</code>）。</p>\n<p>需要注意的是，有些选项仅对指定 shell 有效。比如下面这些选项可以用在 zsh 中，但在 Bash 或 Ksh 中则不能用。</p>\n<h4 id=\"toc_6\">显示命令的执行时间</h4>\n<p>想要知道命令是在什么时候执行的，可以用 <code>-d</code> 选项：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae1347eb2c2d180578145\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfc -ld\r\n1 18:41 exit\r\n2 18:41 clear\r\n3 18:42 fc -l\r\n4 18:42 sudo netctl restart wlp9s0sktab\r\n5 18:42 ls -l\r\n6 18:42 pwd\r\n7 18:42 uname -r\r\n8 18:43 uname -a\r\n9 18:43 cat ostechnix.txt\r\n10 18:43 echo \"Welcome to OSTechNix\"\r\n11 18:43 more ostechnix.txt\r\n12 18:43 wc -l ostechnix.txt\r\n13 18:43 cat ostechnix.txt\r\n14 18:43 clear\r\n15 18:43 fc -l\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2c2d180578145-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2c2d180578145-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2c2d180578145-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2c2d180578145-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2c2d180578145-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2c2d180578145-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2c2d180578145-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2c2d180578145-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2c2d180578145-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2c2d180578145-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2c2d180578145-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2c2d180578145-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2c2d180578145-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2c2d180578145-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2c2d180578145-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2c2d180578145-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2c2d180578145-17\">17</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae1347eb2c2d180578145-1\"><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">ld</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2c2d180578145-2\"><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">41</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">exit</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2c2d180578145-3\"><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">41</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">clear</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2c2d180578145-4\"><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">42</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2c2d180578145-5\"><span class=\"crayon-cn\">4</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">42</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">netctl </span><span class=\"crayon-e\">restart </span><span class=\"crayon-i\">wlp9s0sktab</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2c2d180578145-6\"><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">42</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ls</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2c2d180578145-7\"><span class=\"crayon-cn\">6</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">42</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">pwd</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2c2d180578145-8\"><span class=\"crayon-cn\">7</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">42</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">uname</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">r</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2c2d180578145-9\"><span class=\"crayon-cn\">8</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">uname</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">a</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2c2d180578145-10\"><span class=\"crayon-cn\">9</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">cat </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2c2d180578145-11\"><span class=\"crayon-cn\">10</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Welcome to OSTechNix\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2c2d180578145-12\"><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">more </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2c2d180578145-13\"><span class=\"crayon-cn\">12</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">wc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2c2d180578145-14\"><span class=\"crayon-cn\">13</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">cat </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2c2d180578145-15\"><span class=\"crayon-cn\">14</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">clear</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2c2d180578145-16\"><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2c2d180578145-17\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0034 seconds] -->\r\n<p>这样你就可以查看最近命令的具体执行时间了。</p>\n<p>使用选项 <code>-f</code> ，可以为每个命令显示完整的时间戳。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae1347eb2c31604953104\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n fc -lf\r\n 1 4/5/2018 18:41 exit\r\n 2 4/5/2018 18:41 clear\r\n 3 4/5/2018 18:42 fc -l\r\n 4 4/5/2018 18:42 sudo netctl restart wlp9s0sktab\r\n 5 4/5/2018 18:42 ls -l\r\n 6 4/5/2018 18:42 pwd\r\n 7 4/5/2018 18:42 uname -r\r\n 8 4/5/2018 18:43 uname -a\r\n 9 4/5/2018 18:43 cat ostechnix.txt\r\n 10 4/5/2018 18:43 echo \"Welcome to OSTechNix\"\r\n 11 4/5/2018 18:43 more ostechnix.txt\r\n 12 4/5/2018 18:43 wc -l ostechnix.txt\r\n 13 4/5/2018 18:43 cat ostechnix.txt\r\n 14 4/5/2018 18:43 clear\r\n 15 4/5/2018 18:43 fc -l\r\n 16 4/5/2018 18:43 fc -ld\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2c31604953104-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2c31604953104-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2c31604953104-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2c31604953104-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2c31604953104-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2c31604953104-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2c31604953104-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2c31604953104-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2c31604953104-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2c31604953104-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2c31604953104-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2c31604953104-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2c31604953104-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2c31604953104-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2c31604953104-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2c31604953104-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2c31604953104-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2c31604953104-18\">18</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae1347eb2c31604953104-1\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">lf</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2c31604953104-2\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">5</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">41</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">exit</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2c31604953104-3\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">5</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">41</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">clear</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2c31604953104-4\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">5</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">42</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2c31604953104-5\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">5</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">42</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">netctl </span><span class=\"crayon-e\">restart </span><span class=\"crayon-i\">wlp9s0sktab</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2c31604953104-6\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">5</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">42</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ls</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2c31604953104-7\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">5</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">42</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">pwd</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2c31604953104-8\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">5</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">42</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">uname</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">r</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2c31604953104-9\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">5</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">uname</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">a</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2c31604953104-10\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">5</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">cat </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2c31604953104-11\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">5</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Welcome to OSTechNix\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2c31604953104-12\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">5</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">more </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2c31604953104-13\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">5</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">wc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2c31604953104-14\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">13</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">5</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">cat </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2c31604953104-15\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">14</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">5</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">clear</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2c31604953104-16\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">5</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2c31604953104-17\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">5</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">ld</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2c31604953104-18\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0056 seconds] -->\r\n<p>当然，欧洲的老乡们还可以使用 <code>-E</code> 选项来显示欧洲时间格式。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae1347eb2c35301848102\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n fc -lE\r\n 2 5.4.2018 18:41 clear\r\n 3 5.4.2018 18:42 fc -l\r\n 4 5.4.2018 18:42 sudo netctl restart wlp9s0sktab\r\n 5 5.4.2018 18:42 ls -l\r\n 6 5.4.2018 18:42 pwd\r\n 7 5.4.2018 18:42 uname -r\r\n 8 5.4.2018 18:43 uname -a\r\n 9 5.4.2018 18:43 cat ostechnix.txt\r\n 10 5.4.2018 18:43 echo \"Welcome to OSTechNix\"\r\n 11 5.4.2018 18:43 more ostechnix.txt\r\n 12 5.4.2018 18:43 wc -l ostechnix.txt\r\n 13 5.4.2018 18:43 cat ostechnix.txt\r\n 14 5.4.2018 18:43 clear\r\n 15 5.4.2018 18:43 fc -l\r\n 16 5.4.2018 18:43 fc -ld\r\n 17 5.4.2018 18:49 fc -lf\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2c35301848102-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2c35301848102-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2c35301848102-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2c35301848102-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2c35301848102-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2c35301848102-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2c35301848102-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2c35301848102-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2c35301848102-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2c35301848102-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2c35301848102-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2c35301848102-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2c35301848102-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2c35301848102-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2c35301848102-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2c35301848102-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2c35301848102-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2c35301848102-18\">18</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae1347eb2c35301848102-1\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">lE</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2c35301848102-2\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.4.2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">41</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">clear</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2c35301848102-3\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.4.2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">42</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2c35301848102-4\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.4.2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">42</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">netctl </span><span class=\"crayon-e\">restart </span><span class=\"crayon-i\">wlp9s0sktab</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2c35301848102-5\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.4.2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">42</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ls</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2c35301848102-6\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.4.2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">42</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">pwd</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2c35301848102-7\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.4.2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">42</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">uname</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">r</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2c35301848102-8\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.4.2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">uname</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">a</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2c35301848102-9\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.4.2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">cat </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2c35301848102-10\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.4.2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Welcome to OSTechNix\"</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2c35301848102-11\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.4.2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">more </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2c35301848102-12\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.4.2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">wc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2c35301848102-13\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">13</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.4.2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">cat </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2c35301848102-14\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">14</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.4.2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">clear</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2c35301848102-15\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.4.2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2c35301848102-16\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.4.2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">ld</span></div><div class=\"crayon-line\" id=\"crayon-5ae1347eb2c35301848102-17\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.4.2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">49</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">lf</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2c35301848102-18\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0045 seconds] -->\r\n<p></p>\n<h3 id=\"toc_7\">fc 用法总结</h3>\n<ul>\n<li>当不带任何参数时，<code>fc</code> 将上一个命令载入默认编辑器。</li>\n<li>当带一个数字作为参数时，<code>fc</code> 将数字指定的命令载入默认编辑器。</li>\n<li>当带一个字符作为参数时，<code>fc</code> 将最近一个以指定字符开头的命令载入默认编辑器。</li>\n<li>当有两个参数时，它们分别指定需要列出的命令范围的开始和结束。</li>\n</ul>\n<p>更多细节，请参考 man 手册。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae1347eb2c39117186461\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ man fc\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae1347eb2c39117186461-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1347eb2c39117186461-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae1347eb2c39117186461-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">man </span><span class=\"crayon-i\">fc</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1347eb2c39117186461-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>好了，今天就这些。希望这篇文章能帮助到你。更多精彩内容，敬请期待！</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113926\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113926votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113926\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"}
{"url_object_id": "c4047562c0b4ecb3f07bd8265ef26273", "title": "命令行乐趣：嘲讽输错 Bash 命令的用户", "create_date": "2018/04/13", "url": "http://blog.jobbole.com/113854/", "front_image_url": ["https://dn-linuxcn.qbox.me/data/attachment/album/201803/30/102653o0g177wl8dug2kw2.jpg"], "praise_nums": 1, "comment_nums": 1, "fav_nums": 0, "tags": "IT技术,Linux", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.cyberciti.biz/howto/insult-linux-unix-bash-user-when-typing-wrong-command/\">Vivek Gite</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9497-1.html\">Linux中国/ChenYi</a>   </div><p class=\"article_img\"><img src=\"https://dn-linuxcn.qbox.me/data/attachment/album/201803/30/102653o0g177wl8dug2kw2.jpg\"></p>\n<p>你可以通过配置 <code>sudo</code> 命令去嘲讽输入错误密码的用户。但是现在，当用户在 shell 输错命令时，也能嘲讽他了（滥用？）。</p>\n<h3 id=\"toc_1\">你好 bash-insulter</h3>\n<p>来自 Github 页面：</p>\n<blockquote><p>当用户键入错误命令，随机嘲讽。它使用了一个 bash4.x. 版本的全新内置错误处理函数，叫 <code>command_not_found_handle</code>。</p></blockquote>\n<h3 id=\"toc_2\">安装</h3>\n<p>键入下列 git 命令克隆一个仓库：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae1236babdf1347729677\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ngit clone https://github.com/hkbakke/bash-insulter.git bash-insulter</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae1236babdf1347729677-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae1236babdf1347729677-1\"><span class=\"crayon-e\">git </span><span class=\"crayon-r\">clone</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">https</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//github.com/hkbakke/bash-insulter.git bash-insulter</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>示例输出：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae1236babdfa192410823\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nCloning into 'bash-insulter'...\r\nremote: Counting objects: 52, done.\r\nremote: Compressing objects: 100% (49/49), done.\r\nremote: Total 52 (delta 12), reused 12 (delta 2), pack-reused 0\r\nUnpacking objects: 100% (52/52), done.</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae1236babdfa192410823-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1236babdfa192410823-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae1236babdfa192410823-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1236babdfa192410823-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ae1236babdfa192410823-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae1236babdfa192410823-1\"><span class=\"crayon-e\">Cloning </span><span class=\"crayon-i\">into</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'bash-insulter'</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1236babdfa192410823-2\"><span class=\"crayon-v\">remote</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Counting </span><span class=\"crayon-v\">objects</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">52</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">done</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5ae1236babdfa192410823-3\"><span class=\"crayon-v\">remote</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Compressing </span><span class=\"crayon-v\">objects</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">49</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">49</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">done</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1236babdfa192410823-4\"><span class=\"crayon-v\">remote</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Total</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">52</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">delta</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">reused</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">delta</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pack</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">reused</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line\" id=\"crayon-5ae1236babdfa192410823-5\"><span class=\"crayon-e\">Unpacking </span><span class=\"crayon-v\">objects</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">52</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">52</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">done</span><span class=\"crayon-sy\">.</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0019 seconds] -->\r\n<p>用文本编辑器，比如说使用 <code>vi</code>，编辑你的 <code>~/.bashrc</code> 或者 <code>/etc/bash.bashrc</code> 文件：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae1236babe05957411609\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ vi ~/.bashrc</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae1236babe05957411609-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae1236babe05957411609-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">vi</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">/</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">bashrc</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>在其后追加这一行（具体了解请查看 <a class=\"ext\" href=\"https://bash.cyberciti.biz/guide/If..else..fi\" target=\"_blank\" rel=\"external nofollow\">if..else..fi 声明</a><span class=\"sup\">[1]</span> 和 <a class=\"ext\" href=\"https://bash.cyberciti.biz/guide/Source_command\" target=\"_blank\" rel=\"external nofollow\">source 命令</a><span class=\"sup\">[2]</span>）：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae1236babe09443748099\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nif [ -f $HOME/bash-insulter/src/bash.command-not-found ]; then\r\n    source $HOME/bash-insulter/src/bash.command-not-found\r\nfi</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae1236babe09443748099-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1236babe09443748099-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae1236babe09443748099-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae1236babe09443748099-1\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">f</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">HOME</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bash</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">insulter</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">src</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bash</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">command</span><span class=\"crayon-o\">-</span><span class=\"crayon-st\">not</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">found</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">then</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1236babe09443748099-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-i\">source</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">HOME</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bash</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">insulter</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">src</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bash</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">command</span><span class=\"crayon-o\">-</span><span class=\"crayon-st\">not</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">found</span></div><div class=\"crayon-line\" id=\"crayon-5ae1236babe09443748099-3\"><span class=\"crayon-v\">fi</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p>保存并关闭文件。重新登录，如果不想退出账号也可以手动运行它：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae1236babe0c944972356\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ . $HOME/bash-insulter/src/bash.command-not-found</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae1236babe0c944972356-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae1236babe0c944972356-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">HOME</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bash</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">insulter</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">src</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bash</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">command</span><span class=\"crayon-o\">-</span><span class=\"crayon-st\">not</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">found</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p></p>\n<h3 id=\"toc_3\">如何使用它？</h3>\n<p>尝试键入一些无效命令：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae1236babe0f971590813\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ifconfigs\r\n$ dates</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae1236babe0f971590813-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1236babe0f971590813-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae1236babe0f971590813-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">ifconfigs</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1236babe0f971590813-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dates</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>示例输出:</p>\n<p style=\"text-align: center\"><a class=\"ext\" href=\"https://www.cyberciti.biz/media/new/cms/2017/11/bash-insulter-Insults-the-user-when-typing-wrong-command.jpg\" target=\"_blank\" rel=\"external nofollow\"><img class=\"aligncenter\" src=\"https://dn-linuxcn.qbox.me/data/attachment/album/201803/30/102702uazyc5tf7qmhcccy.jpg\" alt=\"一个有趣的 bash 钩子功能，嘲讽输入了错误命令的你。\"></a><span class=\"sup\"><em>一个有趣的 bash 钩子功能，嘲讽输入了错误命令的你。</em>[3]</span></p>\n<h3 id=\"toc_4\">自定义</h3>\n<p>你需要编辑 <code>$HOME/bash-insulter/src/bash.command-not-found</code>：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae1236babe13112972173\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ vi $HOME/bash-insulter/src/bash.command-not-found</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae1236babe13112972173-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae1236babe13112972173-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">vi</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">HOME</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bash</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">insulter</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">src</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bash</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">command</span><span class=\"crayon-o\">-</span><span class=\"crayon-st\">not</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">found</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>示例代码：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae1236babe16253886353\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ncommand_not_found_handle () {\r\n    local INSULTS=(\r\n        \"Boooo!\"\r\n        \"Don't you know anything?\"\r\n        \"RTFM!\"\r\n        \"Hahaha, n00b!\"\r\n        \"Wow! That was impressively wrong!\"\r\n        \"What are you doing??\"\r\n        \"Pathetic\"\r\n        \"...and this is the best you can do??\"\r\n        \"The worst one today!\"\r\n        \"n00b alert!\"\r\n        \"Your application for reduced salary has been sent!\"\r\n        \"lol\"\r\n        \"u suk\"\r\n        \"lol... plz\"\r\n        \"plz uninstall\"\r\n        \"And the Darwin Award goes to.... ${USER}!\"\r\n        \"ERROR_INCOMPETENT_USER\"\r\n        \"Incompetence is also competence\"\r\n        \"Bad.\"\r\n        \"Fake it till you make it!\"\r\n        \"What is this...? Amateur hour!?\"\r\n        \"Come on! You can do it!\"\r\n        \"Nice try.\"\r\n        \"What if... you type an actual command the next time!\"\r\n        \"What if I told you... it is possible to type valid commands.\"\r\n        \"Y u no speak computer???\"\r\n        \"This is not Windows\"\r\n        \"Perhaps you should leave the command line alone...\"\r\n        \"Please step away from the keyboard!\"\r\n        \"error code: 1D10T\"\r\n        \"ACHTUNG! ALLES TURISTEN UND NONTEKNISCHEN LOOKENPEEPERS! DAS KOMPUTERMASCHINE IST NICHT FÜR DER GEFINGERPOKEN UND MITTENGRABEN! ODERWISE IST EASY TO SCHNAPPEN DER SPRINGENWERK, BLOWENFUSEN UND POPPENCORKEN MIT SPITZENSPARKEN. IST NICHT FÜR GEWERKEN BEI DUMMKOPFEN. DER RUBBERNECKEN SIGHTSEEREN KEEPEN DAS COTTONPICKEN HÄNDER IN DAS POCKETS MUSS. ZO RELAXEN UND WATSCHEN DER BLINKENLICHTEN.\"\r\n        \"Pro tip: type a valid command!\"\r\n    )\r\n\r\n    # 设置“随机”种子发生器 \r\n    RANDOM=$(date +%s%N)\r\n    VALUE=$((${RANDOM}%2))\r\n\r\n    if [[ ${VALUE} -lt 1 ]]; then\r\n        printf \"\\n  $(tput bold)$(tput setaf 1)$(shuf -n 1 -e \"${INSULTS[@]}\")$(tput sgr0)\\n\\n\"\r\n    fi\r\n\r\n    echo \"-bash: $1: command not found\"\r\n\r\n    # 无效命令，常规返回已存在的代码\r\n    return 127\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae1236babe16253886353-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1236babe16253886353-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae1236babe16253886353-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1236babe16253886353-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ae1236babe16253886353-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1236babe16253886353-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ae1236babe16253886353-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1236babe16253886353-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ae1236babe16253886353-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1236babe16253886353-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ae1236babe16253886353-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1236babe16253886353-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ae1236babe16253886353-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1236babe16253886353-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5ae1236babe16253886353-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1236babe16253886353-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5ae1236babe16253886353-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1236babe16253886353-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5ae1236babe16253886353-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1236babe16253886353-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5ae1236babe16253886353-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1236babe16253886353-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5ae1236babe16253886353-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1236babe16253886353-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5ae1236babe16253886353-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1236babe16253886353-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5ae1236babe16253886353-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1236babe16253886353-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5ae1236babe16253886353-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1236babe16253886353-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5ae1236babe16253886353-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1236babe16253886353-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5ae1236babe16253886353-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1236babe16253886353-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5ae1236babe16253886353-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1236babe16253886353-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5ae1236babe16253886353-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1236babe16253886353-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5ae1236babe16253886353-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1236babe16253886353-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5ae1236babe16253886353-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1236babe16253886353-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5ae1236babe16253886353-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1236babe16253886353-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5ae1236babe16253886353-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1236babe16253886353-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5ae1236babe16253886353-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1236babe16253886353-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5ae1236babe16253886353-49\">49</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae1236babe16253886353-1\"><span class=\"crayon-e\">command_not_found_handle</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1236babe16253886353-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">local </span><span class=\"crayon-v\">INSULTS</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line\" id=\"crayon-5ae1236babe16253886353-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"Boooo!\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1236babe16253886353-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"Don't you know anything?\"</span></div><div class=\"crayon-line\" id=\"crayon-5ae1236babe16253886353-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"RTFM!\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1236babe16253886353-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"Hahaha, n00b!\"</span></div><div class=\"crayon-line\" id=\"crayon-5ae1236babe16253886353-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"Wow! That was impressively wrong!\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1236babe16253886353-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"What are you doing??\"</span></div><div class=\"crayon-line\" id=\"crayon-5ae1236babe16253886353-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"Pathetic\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1236babe16253886353-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"...and this is the best you can do??\"</span></div><div class=\"crayon-line\" id=\"crayon-5ae1236babe16253886353-11\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"The worst one today!\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1236babe16253886353-12\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"n00b alert!\"</span></div><div class=\"crayon-line\" id=\"crayon-5ae1236babe16253886353-13\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"Your application for reduced salary has been sent!\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1236babe16253886353-14\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"lol\"</span></div><div class=\"crayon-line\" id=\"crayon-5ae1236babe16253886353-15\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"u suk\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1236babe16253886353-16\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"lol... plz\"</span></div><div class=\"crayon-line\" id=\"crayon-5ae1236babe16253886353-17\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"plz uninstall\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1236babe16253886353-18\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"And the Darwin Award goes to.... ${USER}!\"</span></div><div class=\"crayon-line\" id=\"crayon-5ae1236babe16253886353-19\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"ERROR_INCOMPETENT_USER\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1236babe16253886353-20\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"Incompetence is also competence\"</span></div><div class=\"crayon-line\" id=\"crayon-5ae1236babe16253886353-21\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"Bad.\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1236babe16253886353-22\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"Fake it till you make it!\"</span></div><div class=\"crayon-line\" id=\"crayon-5ae1236babe16253886353-23\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"What is this...? Amateur hour!?\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1236babe16253886353-24\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"Come on! You can do it!\"</span></div><div class=\"crayon-line\" id=\"crayon-5ae1236babe16253886353-25\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"Nice try.\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1236babe16253886353-26\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"What if... you type an actual command the next time!\"</span></div><div class=\"crayon-line\" id=\"crayon-5ae1236babe16253886353-27\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"What if I told you... it is possible to type valid commands.\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1236babe16253886353-28\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"Y u no speak computer???\"</span></div><div class=\"crayon-line\" id=\"crayon-5ae1236babe16253886353-29\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"This is not Windows\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1236babe16253886353-30\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"Perhaps you should leave the command line alone...\"</span></div><div class=\"crayon-line\" id=\"crayon-5ae1236babe16253886353-31\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"Please step away from the keyboard!\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1236babe16253886353-32\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"error code: 1D10T\"</span></div><div class=\"crayon-line\" id=\"crayon-5ae1236babe16253886353-33\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"ACHTUNG! ALLES TURISTEN UND NONTEKNISCHEN LOOKENPEEPERS! DAS KOMPUTERMASCHINE IST NICHT FÜR DER GEFINGERPOKEN UND MITTENGRABEN! ODERWISE IST EASY TO SCHNAPPEN DER SPRINGENWERK, BLOWENFUSEN UND POPPENCORKEN MIT SPITZENSPARKEN. IST NICHT FÜR GEWERKEN BEI DUMMKOPFEN. DER RUBBERNECKEN SIGHTSEEREN KEEPEN DAS COTTONPICKEN HÄNDER IN DAS POCKETS MUSS. ZO RELAXEN UND WATSCHEN DER BLINKENLICHTEN.\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1236babe16253886353-34\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"Pro tip: type a valid command!\"</span></div><div class=\"crayon-line\" id=\"crayon-5ae1236babe16253886353-35\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1236babe16253886353-36\"> </div><div class=\"crayon-line\" id=\"crayon-5ae1236babe16253886353-37\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\"># 设置“随机”种子发生器 </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1236babe16253886353-38\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">RANDOM</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">date</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">s</span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">N</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5ae1236babe16253886353-39\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">VALUE</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">RANDOM</span><span class=\"crayon-sy\">}</span><span class=\"crayon-o\">%</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1236babe16253886353-40\"> </div><div class=\"crayon-line\" id=\"crayon-5ae1236babe16253886353-41\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">VALUE</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">lt</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">then</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1236babe16253886353-42\"><span class=\"crayon-h\">        </span><span class=\"crayon-i\">printf</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\\n  $(tput bold)$(tput setaf 1)$(shuf -n 1 -e \"</span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">INSULTS</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">@</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">}</span><span class=\"crayon-s\">\")$(tput sgr0)\\n\\n\"</span></div><div class=\"crayon-line\" id=\"crayon-5ae1236babe16253886353-43\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">fi</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1236babe16253886353-44\"> </div><div class=\"crayon-line\" id=\"crayon-5ae1236babe16253886353-45\"><span class=\"crayon-e\">    </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"-bash: $1: command not found\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1236babe16253886353-46\"> </div><div class=\"crayon-line\" id=\"crayon-5ae1236babe16253886353-47\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\"># 无效命令，常规返回已存在的代码</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1236babe16253886353-48\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">127</span></div><div class=\"crayon-line\" id=\"crayon-5ae1236babe16253886353-49\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0037 seconds] -->\r\n<p></p>\n<h3 id=\"toc_5\">赠品：sudo 嘲讽</h3>\n<p>编辑 <code>sudoers</code> 文件：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae1236babe1a576733781\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo visudo</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae1236babe1a576733781-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae1236babe1a576733781-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">visudo</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>追加下面这一行：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae1236babe1d332901935\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nDefaults insults</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae1236babe1d332901935-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae1236babe1d332901935-1\"><span class=\"crayon-e\">Defaults </span><span class=\"crayon-v\">insults</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>或者像下面尾行增加一句嘲讽语：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae1236babe20761077906\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nDefaults !lecture,tty_tickets,!fqdn,insults</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae1236babe20761077906-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae1236babe20761077906-1\"><span class=\"crayon-v\">Defaults</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!</span><span class=\"crayon-v\">lecture</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">tty_tickets</span><span class=\"crayon-sy\">,</span><span class=\"crayon-o\">!</span><span class=\"crayon-v\">fqdn</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">insults</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>这是我的文件：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae1236babe23046437885\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-mixed-highlight\" title=\"含多种语言\"></span><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nDefaults    env_reset\r\nDefaults    mail_badpass\r\nDefaults    secure_path = \"/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin\"\r\n## If set, sudo will insult users when they enter an incorrect password. ##\r\nDefaults    insults\r\n\r\n# Host alias specification\r\n\r\n# User alias specification\r\n\r\n# Cmnd alias specification\r\n\r\n# User privilege specification\r\nroot ALL = (ALL:ALL) ALL\r\n\r\n# Members of the admin group may gain root privileges\r\n% admin ALL = (ALL) ALL   \r\n\r\n# Allow members of group sudo to execute any command\r\n% sudo ALL = (ALL:ALL) ALL   \r\n\r\n# See sudoers(5) for more information on \"#include\" directives:\r\n\r\n#includedir /etc/sudoers.d</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae1236babe23046437885-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1236babe23046437885-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae1236babe23046437885-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1236babe23046437885-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ae1236babe23046437885-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1236babe23046437885-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ae1236babe23046437885-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1236babe23046437885-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ae1236babe23046437885-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1236babe23046437885-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ae1236babe23046437885-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1236babe23046437885-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ae1236babe23046437885-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1236babe23046437885-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5ae1236babe23046437885-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1236babe23046437885-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5ae1236babe23046437885-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1236babe23046437885-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5ae1236babe23046437885-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1236babe23046437885-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5ae1236babe23046437885-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1236babe23046437885-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5ae1236babe23046437885-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1236babe23046437885-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5ae1236babe23046437885-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1236babe23046437885-26\">26</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae1236babe23046437885-1\"><span class=\"crayon-e\">Defaults    </span><span class=\"crayon-e\">env_reset</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1236babe23046437885-2\"><span class=\"crayon-e\">Defaults    </span><span class=\"crayon-e\">mail_badpass</span></div><div class=\"crayon-line\" id=\"crayon-5ae1236babe23046437885-3\"><span class=\"crayon-e\">Defaults    </span><span class=\"crayon-v\">secure_path</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1236babe23046437885-4\"><span class=\"crayon-p\">## If set, sudo will insult users when they enter an incorrect password. ##</span></div><div class=\"crayon-line\" id=\"crayon-5ae1236babe23046437885-5\"><span class=\"crayon-e\">Defaults    </span><span class=\"crayon-v\">insults</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1236babe23046437885-6\"> </div><div class=\"crayon-line\" id=\"crayon-5ae1236babe23046437885-7\"><span class=\"crayon-p\"># Host alias specification</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1236babe23046437885-8\"> </div><div class=\"crayon-line\" id=\"crayon-5ae1236babe23046437885-9\"><span class=\"crayon-p\"># User alias specification</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1236babe23046437885-10\"> </div><div class=\"crayon-line\" id=\"crayon-5ae1236babe23046437885-11\"><span class=\"crayon-p\"># Cmnd alias specification</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1236babe23046437885-12\"> </div><div class=\"crayon-line\" id=\"crayon-5ae1236babe23046437885-13\"><span class=\"crayon-p\"># User privilege specification</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1236babe23046437885-14\"><span class=\"crayon-e\">root </span><span class=\"crayon-v\">ALL</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ALL</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">ALL</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ALL</span></div><div class=\"crayon-line\" id=\"crayon-5ae1236babe23046437885-15\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1236babe23046437885-16\"><span class=\"crayon-p\"># Members of the admin group may gain root privileges</span></div><div class=\"crayon-line\" id=\"crayon-5ae1236babe23046437885-17\"><span class=\"crayon-ta\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">admin</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ALL</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ALL</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">ALL</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1236babe23046437885-18\"> </div><div class=\"crayon-line\" id=\"crayon-5ae1236babe23046437885-19\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1236babe23046437885-20\"><span class=\"crayon-p\"># Allow members of group sudo to execute any command</span></div><div class=\"crayon-line\" id=\"crayon-5ae1236babe23046437885-21\"><span class=\"crayon-ta\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">sudo</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ALL</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ALL</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">ALL</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">ALL</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1236babe23046437885-22\"> </div><div class=\"crayon-line\" id=\"crayon-5ae1236babe23046437885-23\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1236babe23046437885-24\"><span class=\"crayon-p\"># See sudoers(5) for more information on \"#include\" directives:</span></div><div class=\"crayon-line\" id=\"crayon-5ae1236babe23046437885-25\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1236babe23046437885-26\"><span class=\"crayon-p\">#includedir /etc/sudoers.d</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0044 seconds] -->\r\n<p>试一试：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae1236babe27011943580\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo -k # 清除缓存，从头开始\r\n$ sudo ls /root/\r\n$ sudo -i</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae1236babe27011943580-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1236babe27011943580-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae1236babe27011943580-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae1236babe27011943580-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sudo</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">k</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\"># 清除缓存，从头开始</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1236babe27011943580-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">ls</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">root</span><span class=\"crayon-o\">/</span></div><div class=\"crayon-line\" id=\"crayon-5ae1236babe27011943580-3\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sudo</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">i</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>样例对话：</p>\n<p style=\"text-align: center\"><a class=\"ext\" href=\"https://www.cyberciti.biz/media/new/cms/2017/11/sudo-insults.jpg\" target=\"_blank\" rel=\"external nofollow\"><img class=\"aligncenter\" src=\"https://dn-linuxcn.qbox.me/data/attachment/album/201803/30/102702kp19pqb2egl8hlw2.jpg\" alt=\"当输入错误密码时，你会被一个有趣的的 sudo 嘲讽语戏弄。\"></a><span class=\"sup\"><em>当输入错误密码时，你会被一个有趣的的 sudo 嘲讽语戏弄。</em>[4]</span></p>\n<h3 id=\"toc_6\">赠品：你好 sl</h3>\n<p><a class=\"ext\" href=\"https://www.cyberciti.biz/tips/displays-animations-when-accidentally-you-type-sl-instead-of-ls.html\" target=\"_blank\" rel=\"external nofollow\">sl 或是 UNIX 经典捣蛋软件</a><span class=\"sup\">[5]</span> 游戏。当你错误的把 <code>ls</code> 输入成 <code>sl</code>，将会有一辆蒸汽机车穿过你的屏幕。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae1236babe2b009724555\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sl</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae1236babe2b009724555-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae1236babe2b009724555-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sl</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p></p>\n<p style=\"text-align: center\"><a class=\"ext\" href=\"https://www.cyberciti.biz/tips/displays-animations-when-accidentally-you-type-sl-instead-of-ls.html\" target=\"_blank\" rel=\"external nofollow\"><img class=\"aligncenter\" src=\"https://dn-linuxcn.qbox.me/data/attachment/album/201803/30/102703s739gw183ll5454a.png\" alt=\"Linux / UNIX 桌面乐趣: 蒸汽机车\"></a><span class=\"sup\"><em>Linux / UNIX 桌面乐趣: 蒸汽机车</em>[6]</span></p>\n<p style=\"text-align: left\">[1]: https://bash.cyberciti.biz/guide/If..else..fi<br>\n[2]: https://bash.cyberciti.biz/guide/Source_command<br>\n[3]: https://www.cyberciti.biz/media/new/cms/2017/11/bash-insulter-Insults-the-user-when-typing-wrong-command.jpg<br>\n[4]: https://www.cyberciti.biz/media/new/cms/2017/11/sudo-insults.jpg<br>\n[5]: https://www.cyberciti.biz/tips/displays-animations-when-accidentally-you-type-sl-instead-of-ls.html<br>\n[6]: https://www.cyberciti.biz/tips/displays-animations-when-accidentally-you-type-sl-instead-of-ls.html<br>\n[7]: https://www.cyberciti.biz<br>\n[8]: https://github.com/CYLeft<br>\n[9]: https://github.com/wxy<br>\n[10]: https://github.com/LCTT/TranslateProject<br>\n[11]: https://linux.cn/article-9497-1.html?pr</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113854\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113854votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113854\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"}
{"url_object_id": "8e61db3f3bf1d94bc3a13d55899bc864", "title": "工程师如何在工作中提升自己?", "create_date": "2018/04/17", "url": "http://blog.jobbole.com/113896/", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2014/08/f969ef7109b8aec9d66834db8eac2ca5.jpg"], "praise_nums": 2, "comment_nums": 0, "fav_nums": 2, "tags": "All,IT技术,互联网", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://tech.meituan.com/study_vs_work.html\">meituan</a>   </div><h1 id=\"-\">引言</h1>\n<p>古人云：“活到老，学到老。”互联网算是最辛苦的行业之一，“加班”对工程师来说已是“家常便饭”，同时互联网技术又日新月异，很多工程师都疲于应付，叫苦不堪。以至于长期以来流传一个很广的误解：35岁是程序员工作的终点。</p>\n<p>如何在繁忙的工作中做好技术积累，构建个人核心竞争力，相信是很多工程师同行都在思考的问题。本文是我自己的一些总结，试图从三个方面来解答：</p>\n<ul>\n<li>第一部分阐述了一些学习的原则。任何时候，遵循一些经过检验的原则，都是影响效率的重要因素，正确的方法是成功的秘诀。提升工作和学习效率的另一个重要因素是释惑和良好心态。</li>\n<li>第二部分分析了我在工作中碰到和看到的一些典型困惑。</li>\n<li>成为优秀的架构师是大部分初中级工程师的阶段性目标。第三部分剖析架构师的能力模型，让大家对目标所需能力有一个比较清晰的认知。</li>\n</ul>\n<h1 id=\"-\">如何学习</h1>\n<p>在繁忙的工作中，持之以恒、不断学习和进步是一件艰巨的任务，需要坚强的毅力和坚定的决心。如果方法不得当，更是事倍功半。幸好我们的古人和现在哲人已经总结了很多优秀的学习方法论，这里汇总了一些重要原则。遵循这些方法必会对大家的工作学习大有裨益。</p>\n<h2 id=\"-\">贵在坚持</h2>\n<p>有报道指出，过去几十年的知识量超过之前人类几千年的知识量总和。而计算机领域绝对是当代知识更新最快的领域之一，因此，工程师必须要接受这样一个现实，现在所掌握的深厚知识体系很快就会被淘汰。要想在计算机领域持续做优秀架构师，就必须不停的学习，掌握最新技术。总之，学不可以已。</p>\n<p>所谓“冰冻三尺，非一日之寒，水滴石穿，非一日之功”，通往架构师的道路漫长而又艰巨，轻易放弃，则所有付出瞬间付之东流。要想成为优秀的架构师，贵在坚持！</p>\n<p>虽然知识更新很快，但是基础理论的变化却非常缓慢。这就是“道”和“象”关系，纵是世间万象，道却万变不离其宗。对于那些非常基础的理论知识，我们需要经常复习，也就是“学而时习之”。</p>\n<h2 id=\"-\">重视实践</h2>\n<p>古人云：“纸上得来终觉浅，绝知此事要躬行。” 学习领域有所谓721模型：个人的成长70%来自于岗位实践，20%来自向他人学习，10%来自于培训。虽然这种理论存在争议，但对于工程师们来说，按照实践、学习和培训的方式进行重要性排序，大致是不错的。所以重视实践，在实践中成长是最重要的学习原则。</p>\n<p>人类的认知有两种：感性认知和理性认知。这两种认知互相不可替代性。实践很大程度来自于感性学习，看书更像是理性学习。以学开汽车做例子，很难想象什么人能够仅仅通过学习书本知识就会开汽车。</p>\n<p>书本知识主要是传道——讲述抽象原型，而对其具体应用场景的讲述往往含糊其辞，对抽象原型之间的关系也是浅尝辄止。采用同样精确的语言去描述应用场景和关联关系将会失去重点，让人摸不着头脑。所以，仅仅通过看书来获得成长就像是用一条腿走路。</p>\n<p>重视实践，充分运用感性认知潜能，在项目中磨炼自己，才是正确的学习之道。在实践中，在某些关键动作上刻意练习，也会取得事半功倍的效果。</p>\n<h2 id=\"-\">重视交流</h2>\n<p>牛顿说：“如果说我看得比别人远一些，那是因为我站在巨人的肩膀上。”我们需要从别人身上学习。从老师、领导、同事、下属甚至对手身上学习，是快速成长的重要手段。</p>\n<p>向老师和领导学习已经是人们生活习惯的一部分了。但是从同事甚至对手那里学习也很重要，因为这些人和我们自身更相似。所以要多多观察，取其所长，弃其所短。对于团队的小兄弟和下属，也要“不耻下问”。</p>\n<p>此外，在项目中积极参与具体方案讨论也非常重要。参与者先验感知了相关背景，并且讨论的观点和建议也是综合了发言者多种知识和技能。所以，讨论让参与者能够非常全面，立体地理解书本知识。同时，和高手讨论，他们的观点就会像修剪机剪树枝一样，快速的剪掉自己知识领域里面的疑惑点。</p>\n<h2 id=\"-\">重视总结和输出</h2>\n<p>工程师在实践中会掌握大量细节，但是，即使掌握了所有细节，却没有深刻的总结和思考，也会陷入到“学而不思则罔”的境地。成长的“量变”来自于对细节的逐渐深入地把控，而真正的“质变”来自于对“道”的更深层次的理解。</p>\n<p>将经验输出，接受别人的检验是高层次的总结。这种输出不仅帮助了别人，对自身更是大有裨益。总结的方式有很多，包括组织分享，撰写技术文章等等。当然“日三省吾身”也是不错的总结方式。总之，多多总结，多多分享，善莫大焉！</p>\n<p>解答别人的问题也是个人成长的重要手段。有时候，某个问题自己本来不太懂，但是在给别人讲解的时候却豁然开朗。所以，“诲人不倦”利人惠己。</p>\n<h2 id=\"-\">重视规划</h2>\n<p>凡事预则立，不预则废。对于漫长的学习生涯而言，好的计划是成功的一半。</p>\n<h3 id=\"-\">长期规划</h3>\n<p>长期规划的实施需要毅力和决心，但是做正确的长期规划还需要高瞻远瞩的眼界、超级敏感的神经和中大奖的运气。对于大部分人来说，长期规划定主要是“定方向”。但遵循如下原则能够减少犯方向性错误的概率：</p>\n<ul>\n<li>远离日暮西山的行业。</li>\n<li>做自己感兴趣的事情。</li>\n<li>做有积累的事情。</li>\n<li>一边走一边看，切勿一条道走到黑。</li>\n</ul>\n<h3 id=\"-\">短期规划</h3>\n<p>良好的短期规划应该在生活、成长、绩效和晋升之间取得平衡。大部分公司都会制定一个考核周期——少则一个月，多则一年。所以不妨以考核周期作为短期学习规划周期。本质上，规划是一个多目标优化问题，它有一系列的理论方案，这里不一一细说。基于相关理论，我给出一个简单易行的方案：</p>\n<ul>\n<li>确定目标优先级。比如：成长、生活、绩效。</li>\n<li>确定每个目标的下限。从优化理论的角度来看，这被称为约束。比如绩效必须在一般以上，之前已经规划好的旅行不能更改，必须读完《Effective Java》等等。</li>\n<li>优先为下限目标分配足够的资源。比如，事先规划好的旅行需要10天，这10天就必须预算出去。</li>\n<li>按照各主目标的顺序依次分配资源。比如，最终分配给学习的时间是10天。</li>\n<li>在给定的学习预算下，制定学习目标，要激进。然后给出执行方案。比如，学习目标是掌握基本的统计学知识，并成为Java专家。具体方案为：完成《Effective Java》、《Java Performance》、《Design Pattern》、《Head First Statistics》四本书的阅读。</li>\n<li>对规划中的各学习任务按目标优先级进行排序，并最先启动优先级最高的任务。比如，最高优先级是掌握统计理论，那么就要先看《Head First Statistics》。</li>\n</ul>\n<p>对于该方案，要注意以下几点：</p>\n<ul>\n<li>最低目标必须能够轻松达成的目标，否则，从优化理论的角度来讲，该命题无解。比如，类似“半年内完成晋级两次、绩效全部S、从菜鸟成为Java专家”就不太合适作为最低目标。总之，要区分理想和梦想。</li>\n<li>主要目标规划必须具备一定的挑战性，需要规划出不可能完成的目标。过度规划本质上是一种贪婪算法，目的是目标价值最大化。因为一切皆有变数，如果其他目标能够提前完成，就不妨利用这些时间去完成更多的学习目标。总之，前途必须光明，道路必须坎坷。</li>\n<li>各目标之间不一定共享资源，规划不一定互有冲突。</li>\n</ul>\n<p>此外，短期规划还可以从如下几个方面进行优化：</p>\n<ul>\n<li>学习计划最好能结合工作计划，理论联系实际结合，快速学以致用。比如，本季度规划去做一些数据分析工作，那么不妨把学习目标设置为学习统计知识。</li>\n<li>要灵活对待规划的目标和具体执行步骤，需要避免“郑人买履”式的笑话。面临新的挑战和变化，规划需要不断地调整。</li>\n</ul>\n<h1 id=\"-\">那些令人纠结的困惑</h1>\n<p>人生是一场马拉松，在漫长的征途中，难免有很多困惑。困惑就像枷锁，使我们步履蹒跚，困惑就像死锁，让我们停滞不前。</p>\n<p>接下来我将总结自己在工作中碰到和看到的一些典型困惑。这些困惑或者长期困扰作者本人，或者困扰我身边的同事和朋友。当这些困惑被释然之后，大家都感觉如重获释，为下一阶段的征程提供满满的正能量。人生就像一场旅途，不必在乎目的地，在乎的，应该是沿途的风景，以及看风景的心情。良好的心态是技术之旅最好的伴侣。期望通过这个解惑之旅，让大家拥有一个愉快的心情去感受漫长的学习旅途。</p>\n<h2 id=\"-\">学无止境吗</h2>\n<p>必须要承认一个残酷的现实：人的生命是有限的，知识却是无限的。用有限的生命去学习无限的知识是不可能完成的任务。一想到此，有些工程师不免产生一些悲观情绪。如果方法得当并且足够勤奋，悲伤大可不必。</p>\n<p>虽然，人类的整体知识体系一直在扩张。但是就很多重要的工程细分领域，基础理论并不高深。计算机的很多重要领域，工程师有能力在有限时间内抓住核心要害。</p>\n<p>比如，密码学被认为是门非常高深的学科，但是一大类密码技术的基础是数论中一个非常简单的理论——素因数分解：给出两个素数，很容易算出它们的积，然而反过来给定两个素数的积，分解的计算量却非常惊人。</p>\n<p>“一致性”算得上是计算机领域里面最经典的难题，它是所有分布式系统的基础，从多核多CPU到多线程，从跨机器到跨机房，无所不在，几乎所有的计算机从业人员都在解决这个问题，但是Paxos给出了一个很优雅的解决方案。</p>\n<p>权限管理是很多工程师的噩梦，但如果你能搞定“Attribute Based Access Control(ABAC)”和“Role-Based Access Control(RBAC)”，也能达到相当高度。</p>\n<p>另外，技术学习是一场对抗赛，虽然学无止境，超越大部分对手就是一种胜利。所以，以正确的学习方式，长时间投入就会形成核心竞争力。</p>\n<h2 id=\"-\">没有绝对高明的技术，只有真正的高手</h2>\n<p>致力于在技术上有所成就的工程师，都梦想有朝一日成为技术高手。但技术高手的标准却存在很大的争议。这是一个有着悠久历史的误解：以某种技术的掌握作为技术高手的评判标准。我经常碰到这样一些情景：因为掌握了某些技术，比如Spring、Kafka、Elasticsearch等，一些工程师就自封为高手。有些工程师非常仰慕别的团队，原因竟是那个团队使用了某种技术。</p>\n<p>这种误解的产生有几个原因：首先，技多不压身，技术自然是掌握的越多越好，掌握很多技术的人自然不是菜鸟。其次，在互联网时代来临之前，信息获取是非常昂贵的事情。这就导致一项技能的掌握可以给个人甚至整个公司带来优势地位。互联网时代，各种框架的出现以及开源的普及快速淘汰或者降低了很多技能的价值，同时降低了很多技术的学习门槛。所以，在当前，掌握某项技能知识只能是一个短期目标。怀揣某些技能就沾沾自喜的人需要记住：骄傲使人退步。</p>\n<p>所谓麻雀虽小，五脏俱全。如果让你来做造物主，设计麻雀和设计大象的复杂度并没有明显区别。一个看起来很小的业务需求，为了达到极致，所需要的技术和能力是非常综合和高深的。真正的高手不是拿着所掌握的技术去卡客户需求，而是倾听客户的需求，给出精益求精的方案。完成客户的需求是一场擂台赛，真正的高手，是会见招拆招的。</p>\n<h2 id=\"-\">不做项目就无法成长吗</h2>\n<p>在项目中学习是最快的成长方式之一，很多工程师非常享受这个过程。但是一年到头都做项目，你可能是在一家外包公司。对于一个做产品的公司，如果年头到年尾都在做项目，要不然就是在初步创业阶段，要不然就是做了大量失败的项目，总之不算是特别理想的状态。正常情况，在项目之间都会有一些非项目时间。在这段时间，有些同学会产生迷茫，成长很慢。</p>\n<p>项目真的是越多越好吗？答案显然是否定的。重复的项目不会给工程师们带来新的成长。不停的做项目，从而缺乏学习新知识的时间，会导致“做而不学则殆”。真正让工程师出类拔萃的是项目的深度，而不是不停地做项目。所以，在项目之间的空档期，工程师们应该珍惜难得的喘息之机，深入思考，把项目做深，做精。</p>\n<p>如何提高项目的深度呢？一般而言，任何项目都有一个目标，当项目完成后，目标就算基本达成了。但是，客户真的满意了吗？系统的可用性、可靠性、可扩展性、可维护性已经做到极致了吗？这几个问题的答案永远是否定的。所以，任何一个有价值的项目，都可以一直深挖。深挖项目，深度思考还可以锻炼工程师的创造力。期望不停地做项目的人，就像一个致力于训练更多千里马的人是发明不出汽车的。锻炼创造力也不是一蹴而就的事情，需要长时间地思考。总之，工程师们应该总是觉得时间不够用，毕竟时间是最宝贵的资源。</p>\n<h2 id=\"-\">职责真的很小吗</h2>\n<p>很多时候，一个工程师所负责系统的数量和团队规模与其“江湖地位”正相关。但是，江湖地位与技术成长没有必然关联。提升技术能力的关键是项目深度以及客户的挑剔程度。项目越多，在单个项目中投入的时间就越少，容易陷入肤浅。特别需要避免的是“ 在其位不谋其政”的情况。团队越大，在管理方面需要投入的精力就越多。在管理技巧不成熟，技术眼界不够高的前提强行负责大团队，可能会导致个人疲于应付，团队毫无建树。最终“ 一将无能，累死三军”，效果可能适得其反。</p>\n<p>从技术发展的角度来说，技术管理者应该关注自己所能把控的活跃项目的数量，并致力于提高活跃项目的影响力和技术深度。团队人数要与个人管理能力、规划能力和需求把控能力相适应。一份工作让多个人来干，每个人的成长都受限。每个人都做简单重复的工作，对技术成长没有任何好处。团队管理和项目管理需要循序渐进，忌“拔苗助长”。</p>\n<h2 id=\"-\">一定要当老大吗</h2>\n<p>有一些工程师的人生理想是做团队里的技术老大，这当然是一个值得称赞的理想。可是，如果整个团队技术能力一般，发展潜力一般，而你是技术最强者，这与其说是幸运，不如说是悲哀。这种场景被称之为“武大郎开店”。 团队里的技术顶尖高手不是不能做，但为了能够持续成长，需要满足如下几个条件：</p>\n<ul>\n<li>首先你得是行业里面的顶尖专家了——实在很难找到比你更强的人了！</li>\n<li>其次，你经常需要承担对你自己的能力有挑战的任务，但同时你拥有一批聪明能干的队友。虽然你的技术能力最高，但是在你不熟悉的领域，你的队友能够进行探索并扩展整个团队的知识。</li>\n<li>最后，你必须要敏而好学，不耻下问。</li>\n</ul>\n<p>否则，加入更强的技术团队或许是更好的选择，最少不是什么值得骄傲的事情。</p>\n<h2 id=\"-\">平台化的传说</h2>\n<p>平台化算得上是“高大上”的代名词了，很多工程师挤破头就为了和“平台化”沾点边。然而和其他业务需求相比，平台化需求并没有本质上的区别。无论是平台化需求还是普通业务需求，它的价值都来自于客户价值。不同点如下：</p>\n<ul>\n<li>很多平台化需求的客户来自于技术团队，普通需求的客户来自于业务方。</li>\n<li>产品经理不同。普通业务需求来自于产品经理，平台化需求的产品经理可能就是工程师自己。长期被产品经理“压迫”的工程师们，在平台化上终于找到“翻身农奴把歌唱”的感觉。</li>\n<li>很多平台化的关注点是接入能力和可扩展性，而普通业务的关注点更多。</li>\n</ul>\n<p>归根结底，平台化就是一种普通需求。在实施平台化之前，一定要避免下面两个误区：</p>\n<ul>\n<li>平台化绝对不是诸如“统一”、“全面”之类形容词的堆砌。是否需要平台化，应该综合考虑：客户数量，为客户解决的问题，以及客户价值是否值得平台化的投入。</li>\n<li>平台化不是你做平台，让客户来服务你。一些平台化设计者的规划设计里面，把大量的平台接入工作、脏活累活交给了客户，然后自己专注于所谓“最高大上”的功能。恰恰相反，平台化应该是客户什么都不做，所有的脏活累活都由平台方来做。本质上讲，平台化的价值来自于技术深度。真正体现技术深度的恰恰是设计者能够很轻松的把所有的脏活累活搞定。</li>\n</ul>\n<p>所以平台化的最佳实践是：投入最少的资源，解决最多的问题。平台解决一切，客户坐享其成。</p>\n<h2 id=\"-\">搞基础技术就一定很牛吗</h2>\n<p>经常听到同学们表达对基础技术部同学的敬仰之情，而对搞业务技术的同学表现出很轻视，认为存储、消息队列、服务治理框架（比如美团点评内部使用的OCTO）、Hadoop等才能被称为真正的技术。事实并非如此，更基础的并不一定更高深。</p>\n<p>比如下面这个流传很久的段子：越高级的语言就越没有技术含量。但真是这样吗，就拿Java和C来说，这是完全不同的两种语言，所需要的技能完全不同。C或许跟操作系统更加接近一点，和CPU、内存打交道的机会更多一点。但是为了用好Java，程序员在面向对象、设计模式、框架技术方面必须要非常精通。Java工程师转到C方向确实不容易，但作者也见过很多转到Java语言的C工程师水土不服。</p>\n<p>基础技术和业务应用技术必然会有不同的关注点，没有高低之分。之所以产生这种误解，有两个原因：</p>\n<ul>\n<li>基础技术相对成熟，有比较完整的体系，这给人一个高大上的感觉。业务应用技术相对来说，由于每个团队使用的不一样，所以成熟度参差不齐，影响力没有那么大。</li>\n<li>基础技术的门槛相对来说高一点，考虑到影响面，对可靠性、可用性等有比较高的最低要求。但是门槛高不代表技术含量高，另外成熟技术相对来说在创新方面会受到很大的约束。但是最先进的技术都来自活跃的创新。</li>\n</ul>\n<p>对比下来，业务技术和基础技术各有千秋。但真正的高手关注的是解决问题，所有的技术都是技能而已。</p>\n<h2 id=\"-\">可行性调研的那些坑</h2>\n<p>工作中开展可行性调研时有发生。做可行性调研要避免如下情况：</p>\n<ul>\n<li>把可行性调研做成不可行性调研。这真的非常糟糕。不可行性的结论往往是：因为这样或者那样的原因，所以不可行。</li>\n<li>避免“老鼠给猫挂铃铛”式的高风险可行性方案。“天下大事必作于细”，可行性调研一定要细致入微，避免粗枝大叶。</li>\n<li>避免调研时间过长。如果发现调研进展进入到指数级复杂度，也就是每前进一步需要之前两倍的时间投入，就应该果断的停止调研。</li>\n</ul>\n<p>可行性调研的结论应该是收益与成本的折衷，格式一般如下：</p>\n<ul>\n<li>首先明确预期的结果，并按照高中低收益进行分级。</li>\n<li>阐述达成每种预期结果需要采取的措施和方案。</li>\n<li>给出实施各方案需要付出的成本。</li>\n</ul>\n<h2 id=\"-\">工程师天生不善沟通吗</h2>\n<p>实际工作中，沟通所导致的问题层出不穷。工程师有不少是比较内向的，总是被贴上“不善沟通”的标签。实际上，沟通能力是工程师最重要的能力之一，良好的沟通是高效工作学习的基础，也是通过学习可以掌握的。下面我按工程师的语言说说沟通方面的经验。</p>\n<p>第一类常见的问题是沟通的可靠性。从可靠性的角度来讲，沟通分为TCP模式和UDP模式。TCP模式的形象表述是：我知道你知道。UDP模式的形象表述是：希望你知道。TCP模式当然比较可靠，不过成本比较高，UDP模式成本低，但是不可靠。在沟通可靠性方面，常见错误有如下两种：</p>\n<ul>\n<li>经常听到的这样的争论。一方说：“我已经告诉他了”，另一方说：“我不知道这个事情呀”。把UDP模式被当作TCP模式来使用容易产生扯皮。</li>\n<li>过度沟通。有些同学对沟通的可靠性产生了过度焦虑，不断的重复讨论已有结论问题。把TCP模式当成UDP来使用，效率会比较低。</li>\n</ul>\n<p>第二类沟通问题是时效性问题。从时效性讲，沟通分为：同步模式和异步模式。同步沟通形象地说就是：你现在给我听好了。异步沟通的形象表述是：记得给我做好了。在沟通时效性方面，有如下两种常见错误：</p>\n<ul>\n<li>已经出现线上事故，紧急万分。大家你一言，我一语，感觉事故可能和某几个人有关，但是也不能完全确定，所以没有通知相关人员。最终，一个普通的事故变成了严重事故。对于紧急的事情，必须要同步沟通。</li>\n<li>半夜三点你正在熟睡，或者周末正在逛街，接到一个电话：“现在有个需求，能否立刻帮忙做完。”这会非常令人郁闷，因为那并不是紧急的事情。不是所有的需求都需要立刻解决。</li>\n</ul>\n<p>有效沟通的一个重要原则是提前沟通。沟通本质是信息交流和处理，可以把被沟通对象形象地比喻成串行信息处理的CPU。提前沟通，意味着将处理请求尽早放入处理队列里面。下面的例子让很多工程师深恶痛绝：一个需求策划了1个月，产品设计了2周。当开发工程是第一次听说该需求的时候，发现开发的时间是2天。工程师据理力争，加班加点1周搞定。最后的结论是工程师非常不给力，不配合。就像工程师讨厌类似需求一样。要协调一个大项目，希望获得别人的配合，也需要尽早沟通。</p>\n<p>有效沟通的另外一个重点是“不要跑题”。很多看起来很接近的问题，本质上是完全不同的问题。比如：一个会议的主题是“如何实施一个方案”，有人却可能提出“是否应该实施该方案”。 “如何实施”和“是否应该实施”是完全不同的两个问题，很多看起来相关的问题实际上跑题很远。“跑题”是导致无效沟通的重要原因。</p>\n<p>良好沟通的奥秘在于能掌握TCP模式和UDP模式精髓，正确判断问题的紧急性，尽量提前沟通，避免跑题。</p>\n<h2 id=\"-\">带人之道</h2>\n<p>有些初为导师的工程师由于担心毕业生的能力太弱，安排任务时候谆谆教诲，最后感觉还是有所顾虑，干脆自己写代码。同样的事情发生在很多刚刚管理小团队的工程师身上。最终的结果他们：写完所有的代码，让下属无代码可写。“ 事必躬亲”当然非常糟糕，最终的往往是团队的整体绩效不高，团队成员的成长很慢，而自己却很累。</p>\n<p>古人说：“用人不疑，疑人不用。”这句话并非“放之四海而皆准”。在古代，受限于通信技术，反馈延迟显著，而且信息在传递过程中有大量噪音，变形严重。在这种情况下，如果根据短期内收集的少量变形的信息做快速决断，容易陷于草率。在公司里，这句话用于选人环节更为恰当，应该改为：录用不疑，疑人不录。</p>\n<p>考虑到招聘成本，就算是在录用层面，有时候也无法做到。作为一个小团队的管理者，能够快速准确的获取团队成员的各种反馈信息，完全不需要“用人不疑，疑人不用”。用人的真正理论基础来自于“探索和利用”(Exploration and Exploitation )。不能因为下属能做什么就只让他做什么，更不能因为下属一次失败就不给机会。</p>\n<p>根据经典的“探索和利用”(Exploration and Exploitation )理论，良好的用人方式应该如下：</p>\n<ul>\n<li>首选选择相信，在面临失败后，收缩信任度。</li>\n<li>查找失败的原因，提供改进意见，提升下属的能力。</li>\n<li>总是给下属机会，在恰当地时机给下属更高的挑战。 总之，苍天大树来自一颗小种子，要相信成长的力量。</li>\n</ul>\n<h2 id=\"-\">效率、效率、效率</h2>\n<p>经常看到有些同学给自己的绩效评分是100分——满分，原因是在过去一段时间太辛苦了，但最终的绩效却一般般。天道酬勤不错，但是天道更酬巧。工程师们都学过数据结构，不同算法的时间复杂度的差距，仅仅通过更长的工作时间是难以弥补的。为了提升工作学习效率，我们需要注意以下几点：</p>\n<ul>\n<li>主要关注效率提升。很多时候，与效率提升所带来的收益相比，延长时间所带来的成果往往不值得一提。</li>\n<li>要有清晰的结果导向思维。功劳和苦劳不是一回事。</li>\n<li>做正确的事情，而不仅仅正确地做事情。这是一个被不断提起的话题，但是错误每天都上演。为了在规定的时间内完成一个大项目，总是要有所取舍。如果没有重点，均匀发力，容易事倍功半。如果“南辕北辙”，更是可悲可叹。</li>\n</ul>\n<h1 id=\"-\">架构师能力模型</h1>\n<p>前面我们已经讲完了原则和一些困惑，那么工程师到底应该怎么提升自己呢？</p>\n<p>成为优秀的架构师是大部分初中级工程师的阶段性目标。优秀的架构师往往具备七种核心能力：编程能力、调试能力、编译部署能力、性能优化能力、业务架构能力、在线运维能力、项目管理能力和规划能力。</p>\n<p>这几种能力之间的关系大概如下图。编程能力、调试能力和编译部署能力属于最基础的能力。不能精通掌握这三种能力，很难在性能优化能力和业务架构能力方面有所成就。具备了一定的性能优化能力和业务架构能力之后，才能在线运维能力和项目管理能力方面表现优越。团队管理能力是最高能力，它对项目管理能力的依赖度更大。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/04/525d40d185c5f8b8d9b2f4274fba5c8d.png\"><img class=\"aligncenter size-full wp-image-113899\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/525d40d185c5f8b8d9b2f4274fba5c8d.png\" alt=\"architect_abilities\"></a></p>\n<h2 id=\"-\">编程能力</h2>\n<p>对工程师而言，编程是最基础的能力，必备技能。其本质是一个翻译能力，将业务需求翻译成机器能懂的语言。</p>\n<p>提升编程能力的书籍有很多。精通面向对象和设计模式是高效编程的基础。初级工程师应该多写代码、多看代码。找高手做Code Review，也是提升编程水平的捷径。</p>\n<h2 id=\"-\">调试能力</h2>\n<p>程序代码是系统的静态形式，调试的目的是通过查看程序的运行时状态来验证和优化系统。本质上讲，工程师们通过不断调试可以持续强化其通过静态代码去预测运行状态的能力。所以调试能力也是工程师编程能力提升的关键手段。很早之前有个传说：“调试能力有多强，编程能力就有多强。”不过现在很多编辑器的功能很强大，调试能力的门槛已经大大降低。</p>\n<p>调试能力是项目能否按时、高质量提交的关键。即使一个稍具复杂度的项目，大部分工程师也无法一次性准确无误的完成。大项目都是通过不断地调试进行优化和纠错的。所以调试能力是不可或缺的能力。</p>\n<p>多写程序，解决Bug，多请教高手是提升调试能力的重要手段。</p>\n<h2 id=\"-\">编译部署能力</h2>\n<p>编译并在线上部署运行程序是系统上线的最后一个环节。随着SOA架构的普及以及业务复杂度的增加，大部分系统只是一个完整业务的一个环节，因此，本地编译和运行并不能完全模拟系统在线运行。为了快速验证所编写程序的正确性，编译并在线上部署就成了必要环节。所以编译部署能力是一个必备技能。</p>\n<p>让盘根错节的众多子系统运行起来是个不小的挑战。得益于SOA架构的普及以及大量编译、部署工具的发展，编译部署的门槛已经大大降低。基于应用层进行开发的公司，已经很少有“编译工程师”的角色了。但是对于初级工程师而言，编译部署仍然不是一个轻松的事情。</p>\n<h2 id=\"-\">性能优化能力</h2>\n<p>衡量一个系统成功的一个重要指标是使用量。随着使用量的增加和业务复杂度的增加，大部分系统最终都会碰到性能问题。 性能优化能力是一个综合能力。因为：</p>\n<ul>\n<li>影响系统性能的因素众多，包括：数据结构、操作系统、虚拟机、CPU、存储、网络等。为了对系统性能进行调优，架构师需要掌握所有相关的技术。</li>\n<li>精通性能优化意味着深刻理解可用性、可靠性、一致性、可维护性、可扩展性等的本质。</li>\n<li>性能优化与业务强耦合，最终所采取的手段是往往折衷的结果。所以，性能优化要深谙妥协的艺术。</li>\n</ul>\n<p>可以说，性能优化能力是工程师们成长过程中各种技能开始融会贯通的一个标志。这方面可以参考之前的博客文章“常见性能优化策略的总结”。市场上还有很多与性能优化相关的书籍，大家可以参考。多多阅读开源框架中关于性能优化方面的文档和代码也不失为好的提升手段。动手解决线上性能问题也是提升性能优化能力的关键。如果有机会，跟着高手学习，分析性能优化解决方案案例（我们技术博客之前也发表了很多这方面的文章），也是快速提升性能优化能力的手段。</p>\n<h2 id=\"-\">在线运维能力</h2>\n<p>如果说性能优化能力体现的是架构师的静态思考能力，在线运维能力考验的就是动态反应能力。残酷的现实是，无论程序多么完美，Bug永远存在。与此同时，职位越高、责任越大，很多架构师需要负责非常重要的在线系统。对于线上故障，如果不能提前预防以及快速解决，损失可能不堪设想，所以在线运维能力是优秀架构师的必备技能。</p>\n<p>为了对线上故障进行快速处理，标准化的监控、上报、升级，以及基本应对机制当然很重要。通过所观察到的现象，快速定位、缓解以及解决相关症状也相当关键。这要求架构师对故障系统的业务、技术具备通盘解读能力。解决线上故障的架构师就好比一个在参加比赛F1的车手。赛车手必须要了解自身、赛车、对手、同伴、天气、场地等所有因素，快速决策，不断调整。架构师必须要了解所有技术细节、业务细节、处理规范、同伴等众多因素，快速决断，迅速调整。</p>\n<p>在线运维本质上是一个强化学习的过程。很多能力都可以通过看书、查资料来完成，但在线运维能力往往需要大量的实践来提升。</p>\n<h2 id=\"-\">业务架构能力</h2>\n<p>工程师抱怨产品经理的故事屡见不鲜，抱怨最多的主要原因来自于需求的频繁变更。需求变更主要有两个来源：第一个原因是市场改变或战略调整，第二个原因是伪需求。对于第一个原因，无论是工程师还是产品经理，都只能无奈的接受。优秀的架构师应该具备减少第二种原因所导致的需求变更的概率。</p>\n<p>伪需求的产生有两个原因：</p>\n<p>第一个原因是需求传递变形。从信息论的角度来讲，任何沟通都是一个编码和解码的过程。典型的需求从需求方到产品经理，最终到开发工程师，最少需要经历三次编码和解码过程。而信息的每一次传递都存在一些损失并带来一些噪音，这导致有些时候开发出来的产品完全对不上需求。此外，需求方和产品经理在需求可行性、系统可靠性，开发成本控制方面的把控比较弱，也会导致需求变形。</p>\n<p>第二个原因就是需求方完全没有想好自己的需求。</p>\n<p>优秀的架构师应该具备辨别真伪需求的能力。应该花时间去了解客户的真实业务场景，具备较强的业务抽象能力，洞悉客户的真实需求。系统的真正实施方是工程师，在明确客户真实需求后，高明的架构师应该具备准确判断项目对可行性、可靠性、可用性等方面的要求，并能具备成本意识。最后，由于需求与在线系统的紧耦合关系，掌握在线系统的各种细节也是成功的业务架构的关键。随着级别的提升，工程师所面对的需求会越来越抽象。承接抽象需求，提供抽象架构是架构师走向卓越的必经之途。</p>\n<p>市场上有一些关于如何成为架构师的书，大家可以参考。但是架构能力的提升，实践可能是更重要的方式。业务架构师应该关注客户的痛点而不是PRD文档，应该深入关注真实业务。掌握现存系统的大量技术和业务细节也是业务架构师的必备知识。</p>\n<h2 id=\"-\">项目管理能力</h2>\n<p>作为工业时代的产物，分工合作融入在互联网项目基因里面。架构师也需要负责几个重大项目才能给自己正名。以架构师角色去管理项目，业务架构能力当然是必备技能。此外，人员管理和成本控制意识也非常重要。</p>\n<p>项目管理还意味着要有一个大心脏。重大项目涉及技术攻关、人员变动、需求更改等众多可变因素。面临各种变化，还要在确保目标顺利达成，需要较强的抗压能力。</p>\n<p>人员管理需要注意的方面包括：知人善用，优化关系，简化沟通，坚持真理。</p>\n<ul>\n<li>知人善用意味着架构师需要了解每个参与者的硬技能和软素质。同时，关注团队成员在项目过程中的表现，按能分配。</li>\n<li>优化关系意味着管理团队的情绪，毕竟项目的核心是团队，有士气的团队才能高效达成目标。</li>\n<li>简化沟通意味着快速决策，该妥协的时候妥协，权责分明。</li>\n<li>坚持真理意味着顶住压力，在原则性问题上绝不退步。</li>\n</ul>\n<p>成本控制意味着对项目进行精细化管理，需要遵循如下几个原则：</p>\n<ul>\n<li>以终为始、确定里程碑。为了达成目标，所有的计划必须以终为始来制定。将大项目分解成几个小阶段，控制每个阶段的里程碑可以大大降低项目失败的风险。</li>\n<li>把控关键路径和关键项目。按照关键路径管理理论（CPM）的要求，架构师需要确定每个子项目的关键路径，确定其最早和最晚启动时间。同时，架构师需要关注那些可能会导致项目整体延期的关键节点，并集中力量攻破。</li>\n<li>掌控团队成员的张弛度。大项目持续时间会比较长，也包含不同工种。项目实施是一个不断变化的动态过程，在这个过程中不是整个周期都很紧张，不是所有的工种都一样忙。优秀的架构师必须要具备精细阅读整体项目以及快速反应和实时调整的能力。这不仅仅可以大大降低项目成本，还可以提高产出质量和团队满意度。总体来说，“前紧后松”是项目管理的一个重要原则。</li>\n</ul>\n<p>项目管理方面的书籍很多。但是，提高业务架构能力同样重要。积极参与大项目并观察别人管理项目的方式也是非常重要的提升手段。</p>\n<h2 id=\"-\">团队管理能力</h2>\n<p>不想做CTO的工程师不是一个好的架构师。走向技术管理应该是工程师的一个主流职业规划。团队管理的一个核心能力就是规划能力，这包括项目规划和人员规划。良好的规划需要遵循如下原则：</p>\n<ul>\n<li>规划是利益的博弈。良好的规划上面对得起老板，中间对得起自己，下面对得起团队。在三者利益者寻找平衡点，实现多方共赢考验着管理者的智慧和精细拿捏的能力。</li>\n<li>任何规划都比没有规划好。没有规划的团队就是没头的苍蝇，不符合所有人的利益。</li>\n<li>规划不是本本主义。市场在变，团队在变，规划也不应该一成不变。</li>\n<li>客户至上的是项目规划的出发点。</li>\n<li>就人员规划而言，规划需要考量团队成员的能力、绩效、成长等多方面的因素。</li>\n</ul>\n<p>市场上有很多规划管理方面的书籍，值得阅读。最优化理论虽然是技术书籍，但它是规划的理论基础，所以不妨多看看翻阅一下。从自我规划开始，多多学习别人的规划也是规划能力提升的重要手段。</p>\n<h1 id=\"-\">总结</h1>\n<p>因为受邀去做一个关于“一边工作，一边学习”的分享，作者花了一段时间去思考和汇总学习方法论，接着每天不断地采集谣言并尝试解惑，再根据个人经验绘制出优秀架构师的能力模型，最后汇集成文。</p>\n<p>文章系统性地阐述了学习原则、分析了常见困惑，并制定明确学习目标，期望对工程师们的工作学习有所帮助。需要申明的是，文章内容挂一漏万，所谓的架构师能力模型也是作者的个人观点。欢迎大家在评论中分享自己在学习成长方面的心得。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113896\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113896votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113896\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"}
{"url_object_id": "c9d9c3009f6783bc6fdee771e14f8aa2", "title": "机器学习如何发现你喜欢的音乐", "create_date": "2018/04/13", "url": "http://blog.jobbole.com/113821/", "front_image_url": ["http://wx2.sinaimg.cn/large/7cc829d3gy1fq7l3ts6p3j20ps0ocq78.jpg"], "praise_nums": 1, "comment_nums": 1, "fav_nums": 4, "tags": "IT技术", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/1789912317\">XiaofengYue_DXY</a> 翻译，<a href=\"http://www.jobbole.com/members/hanxiaomax\">艾凌风</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://hackernoon.com/spotifys-discover-weekly-how-machine-learning-finds-your-new-music-19a41ab76efe\">Sophia Ciocca</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><h2>机器学习如何发现你喜欢的音乐：音乐个性化推荐背后的科学原理</h2>\n<p>本周一，正如其它每个周一，一亿多 Spotify 用户每人都收到了一个崭新的歌单。这个叫做每周发现的歌单内混合了用户从未听过但是可能会喜欢的 30首歌曲。效果堪称神奇。</p>\n<p>我自己是 Spotify 的超级粉丝，对每周发现尤其喜爱。为什么呢？因为我觉得它懂我。它比我生命中的任何人都更清楚我的音乐品味。我很高兴每周它都能满足我的需求，一如既往地推荐一些我自己永远都不会找到或知道会喜欢的歌曲。</p>\n<p>对于那些两耳不闻窗外事的人们，请允许我介绍一下我的虚拟好友：</p>\n<p><img id=\"pic\" class=\"M_cur_zoom_out aligncenter\" src=\"http://wx2.sinaimg.cn/large/7cc829d3gy1fq7l3ts6p3j20ps0ocq78.jpg\"></p>\n<p style=\"text-align: center;\">[图片说明: 我的 Spotify 每周发现歌单]</p>\n<p>没想到，在这方面我不是一个人，不光是我对每周发现如此着迷 – 整个用户群体都趋之若鹜。这股热潮使得 Spotify 重新调整了它的重心，并在基于算法的歌单上投入了更多的资源。</p>\n<p><img class=\"aligncenter\" src=\"http://wx4.sinaimg.cn/mw690/7cc829d3gy1fq7l3uppwxj20dy0bwabh.jpg\" width=\"502\" height=\"428\"></p>\n<blockquote><p>Dave Howitz: @Spotfiy 每周发现的歌单对我的了解程度简直毛骨悚然，熟悉到就像一个曾经与我有过一起濒死体验的前女友一样。</p>\n<p>Amanda Whitbred: 现在 @Spotify 的每周发现对我已经了解到如果它现在求婚，我也会说同意的地步了。</p></blockquote>\n<p>自「每周发现」在 2015 年第一次上线以来，我就迫切想知道它是怎么运作的（而且由于我是 Spotify 公司的迷妹，我喜欢假装在那里工作并研究他们的产品）。 经过三周的疯狂Google，我终于满怀感恩地获取了一些幕后的知识。</p>\n<p>所以 Spotify 到底是如何成功做到给每人每周挑选 30 首歌曲的？我们先来仔细看下其它的音乐服务是如何做音乐推荐，以及 Spotify 是如何更胜一筹的。</p>\n<p> </p>\n<h3>在线音乐甄选服务简史</h3>\n<p><span style=\"font-weight: normal;\"><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/7cc829d3gy1fq7l3vdopfj20iu07n756.jpg\" width=\"678\" height=\"275\"></span></p>\n<p><span style=\"font-weight: normal;\">早在千禧年之初，Songza 就开始使用手动甄选为用户提供歌单。手动甄选的意思就是所谓的音乐专家或者其他编辑会手动挑选一些他们自己认为不错的音乐做成歌单，然后听众可以直接拿来听。（稍后，Beats 音乐也采取了同样的策略）。手动甄选效果尚可，但是由于这种方法只是纯手工挑选，方式方法也比较简单，它并不能照顾到每个听众音乐品味的微妙差异。</span></p>\n<p>跟 Songza 一样， Pandora 也是音乐甄选服务领域的早期玩家之一。它使用了一个略为更高级的方法来代替给歌曲属性手工打标签。即大众在听音乐的时候，对每首歌曲挑选一些描述性的词语来作为标签。进而，Pandora 的程序可以直接过滤特定的标签来生成包含相似歌曲的歌单。</p>\n<p>差不多同一时间，一个隶属于麻省理工学院媒体实验室的名叫 The Echo Nest 的音乐信息机构，采用了一个完全不同的高级策略来定制音乐。The Echo Nest 使用算法来分析音频和音乐的文本内容，以完成音乐识别，个性化推荐，歌单创建和分析等。</p>\n<p>最后，是 Last.fm 另辟蹊径，采取了另一个沿用至今的策略。那就是利用协同过滤来识别用户可能喜欢的音乐。稍后本文会展开讨论更多这方面的内容。</p>\n<p>所以说既然其他的音乐甄选服务都实现了推荐功能，Spotify 究竟是怎么操作自己的神奇引擎，来实现甩出竞争对手几条街的用户品味默契度的呢？</p>\n<p> </p>\n<h3>Spotify 的三种推荐模型</h3>\n<p>事实上 Spotify 并没有使用什么单一的革命性推荐模型，而是<strong>混合了一些其他公司使用的最好的策略来创建他们自己独一无二的强大发现引擎。</strong></p>\n<p>Spotify 使用三种主要的推荐模型来创建每周发现：</p>\n<ol>\n<li><strong>协同过滤模型</strong>（即 Last.fm 最早使用的那些模型）。工作原理为分析你和<strong>其他</strong>用户的行为。</li>\n<li><strong>自然语言处理（NLP）</strong>模型 。工作原理为分析文本。</li>\n<li><strong>音频</strong>模型。工作原理为分析<strong>原始音频声道本身</strong>。</li>\n</ol>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/7cc829d3gy1fq7l3vwrx4j20mv0dgjw0.jpg\" width=\"690\" height=\"406\"></p>\n<p>我们来具体看下这些推荐模型是怎么工作的！</p>\n<h3>推荐模型之一：协同过滤</h3>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/mw690/7cc829d3gy1fq7l3wmkvhj218g094tah.jpg\" width=\"445\" height=\"91\"></p>\n<p>首先介绍下背景：当很多人听到协同过滤这几个词的时候，他们会立刻联想到 <strong>Netflix</strong>，因为它是第一个利用协同过滤来实现推荐模型的公司之一。其做法主要是使用用户提交的电影星级来计算推荐那些电影给其他<strong>类似的</strong>用户。</p>\n<p>自 <strong>Netflix </strong>将其成功应用以来，协同过滤开始快速流传开来。现在无论是谁想实现一个推荐模型的话，一般都会拿它作为初次尝试。</p>\n<p>与<strong>Netflix</strong>不同的是，Spotify 并没有用户对他们音乐的星级评价数据。Spotify 所用的数据是<strong>隐形反馈</strong>的，具体来说就是我们在线听歌的<strong>歌曲次数</strong>，以及其他额外信息，诸如用户是否保存歌曲到个人歌单，或者听完歌曲后是否接着访问艺术家主页等。</p>\n<p>但什么是协同过滤，到底它是如何工作的呢？下面用一段简短对话来做一个大致的介绍。</p>\n<p><img id=\"pic\" class=\"\" src=\"http://wx4.sinaimg.cn/large/7cc829d3gy1fq7l3x7gfyj20go0cytht.jpg\"></p>\n<p>啥情况? 原来这俩人里面每人都有自己的一些歌曲偏好 – 左边的人喜欢歌曲 P, Q, R 和 S; 右边的人喜欢 Q, R, S 和 T。</p>\n<p>协同过滤系统进而利用这些数据得出结论，</p>\n<blockquote><p><em>“</em><em>嗯。既然你俩都喜欢相同的歌曲 – Q</em><em>，R </em><em>和 S – </em><em>那么你们可能是类似的用户。所以你们应该会喜欢另一个人听过但是你还没有听过的歌曲。”</em></p></blockquote>\n<p>系统然后建议右边的人去体验下歌曲 P，以及左边的人去体验下歌曲 T。听起来够简单吧？</p>\n<p>但是 Spotify 具体是怎么具体应用这个概念，来计算<strong>基于百万级</strong>的用户偏好从而得出<strong>数以百万计</strong>的用户歌曲推荐呢？</p>\n<p> </p>\n<h3>…矩阵运算，用 Python 库即可实现</h3>\n<p><img class=\"alignnone\" src=\"http://wx3.sinaimg.cn/mw690/7cc829d3gy1fq7l3xy4boj20ay071t9u.jpg\" width=\"394\" height=\"253\"></p>\n<p>现实中，此处提及的矩阵是极其庞大的。<strong>每行都代表了</strong><strong> Spotify </strong><strong>的一亿四千万用户中的一员</strong>（如果你也用 Spotify，那么你也是这个矩阵中的一行），而每一列则代表了 Spotify 数据库中<strong>三亿首歌曲</strong>中的一首。</p>\n<p>然后，Python 库就开始跑这个漫长而复杂的矩阵分解公式：</p>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/7cc829d3gy1fq7l3yp06ej20oy01v3zg.jpg\" width=\"690\" height=\"51\"></p>\n<p>计算完成后，系统会生成两种类型的向量，在此分别命名为 X 和 Y。X 为用户向量，代表单个用户的音乐品味。Y 则为歌曲向量，代表单支歌曲的特征。</p>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/7cc829d3gy1fq7l3zb0mxj20mn0a8di9.jpg\" width=\"690\" height=\"312\"></p>\n<p>现在我们得到了一亿四千万个用户向量，每人一个，还有三亿歌曲向量。这些向量的具体内容只是一些单独拎出来自身并无意义的数字，但是在后面进行比较时会非常有用。</p>\n<p>为了找到那些跟我相似品味的用户，协同过滤系统会拿我的向量跟其他用户的向量作比较，最终会找到那些跟我最相似的用户。对于 Y 向量，也是同样的流程 – 你可以拿一首歌的向量与其他的歌曲向量做比较，进而找出哪些歌曲是跟你现在正在看的歌曲最相似。</p>\n<p>协同过滤确实效果不错，但是 Spotify 深知再添加另外一个引擎的话效果会更出色。这就到了自然语言处理出场的时候了。</p>\n<p> </p>\n<h3>推荐模型之二：自然语言处理</h3>\n<p>Spotify 采用的第二个推荐模型就是<strong>自然语言处理</strong>。这些模型的源数据，正如名字所示，就是一些普通的<strong>语言文字</strong> – 例如歌曲的元数据，新闻文章，博客，和互联网上的其它文本等。</p>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/mw690/7cc829d3gy1fq7l40111lj20dr09h41u.jpg\" width=\"495\" height=\"341\"></p>\n<p> </p>\n<p>自然语言处理 – 计算机理解人类语言的能力 – 本身就是一个巨大的领域，通常通过情感分析应用编程接口（API）来进行操作处理。</p>\n<p>自然语言处理背后的具体原理超出了本文的讨论范畴，但是在此本文可以提供一些粗略的描述：Spotify 会在网上不断爬取博客帖子以及其它音乐相关的文本，并找出人们对特定的艺术家和歌曲的评论 – 比如说人们对这些歌曲经常使用哪些形容词和语言, 以及哪些其他艺术家和歌曲也会和它们放在一起讨论。</p>\n<p>虽然我不知道 Spotify 如何处理他们抓取的数据，但是我可以介绍下 The Echo Nest 是如何使用它们的。他们会把数据分类成“文化向量”和“最佳评语集”。每个艺术家和歌曲都有数以千计的每日更新的最佳评语集。每个评语都有一个相关的权重，来表示其描述的重要性（简单说就是某人可能会用该评语描述某个音乐的概率）。</p>\n<p><img class=\"alignnone aligncenter\" src=\"http://wx1.sinaimg.cn/mw690/7cc829d3gy1fq7l40o7dnj20jm07qaej.jpg\" width=\"690\" height=\"272\"></p>\n<p style=\"text-align: center;\">[ “Cultural vectors”, or “top terms”, as used by the Echo Nest. Table from Brian Whitman]</p>\n<p>然后，与协同过滤类似，自然语言处理模型用这些评语和权重来创建一个歌曲的表达向量，可以用来确定两首音乐是否相似。很酷吧？</p>\n<p> </p>\n<h3>推荐模型之三：原始音频模型</h3>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/7cc829d3gy1fq7l41ibqgj20pn09btap.jpg\" width=\"690\" height=\"250\"></p>\n<p>首先，你可能会问这个问题：</p>\n<blockquote><p><em>但是，Sophia</em><em>，我们已经从前两种模型中获取了这么多数据！为什么还要继续分析音频本身呢？</em></p></blockquote>\n<p>额，首先要说的是，引入第三个模型会进一步提高这个已经很优秀的推荐服务的准确性。但实际上，采用这个模型还有另外一个次要目的：<strong>原始音频模型会把新歌考虑进来。</strong></p>\n<p>比如说，你的创作歌手朋友在 Spotify 上刚放上了一首新歌。可能它只有 50 次听歌记录，所以很少能有其他听众来一起协同过滤它。与此同时，它也在网上也没有留下多少痕迹，所以自然语言处理模型也不会注意到它。幸运的是，原始音频模型并不区分新歌曲和热门歌曲。所以有了它的帮忙，你朋友的歌曲也可以和流行歌曲一道出现在每周发现的歌单里面。</p>\n<p>好了，到了“如何”的部分了。我们如何才能分析这些看起来如此抽象的<strong>原始音频数据</strong>呢？</p>\n<p>…用<strong>卷积神经网络！</strong></p>\n<p>卷积神经网络同样也是支撑面部识别的技术。只不过在 Spotify 的案例中，他们被稍作修改以基于音频数据处理而不是像素点。下面是一个神经网络架构的例子：</p>\n<p><img class=\"alignnone aligncenter\" src=\"http://wx2.sinaimg.cn/mw690/7cc829d3gy1fq7l426503j20sg0gl423.jpg\" width=\"690\" height=\"402\"></p>\n<p style=\"text-align: center;\">[<em>Image credit: Sander Dieleman</em>]</p>\n<p>这个特定的神经网络有四个<strong>卷积层</strong>，具体为图中左侧的宽柱，和右边的稍微窄些的三根柱。输入是音频帧的时频表示，进而连接起来形成频谱图。</p>\n<p>音频帧会穿过这些卷积层，经过最后一个卷积层，你可以看到一个“全局临时池”层。该层在整个时间轴上汇集数据，并有效计算和统计歌曲时长内的学习特征。</p>\n<p>处理完之后，神经网络会得出其对歌曲的理解，包括估计的<strong>时间签名，音调，调式，拍子及音量</strong>等特征。下面就是 Draft Punk 的 “Around the World” 30 秒片段的数据图。</p>\n<p><img class=\"alignnone aligncenter\" src=\"http://wx1.sinaimg.cn/mw690/7cc829d3gy1fq7l43abdwj20fq0hkdk4.jpg\" width=\"566\" height=\"632\"></p>\n<p style=\"text-align: center;\">[Image Credit: <a href=\"http://docs.echonest.com.s3-website-us-east-1.amazonaws.com/_static/AnalyzeDocumentation.pdf\">Tristan Jehan &amp; David DesRoches (The Echo Nest)</a>]</p>\n<p>最终，对这些对歌曲关键特征的理解可以让 Spotify 来决定歌曲之间的相似度，以及根据用户听歌历史来判断哪些用户可能会喜欢它们。</p>\n<p>这些基本涵盖了为每周发现提供支持的推荐作业流程所依赖的三种主要模型。</p>\n<p><img id=\"pic\" class=\"aligncenter\" src=\"http://wx2.sinaimg.cn/large/7cc829d3gy1fq7l4426xrj20q70ec7ad.jpg\"></p>\n<p style=\"text-align: center;\">[ Cassandra instances]</p>\n<p>当然了，这些推荐模型也和 Spotify 其它更大的生态系统连接在一起，其中包括利用海量的数据存储以及<strong>非常多</strong>的 Hadoop 集群来做推荐服务的扩展，使得引擎得以计算巨型矩阵，无穷无尽的互联网音乐文章和大量的音频文件。</p>\n<p>我希望本文可以对你有所启发，并且像当时它对我一样能够激起你的好奇。怀着对幕后的机器学习技术的了解和感激之情，现在我将通过我自己的每周发现来寻找我喜欢的音乐。</p>\n<p>文章结束。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113821\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113821votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113821\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/1789912317\">XiaofengYue_DXY</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/1789912317\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2017/05/301e4d82055cbc30afc5d8e4ca14ea75.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            Backend Dev.        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/1789912317\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/1789912317/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/1789912317/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 10</a> · <a title=\"微博主页\" target=\"_blank\" href=\"http://weibo.com/1789912317\"><i class=\"fa fa-weibo\"></i></a> <a title=\"GitHub主页\" target=\"_blank\" href=\"https://github.com/yuexiaofeng\"><i class=\"fa fa-github\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"}
{"url_object_id": "a0e861fe08356d9eabe96fbd21c0753d", "title": "使用 Graylog 和 Prometheus 监视 Kubernetes 集群", "create_date": "2018/04/13", "url": "http://blog.jobbole.com/113875/", "front_image_url": ["https://dn-linuxcn.qbox.me/data/attachment/album/201804/10/182842hu1toaq9hhh9uiou.png"], "praise_nums": 1, "comment_nums": 2, "fav_nums": 2, "tags": "IT技术,集群", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://insights.ubuntu.com/2018/01/16/monitor-your-kubernetes-cluster/\">Kevin Monroe</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9534-1.html\">Linux中国/qhwdw</a>   </div><p>这篇文章最初发表在 <a href=\"https://medium.com/@kwmonroe/monitor-your-kubernetes-cluster-a856d2603ec3\">Kevin Monroe 的博客</a> 上。</p>\n<p>监视日志和指标状态是集群管理员的重点工作。它的好处很明显：指标能帮你设置一个合理的性能目标，而日志分析可以发现影响你工作负载的问题。然而，困难的是如何找到一个与大量运行的应用程序一起工作的监视解决方案。</p>\n<p>在本文中，我将使用 <a href=\"https://www.graylog.org/\">Graylog</a> （用于日志）和 <a href=\"https://prometheus.io/\">Prometheus</a> （用于指标）去打造一个 Kubernetes 集群的监视解决方案。当然了，这不仅是将三个东西连接起来那么简单，实现上，最终结果看起来应该如题图所示：</p>\n<p><img src=\"https://dn-linuxcn.qbox.me/data/attachment/album/201804/10/182842hu1toaq9hhh9uiou.png\" alt=\"\"></p>\n<p>正如你所了解的，Kubernetes 不是一件东西 —— 它由主控节点、工作节点、网络连接、配置管理等等组成。同样，Graylog 是一个配角（apache2、mongodb、等等），Prometheus 也一样（telegraf、grafana 等等）。在部署中连接这些点看起来似乎有些让人恐惧，但是使用合适的工具将不会那么困难。</p>\n<p>我将使用 <a href=\"https://conjure-up.io/\">conjure-up</a> 和 <a href=\"https://jujucharms.com/canonical-kubernetes\">Canonical 版本的 Kubernetes</a> (CDK) 去探索 Kubernetes。我发现 <code>conjure-up</code> 接口对部署大型软件很有帮助，但是我知道一些人可能不喜欢 GUI、TUI 以及其它用户界面。对于这些人，我将用命令行再去部署一遍。</p>\n<p>在开始之前需要注意的一点是，Graylog 和 Prometheus 是部署在 Kubernetes 外侧而不是集群上。像 Kubernetes 仪表盘和 Heapster 是运行的集群的非常好的信息来源，但是我的目标是为日志/指标提供一个分析机制，而不管集群运行与否。</p>\n<h3 id=\"toc_1\">开始探索</h3>\n<p>如果你的系统上没有 <code>conjure-up</code>，首先要做的第一件事情是，请先安装它，在 Linux 上，这很简单：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae0fd3770847277100968\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsudo snap install conjure-up --classic\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae0fd3770847277100968-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae0fd3770847277100968-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae0fd3770847277100968-1\"><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">snap </span><span class=\"crayon-e\">install </span><span class=\"crayon-v\">conjure</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">up</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-i\">classic</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae0fd3770847277100968-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>对于 macOS 用户也提供了 brew 包：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae0fd377084f525293958\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nbrew install conjure-up\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae0fd377084f525293958-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae0fd377084f525293958-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae0fd377084f525293958-1\"><span class=\"crayon-e\">brew </span><span class=\"crayon-e\">install </span><span class=\"crayon-v\">conjure</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">up</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae0fd377084f525293958-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>你需要最新的 2.5.2 版，它的好处是添加了 CDK spell，因此，如果你的系统上已经安装了旧的版本，请使用 <code>sudo snap refresh conjure-up</code> 或者 <code>brew update &amp;&amp; brew upgrade conjure-up</code> 去更新它。</p>\n<p>安装完成后，运行它：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae0fd3770853124100174\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nconjure-up\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae0fd3770853124100174-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae0fd3770853124100174-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae0fd3770853124100174-1\"><span class=\"crayon-v\">conjure</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">up</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae0fd3770853124100174-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/0a84a2dc6e19e9e92a195dbe6c5eb6b1.png\" alt=\"\"></p>\n<p>你将发现有一个 spell 列表。选择 CDK 然后按下回车。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/5c2e2762a0bb2a81dd5939d4a657c69d.png\" alt=\"\"></p>\n<p>这个时候，你将看到 CDK spell 可用的附加组件。我们感兴趣的是 Graylog 和 Prometheus，因此选择这两个，然后点击 “Continue”。</p>\n<p>它将引导你选择各种云，以决定你的集群部署的地方。之后，你将看到一些部署的后续步骤，接下来是回顾屏幕，让你再次确认部署内容：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/e8a7154940f22e1ee5c1035698a2fab3.png\" alt=\"\"></p>\n<p>除了典型的 K8s 相关的应用程序（etcd、flannel、load-balancer、master 以及 workers）之外，你将看到我们选择的日志和指标相关的额外应用程序。</p>\n<p>Graylog 栈包含如下：</p>\n<ul>\n<li>apache2：graylog web 界面的反向代理</li>\n<li>elasticsearch：日志使用的文档数据库</li>\n<li>filebeat：从 K8s master/workers 转发日志到 graylog</li>\n<li>graylog：为日志收集器提供一个 api，以及提供一个日志分析界面</li>\n<li>mongodb：保存 graylog 元数据的数据库</li>\n</ul>\n<p>Prometheus 栈包含如下：</p>\n<ul>\n<li>grafana：指标相关的仪表板的 web 界面</li>\n<li>prometheus：指标收集器以及时序数据库</li>\n<li>telegraf：发送主机的指标到 prometheus 中</li>\n</ul>\n<p>你可以在回顾屏幕上微调部署，但是默认组件是必选 的。点击 “Deploy all Remaining Applications” 继续。</p>\n<p>部署工作将花费一些时间，它将部署你的机器和配置你的云。完成后，<code>conjure-up</code> 将展示一个摘要屏幕，它包含一些链接，你可以用你的终端去浏览各种感兴趣的内容：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/77927d348a0c12ef4855bd1116947ef5.png\" alt=\"\"></p>\n<h4 id=\"toc_2\">浏览日志</h4>\n<p>现在，Graylog 已经部署和配置完成，我们可以看一下采集到的一些数据。默认情况下，filebeat 应用程序将从 Kubernetes 的 master 和 worker 中转发系统日志（ <code>/var/log/*.log</code> ）和容器日志（<code>/var/log/containers/*.log</code>）到 graylog 中。</p>\n<p>记住如下的 apache2 的地址和 graylog 的 admin 密码：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae0fd3770858139233257\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\njuju status --format yaml apache2/0 | grep public-address\r\n public-address: &lt;your-apache2-ip&gt;\r\njuju run-action --wait graylog/0 show-admin-password\r\n admin-password: &lt;your-graylog-password&gt;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae0fd3770858139233257-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae0fd3770858139233257-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae0fd3770858139233257-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae0fd3770858139233257-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae0fd3770858139233257-1\"><span class=\"crayon-e\">juju </span><span class=\"crayon-v\">status</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">format </span><span class=\"crayon-e\">yaml </span><span class=\"crayon-v\">apache2</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">grep </span><span class=\"crayon-m\">public</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">address</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae0fd3770858139233257-2\"><span class=\"crayon-e\"> </span><span class=\"crayon-m\">public</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">address</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">your</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">apache2</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">ip</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5ae0fd3770858139233257-3\"><span class=\"crayon-e\">juju </span><span class=\"crayon-v\">run</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">action</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">wait </span><span class=\"crayon-v\">graylog</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">show</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">admin</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">password</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae0fd3770858139233257-4\"><span class=\"crayon-e\"> </span><span class=\"crayon-v\">admin</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">password</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">your</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">graylog</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">password</span><span class=\"crayon-o\">&gt;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>在浏览器中输入 <code>http://&lt;your-apache2-ip&gt;</code> ，然后以管理员用户名（admin）和密码（&lt;your-graylog-password&gt;）登入。</p>\n<p><strong>注意：</strong> 如果这个界面不可用，请等待大约 5 分钟时间，以便于配置的反向代理生效。</p>\n<p>登入后，顶部的 “Sources” 选项卡可以看到从 K8s 的 master 和 workers 中收集日志的概述：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/8e0dc56257a324ee2f0f33426b3c105e.png\" alt=\"\"></p>\n<p>通过点击 “System / Inputs” 选项卡深入这些日志，选择 “Show received messages” 查看 filebeat 的输入：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/6b187118ff50bc41d040ef954b607ffe.png\" alt=\"\"></p>\n<p>在这里，你可以应用各种过滤或者设置 Graylog 仪表板去帮助识别大多数比较重要的事件。查看 <a href=\"http://docs.graylog.org/en/2.3/pages/dashboards.html\">Graylog Dashboard</a> 文档，可以了解如何定制你的视图的详细资料。</p>\n<h4 id=\"toc_3\">浏览指标</h4>\n<p>我们的部署通过 grafana 仪表板提供了两种类型的指标：系统指标，包括像 K8s master 和 worker 的 CPU /内存/磁盘使用情况，以及集群指标，包括像从 K8s cAdvisor 端点上收集的容器级指标。</p>\n<p>记住如下的 grafana 的地址和 admin 密码：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae0fd377085c620504890\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\njuju status --format yaml grafana/0 | grep public-address\r\n public-address: &lt;your-grafana-ip&gt;\r\njuju run-action --wait grafana/0 get-admin-password\r\n password: &lt;your-grafana-password&gt;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae0fd377085c620504890-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae0fd377085c620504890-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae0fd377085c620504890-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae0fd377085c620504890-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae0fd377085c620504890-1\"><span class=\"crayon-e\">juju </span><span class=\"crayon-v\">status</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">format </span><span class=\"crayon-e\">yaml </span><span class=\"crayon-v\">grafana</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">grep </span><span class=\"crayon-m\">public</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">address</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae0fd377085c620504890-2\"><span class=\"crayon-e\"> </span><span class=\"crayon-m\">public</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">address</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">your</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">grafana</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">ip</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5ae0fd377085c620504890-3\"><span class=\"crayon-e\">juju </span><span class=\"crayon-v\">run</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">action</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">wait </span><span class=\"crayon-v\">grafana</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">get</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">admin</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">password</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae0fd377085c620504890-4\"><span class=\"crayon-e\"> </span><span class=\"crayon-v\">password</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">your</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">grafana</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">password</span><span class=\"crayon-o\">&gt;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p>在浏览器中输入 <code>http://&lt;your-grafana-ip&gt;:3000</code>，输入管理员用户（admin）和密码（&lt;your-grafana-password&gt;）登入。成功登入后，点击 “Home” 下拉框，选取 “Kubernetes Metrics (via Prometheus)” 去查看集群指标仪表板：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/76a0a9d93a75c76c8033b51957615741.png\" alt=\"\"></p>\n<p>我们也可以通过下拉框切换到 “Node Metrics (via Telegraf) ” 去查看 K8s 主机的系统指标。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/a708ae229aeffef775184db190b97c95.png\" alt=\"\"></p>\n<h3 id=\"toc_4\">另一种方法</h3>\n<p>正如在文章开始的介绍中提到的，我喜欢用 <code>conjure-up</code> 的向导去完成像 Kubernetes 这种复杂软件的部署。现在，我们来看一下 <code>conjure-up</code> 的另一种方法，你可能希望去看到实现相同结果的一些命令行的方法。还有其它的可能已经部署了前面的 CDK，并想去扩展使用上述的 Graylog/Prometheus 组件。不管什么原因你既然看到这了，既来之则安之，继续向下看吧。</p>\n<p>支持 <code>conjure-up</code> 的工具是 <a href=\"https://jujucharms.com/\">Juju</a>。CDK spell 所做的一切，都可以使用 <code>juju</code> 命令行来完成。我们来看一下，如何一步步完成这些工作。</p>\n<h4 id=\"toc_5\">从 Scratch 中启动</h4>\n<p>如果你使用的是 Linux，安装 Juju 很简单，命令如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae0fd3770861915014541\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsudo snap install juju --classic\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae0fd3770861915014541-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae0fd3770861915014541-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae0fd3770861915014541-1\"><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">snap </span><span class=\"crayon-e\">install </span><span class=\"crayon-v\">juju</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-i\">classic</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae0fd3770861915014541-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>对于 macOS，Juju 也可以从 brew 中安装：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae0fd3770864797494525\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nbrew install juju\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae0fd3770864797494525-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae0fd3770864797494525-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae0fd3770864797494525-1\"><span class=\"crayon-e\">brew </span><span class=\"crayon-e\">install </span><span class=\"crayon-i\">juju</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae0fd3770864797494525-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>现在为你选择的云配置一个控制器。你或许会被提示请求一个凭据（用户名密码）：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae0fd3770867358996214\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\njuju bootstrap\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae0fd3770867358996214-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae0fd3770867358996214-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae0fd3770867358996214-1\"><span class=\"crayon-e\">juju </span><span class=\"crayon-i\">bootstrap</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae0fd3770867358996214-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>我们接下来需要基于 CDK 捆绑部署：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae0fd377086a677982189\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\njuju deploy canonical-kubernetes\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae0fd377086a677982189-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae0fd377086a677982189-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae0fd377086a677982189-1\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">deploy </span><span class=\"crayon-v\">canonical</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">kubernetes</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae0fd377086a677982189-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p></p>\n<h4 id=\"toc_6\">从 CDK 开始</h4>\n<p>使用我们部署的 Kubernetes 集群，我们需要去添加 Graylog 和 Prometheus 所需要的全部应用程序：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae0fd377086d757884123\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n## deploy graylog-related applications\r\njuju deploy xenial/apache2\r\njuju deploy xenial/elasticsearch\r\njuju deploy xenial/filebeat\r\njuju deploy xenial/graylog\r\njuju deploy xenial/mongodb\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae0fd377086d757884123-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae0fd377086d757884123-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae0fd377086d757884123-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae0fd377086d757884123-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ae0fd377086d757884123-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae0fd377086d757884123-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ae0fd377086d757884123-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae0fd377086d757884123-1\"><span class=\"crayon-p\">## deploy graylog-related applications</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae0fd377086d757884123-2\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">deploy </span><span class=\"crayon-v\">xenial</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">apache2</span></div><div class=\"crayon-line\" id=\"crayon-5ae0fd377086d757884123-3\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">deploy </span><span class=\"crayon-v\">xenial</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">elasticsearch</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae0fd377086d757884123-4\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">deploy </span><span class=\"crayon-v\">xenial</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">filebeat</span></div><div class=\"crayon-line\" id=\"crayon-5ae0fd377086d757884123-5\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">deploy </span><span class=\"crayon-v\">xenial</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">graylog</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae0fd377086d757884123-6\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">deploy </span><span class=\"crayon-v\">xenial</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">mongodb</span></div><div class=\"crayon-line\" id=\"crayon-5ae0fd377086d757884123-7\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae0fd3770871706552350\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n## deploy prometheus-related applications\r\njuju deploy xenial/grafana\r\njuju deploy xenial/prometheus\r\njuju deploy xenial/telegraf\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae0fd3770871706552350-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae0fd3770871706552350-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae0fd3770871706552350-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae0fd3770871706552350-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ae0fd3770871706552350-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae0fd3770871706552350-1\"><span class=\"crayon-p\">## deploy prometheus-related applications</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae0fd3770871706552350-2\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">deploy </span><span class=\"crayon-v\">xenial</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">grafana</span></div><div class=\"crayon-line\" id=\"crayon-5ae0fd3770871706552350-3\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">deploy </span><span class=\"crayon-v\">xenial</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">prometheus</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae0fd3770871706552350-4\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">deploy </span><span class=\"crayon-v\">xenial</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">telegraf</span></div><div class=\"crayon-line\" id=\"crayon-5ae0fd3770871706552350-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>现在软件已经部署完毕，将它们连接到一起，以便于它们之间可以相互通讯：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae0fd3770874055862716\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n## relate graylog applications\r\njuju relate apache2:reverseproxy graylog:website\r\njuju relate graylog:elasticsearch elasticsearch:client\r\njuju relate graylog:mongodb mongodb:database\r\njuju relate filebeat:beats-host kubernetes-master:juju-info\r\njuju relate filebeat:beats-host kubernetes-worker:jujuu-info\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae0fd3770874055862716-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae0fd3770874055862716-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae0fd3770874055862716-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae0fd3770874055862716-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ae0fd3770874055862716-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae0fd3770874055862716-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ae0fd3770874055862716-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae0fd3770874055862716-1\"><span class=\"crayon-p\">## relate graylog applications</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae0fd3770874055862716-2\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">relate </span><span class=\"crayon-v\">apache2</span><span class=\"crayon-o\">:</span><span class=\"crayon-e\">reverseproxy </span><span class=\"crayon-v\">graylog</span><span class=\"crayon-o\">:</span><span class=\"crayon-e\">website</span></div><div class=\"crayon-line\" id=\"crayon-5ae0fd3770874055862716-3\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">relate </span><span class=\"crayon-v\">graylog</span><span class=\"crayon-o\">:</span><span class=\"crayon-e\">elasticsearch </span><span class=\"crayon-v\">elasticsearch</span><span class=\"crayon-o\">:</span><span class=\"crayon-e\">client</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae0fd3770874055862716-4\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">relate </span><span class=\"crayon-v\">graylog</span><span class=\"crayon-o\">:</span><span class=\"crayon-e\">mongodb </span><span class=\"crayon-v\">mongodb</span><span class=\"crayon-o\">:</span><span class=\"crayon-e\">database</span></div><div class=\"crayon-line\" id=\"crayon-5ae0fd3770874055862716-5\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">relate </span><span class=\"crayon-v\">filebeat</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">beats</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">host </span><span class=\"crayon-v\">kubernetes</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">master</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">juju</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">info</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae0fd3770874055862716-6\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">relate </span><span class=\"crayon-v\">filebeat</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">beats</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">host </span><span class=\"crayon-v\">kubernetes</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">worker</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">jujuu</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">info</span></div><div class=\"crayon-line\" id=\"crayon-5ae0fd3770874055862716-7\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae0fd3770877636701966\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n## relate prometheus applications\r\njuju relate prometheus:grafana-source grafana:grafana-source\r\njuju relate telegraf:prometheus-client prometheus:target\r\njuju relate kubernetes-master:juju-info telegraf:juju-info\r\njuju relate kubernetes-worker:juju-info telegraf:juju-info\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae0fd3770877636701966-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae0fd3770877636701966-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae0fd3770877636701966-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae0fd3770877636701966-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ae0fd3770877636701966-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae0fd3770877636701966-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae0fd3770877636701966-1\"><span class=\"crayon-p\">## relate prometheus applications</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae0fd3770877636701966-2\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">relate </span><span class=\"crayon-v\">prometheus</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">grafana</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">source </span><span class=\"crayon-v\">grafana</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">grafana</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">source</span></div><div class=\"crayon-line\" id=\"crayon-5ae0fd3770877636701966-3\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">relate </span><span class=\"crayon-v\">telegraf</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">prometheus</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">client </span><span class=\"crayon-v\">prometheus</span><span class=\"crayon-o\">:</span><span class=\"crayon-e\">target</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae0fd3770877636701966-4\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">relate </span><span class=\"crayon-v\">kubernetes</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">master</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">juju</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">info </span><span class=\"crayon-v\">telegraf</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">juju</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">info</span></div><div class=\"crayon-line\" id=\"crayon-5ae0fd3770877636701966-5\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">relate </span><span class=\"crayon-v\">kubernetes</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">worker</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">juju</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">info </span><span class=\"crayon-v\">telegraf</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">juju</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">info</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae0fd3770877636701966-6\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>这个时候，所有的应用程序已经可以相互之间进行通讯了，但是我们还需要多做一点配置（比如，配置 apache2 反向代理、告诉 prometheus 如何从 K8s 中取数、导入到 grafana 仪表板等等）：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae0fd377087b310028094\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n## configure graylog applications\r\njuju config apache2 enable_modules=\"headers proxy_html proxy_http\"\r\njuju config apache2 vhost_http_template=\"$(base64 &lt;vhost-tmpl&gt;)\"\r\njuju config elasticsearch firewall_enabled=\"false\"\r\njuju config filebeat \\\r\n logpath=\"/var/log/*.log /var/log/containers/*.log\"\r\njuju config filebeat logstash_hosts=&lt;graylog-ip&gt;\":5044\"\r\njuju config graylog elasticsearch_cluster_name=\"&lt;es-cluster&gt;\"\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae0fd377087b310028094-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae0fd377087b310028094-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae0fd377087b310028094-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae0fd377087b310028094-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ae0fd377087b310028094-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae0fd377087b310028094-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ae0fd377087b310028094-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae0fd377087b310028094-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ae0fd377087b310028094-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae0fd377087b310028094-1\"><span class=\"crayon-p\">## configure graylog applications</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae0fd377087b310028094-2\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">config </span><span class=\"crayon-e\">apache2 </span><span class=\"crayon-v\">enable_modules</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"headers proxy_html proxy_http\"</span></div><div class=\"crayon-line\" id=\"crayon-5ae0fd377087b310028094-3\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">config </span><span class=\"crayon-e\">apache2 </span><span class=\"crayon-v\">vhost_http_template</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"$(base64 &lt;vhost-tmpl&gt;)\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae0fd377087b310028094-4\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">config </span><span class=\"crayon-e\">elasticsearch </span><span class=\"crayon-v\">firewall_enabled</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"false\"</span></div><div class=\"crayon-line\" id=\"crayon-5ae0fd377087b310028094-5\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">config </span><span class=\"crayon-i\">filebeat</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">\\</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae0fd377087b310028094-6\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">logpath</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"/var/log/*.log /var/log/containers/*.log\"</span></div><div class=\"crayon-line\" id=\"crayon-5ae0fd377087b310028094-7\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">config </span><span class=\"crayon-e\">filebeat </span><span class=\"crayon-v\">logstash_hosts</span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">graylog</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">ip</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-s\">\":5044\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae0fd377087b310028094-8\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">config </span><span class=\"crayon-e\">graylog </span><span class=\"crayon-v\">elasticsearch_cluster_name</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"&lt;es-cluster&gt;\"</span></div><div class=\"crayon-line\" id=\"crayon-5ae0fd377087b310028094-9\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae0fd377087e335216392\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n## configure prometheus applications\r\njuju config prometheus scrape-jobs=\"&lt;scraper-yaml&gt;\"\r\njuju run-action --wait grafana/0 import-dashboard \\\r\n dashboard=\"$(base64 &lt;dashboard-json&gt;)\"\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae0fd377087e335216392-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae0fd377087e335216392-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae0fd377087e335216392-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae0fd377087e335216392-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ae0fd377087e335216392-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae0fd377087e335216392-1\"><span class=\"crayon-p\">## configure prometheus applications</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae0fd377087e335216392-2\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">config </span><span class=\"crayon-e\">prometheus </span><span class=\"crayon-v\">scrape</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">jobs</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"&lt;scraper-yaml&gt;\"</span></div><div class=\"crayon-line\" id=\"crayon-5ae0fd377087e335216392-3\"><span class=\"crayon-e\">juju </span><span class=\"crayon-v\">run</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">action</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">wait </span><span class=\"crayon-v\">grafana</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">import</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">dashboard</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">\\</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae0fd377087e335216392-4\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dashboard</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"$(base64 &lt;dashboard-json&gt;)\"</span></div><div class=\"crayon-line\" id=\"crayon-5ae0fd377087e335216392-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>以上的步骤需要根据你的部署来指定一些值。你可以用与 <code>conjure-up</code> 相同的方法得到这些：</p>\n<ul>\n<li><code>&lt;vhost-tmpl&gt;</code>： 从 github 获取我们的示例 <a href=\"https://raw.githubusercontent.com/conjure-up/spells/master/canonical-kubernetes/addons/graylog/steps/01_install-graylog/graylog-vhost.tmpl\">模板</a></li>\n<li><code>&lt;graylog-ip&gt;</code>： <code>juju run --unit graylog/0 'unit-get private-address'</code></li>\n<li><code>&lt;es-cluster&gt;</code>： <code>juju config elasticsearch cluster-name</code></li>\n<li><code>&lt;scraper-yaml&gt;</code>： 从 github 获取我们的示例 <a href=\"https://raw.githubusercontent.com/conjure-up/spells/master/canonical-kubernetes/addons/prometheus/steps/01_install-prometheus/prometheus-scrape-k8s.yaml\">scraper</a> ；<code>[K8S_PASSWORD][20]</code> 和 <code>[K8S_API_ENDPOINT][21]</code> <a href=\"https://github.com/conjure-up/spells/blob/master/canonical-kubernetes/addons/prometheus/steps/01_install-prometheus/after-deploy#L25\">substitute</a> 的正确值</li>\n<li><code>&lt;dashboard-json&gt;</code>： 从 github 获取我们的 <a href=\"https://raw.githubusercontent.com/conjure-up/spells/master/canonical-kubernetes/addons/prometheus/steps/01_install-prometheus/grafana-telegraf.json\">主机</a> 和 <a href=\"https://raw.githubusercontent.com/conjure-up/spells/master/canonical-kubernetes/addons/prometheus/steps/01_install-prometheus/grafana-k8s.json\">k8s</a> 仪表板</li>\n</ul>\n<p>最后，发布 apache2 和 grafana 应用程序，以便于可以通过它们的 web 界面访问：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae0fd3770882895841235\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n## expose relevant endpoints\r\njuju expose apache2\r\njuju expose grafana\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae0fd3770882895841235-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae0fd3770882895841235-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae0fd3770882895841235-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae0fd3770882895841235-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae0fd3770882895841235-1\"><span class=\"crayon-p\">## expose relevant endpoints</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae0fd3770882895841235-2\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">expose </span><span class=\"crayon-e\">apache2</span></div><div class=\"crayon-line\" id=\"crayon-5ae0fd3770882895841235-3\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">expose </span><span class=\"crayon-i\">grafana</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae0fd3770882895841235-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>现在我们已经完成了所有的部署、配置、和发布工作，你可以使用与上面的<strong>浏览日志</strong>和<strong>浏览指标</strong>部分相同的方法去查看它们。</p>\n<h3 id=\"toc_7\">总结</h3>\n<p>我的目标是向你展示如何去部署一个 Kubernetes 集群，很方便地去监视它的日志和指标。无论你是喜欢向导的方式还是命令行的方式，我希望你清楚地看到部署一个监视系统并不复杂。关键是要搞清楚所有部分是如何工作的，并将它们连接到一起工作，通过断开/修复/重复的方式，直到它们每一个都能正常工作。</p>\n<p>这里有一些像 conjure-up 和 Juju 一样非常好的工具。充分发挥这个生态系统贡献者的专长让管理大型软件变得更容易。从一套可靠的应用程序开始，按需定制，然后投入到工作中！</p>\n<p>大胆去尝试吧，然后告诉我你用的如何。你可以在 Freenode IRC 的 <strong>#conjure-up</strong> 和 <strong>#juju</strong> 中找到像我这样的爱好者。感谢阅读！</p>\n<h3 id=\"toc_8\">关于作者</h3>\n<p>Kevin 在 2014 年加入 Canonical 公司，他专注于复杂软件建模。他在 Juju 大型软件团队中找到了自己的位置，他的任务是将大数据和机器学习应用程序转化成可重复的（可靠的）解决方案。</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113875\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113875votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113875\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 2 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"}
{"url_object_id": "9f64c90d116e8593354ebaf19462978b", "title": "DNS 解析器性能比较：CloudFlare vs Google vs Quad9", "create_date": "2018/04/03", "url": "http://blog.jobbole.com/113809/", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/03/912be8d20ca700194c3aced111cc833d1.jpg"], "praise_nums": 2, "comment_nums": 1, "fav_nums": 0, "tags": "IT技术,DNS,Web", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://medium.com/@nykolas.z/dns-resolvers-performance-compared-cloudflare-x-google-x-quad9-x-opendns-149e803734e5\">medium</a>   译文出处：<a target=\"_blank\" href=\"https://www.oschina.net/news/94836/dns-resolvers-performance-compared\">开源中国社区</a>   </div><p>几个月前，我做了一些可用的顶级免费 DNS 解析器之间的性能比较。恰好在 Quad9 发布之后，我试图根据性能决定使用哪一个：Google，OpenDNS，Quad9 等等…</p>\n<p>CloudFlare 是最了解互联网性能的公司之一，最近推出了自己的免费 DNS 解析器。它默认支持基于 TLS 和 HTTPS 上的 DNS。</p>\n<p>现在进行一个更加有趣的测试：Google 的 8.8.8.8，Quad9 的 9.9.9.9 和 CloudFlare 的 1.1.1.1  ，以及OpenDNS 的 208.67.222.222 和一些其他供应商进行比较。</p>\n<h3>供应商测试</h3>\n<p>这些是选择评估的前 8 位免费 DNS 提供商：</p>\n<ul class=\" list-paddingleft-2\">\n<li><strong>Google 8.8.8.8</strong>：私有和未过滤，最受欢迎。</li>\n<li><strong>CloudFlare 1.1.1.1</strong>：私有和未过滤的新玩家。</li>\n<li><strong>Quad 9 9.9.9.9</strong>：私有和安全意识很高的新玩家。</li>\n<li><strong>OpenDNS 208.67.222.222</strong>：阻止恶意网域并提供阻止成人内容的旧玩家。</li>\n<li><strong>Norton DNS 199.85.126.20</strong>：阻止恶意域名并与其防病毒软件集成的旧玩家。</li>\n<li><strong>CleanBrowsing 185.228.168.168</strong>：私有和阻止访问成人内容，新玩家。</li>\n<li><strong>Yandex DNS 77.88.8.7</strong>：阻止恶意域名的旧玩家，在俄罗斯非常受欢迎。</li>\n<li><strong>Comodo DNS 8.26.56.26</strong>：阻止恶意域名的旧玩家。</li>\n</ul>\n<p>这是他们之间关于隐私选项的快速功能分解：</p>\n<p><img src=\"https://static.oschina.net/uploads/space/2018/0402/175742_67ED_3703517.png\" alt=\"\"></p>\n<h3>地点</h3>\n<p>从全球18个地点运行测试。主要使用 VPS 提供商和一些宽带位置尝试从尽可能多的地方查询他们的DNS。它会告诉我们它们的连接程度如何，数据中心的位置以及某个人在该领域的经验有多接近。选择的地点：</p>\n<ul class=\" list-paddingleft-2\">\n<li><strong>北美</strong>：圣地亚哥，洛杉矶，纽约，多伦多，蒙特利尔，亚特兰大，达拉斯，弗里蒙特，旧金山</li>\n<li><strong>欧洲</strong>：伦敦，巴黎，阿姆斯特丹，法兰克福</li>\n<li><strong>亚洲</strong>：东京，新加坡，班加罗尔（印度），悉尼，布里斯班（澳大利亚）</li>\n<li><strong>南美洲</strong>：圣保罗</li>\n</ul>\n<h3>结果摘要</h3>\n<p>测试非常简单，针对不同流行的域名（google, facebook, twitter, gmail 等）在整个一小时内执行了 70 次DNS 查询。对每个位置的所有请求进行平均，以获得每个 DNS 解析程序的整体性能指标。</p>\n<h4>TLDR /摘要</h4>\n<ul class=\" list-paddingleft-2\">\n<li>所有供应商（Yandex 除外）在北美和欧洲表现非常好。他们在美国，加拿大和欧洲的响应时间均小于 15 毫秒。然而，亚洲和南美洲在总体平均数上有所不同，因为一些提供商在那里连接不好。</li>\n<li>CloudFlare 是所有位置中最快的 DNS。它在全球的平均值为 4.98 毫秒，令人惊叹。</li>\n<li>谷歌和 Quad9 分别接近第二和第三。Quad9 在北美和欧洲比谷歌速度快，但在亚洲/南美洲表现不佳。</li>\n<li>CloudFlare 在任何地方都有强大的存在。尽管 Google 和 Quad9 在某些地方的响应时间很高，但CloudFlare 在各个地方都表现良好。</li>\n<li>Yandex 仅适用于俄罗斯。它不像其他提供商那样使用 Anycast，并且在任何地方都非常缓慢。</li>\n<li>CleanBrowsing 是成人（色情）内容过滤的最快速的提供商。</li>\n</ul>\n<h4>全球平均</h4>\n<blockquote><p>＃1 CloudFlare：4.98 ms<br>\n＃2 Google：16.44 ms<br>\n＃3 Quad9：18.25 ms<br>\n＃4 CleanBrowsing：19.14 ms<br>\n＃5 Norton：34.75 ms<br>\n＃6 OpenDNS：46.51 ms<br>\n＃7 Comodo：71.90<br>\n＃8 Yandex：169.91</p></blockquote>\n<h4>北美平均水平</h4>\n<blockquote><p>＃1 CloudFlare：3.93 ms<br>\n＃2 Quad9：7.21 ms<br>\n＃3 Norton：8.32 ms<br>\n＃4 Google：8.53 ms<br>\n＃5 CleanBrowsing：11.83 ms<br>\n＃6 OpenDNS：14.66 ms<br>\n＃7 Comodo：25.91 ms<br>\n＃8 Yandex：119.09 ms</p></blockquote>\n<h4>欧洲平均</h4>\n<blockquote><p>＃1 CloudFlare：2.96<br>\n＃2 Quad9：4.35<br>\n＃3 CleanBrowsing：5.74<br>\n＃4 Google：7.17<br>\n＃5 OpenDNS：8.99<br>\n＃6 Norton：10.35<br>\n＃7 Comodo：13.06<br>\n＃8 Yandex：35.74</p></blockquote>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113809\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113809votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113809\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"}
{"url_object_id": "0d352bb0afad005f2b826e5ebae297ef", "title": "Linux 系统中 sudo 命令的 10 个技巧", "create_date": "2018/04/21", "url": "http://blog.jobbole.com/113912/", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/04/62b7a1070a67d4ff08c977612aa47ef3.jpg"], "praise_nums": 1, "comment_nums": 0, "fav_nums": 0, "tags": "IT技术,Linux", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.linuxtechi.com/quick-tips-sudo-command-linux-systems/\">Pradeep Kumar</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9559-1.html\">Linux中国/szcf-weiya</a>   </div><p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/62b7a1070a67d4ff08c977612aa47ef3.jpg\"></p>\n<h3 id=\"toc_1\">概览</h3>\n<p><code>sudo</code> 表示 “<strong>s</strong>uper<strong>u</strong>ser <strong>do</strong>”。 它允许已验证的用户以其他用户的身份来运行命令。其他用户可以是普通用户或者超级用户。然而，大部分时候我们用它来以提升的权限来运行命令。</p>\n<p><code>sudo</code> 命令与安全策略配合使用，默认安全策略是 <code>sudoers</code>，可以通过文件 <code>/etc/sudoers</code> 来配置。其安全策略具有高度可拓展性。人们可以开发和分发他们自己的安全策略作为插件。</p>\n<h3 id=\"toc_2\">与 su 的区别</h3>\n<p>在 GNU/Linux 中，有两种方式可以用提升的权限来运行命令：</p>\n<ul>\n<li>使用 <code>su</code> 命令</li>\n<li>使用 <code>sudo</code> 命令</li>\n</ul>\n<p><code>su</code> 表示 “<strong>s</strong>witch <strong>u</strong>ser”。使用 <code>su</code>，我们可以切换到 root 用户并且执行命令。但是这种方式存在一些缺点：</p>\n<ul>\n<li>我们需要与他人共享 root 的密码。</li>\n<li>因为 root 用户为超级用户，我们不能授予受控的访问权限。</li>\n<li>我们无法审查用户在做什么。</li>\n</ul>\n<p><code>sudo</code> 以独特的方式解决了这些问题。</p>\n<ol>\n<li>首先，我们不需要妥协来分享 root 用户的密码。普通用户使用他们自己的密码就可以用提升的权限来执行命令。</li>\n<li>我们可以控制 <code>sudo</code> 用户的访问，这意味着我们可以限制用户只执行某些命令。</li>\n<li>除此之外，<code>sudo</code> 用户的所有活动都会被记录下来，因此我们可以随时审查进行了哪些操作。在基于 Debian 的 GNU/Linux 中，所有活动都记录在 <code>/var/log/auth.log</code> 文件中。</li>\n</ol>\n<p>本教程后面的部分阐述了这些要点。</p>\n<h3 id=\"toc_3\">实际动手操作 sudo</h3>\n<p>现在，我们对 sudo 有了大致的了解。让我们实际动手操作吧。为了演示，我使用 Ubuntu。但是，其它发行版本的操作应该是相同的。</p>\n<h4 id=\"toc_4\">允许 sudo 权限</h4>\n<p>让我们添加普通用户为 <code>sudo</code> 用户吧。在我的情形中，用户名为 <code>linuxtechi</code>。</p>\n<p>1) 按如下所示编辑 <code>/etc/sudoers</code> 文件：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae0fd6408ff4153809559\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo visudo\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae0fd6408ff4153809559-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae0fd6408ff4153809559-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae0fd6408ff4153809559-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-i\">visudo</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae0fd6408ff4153809559-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>2) 添加以下行来允许用户 <code>linuxtechi</code> 有 sudo 权限：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae0fd6408fff691546313\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nlinuxtechi ALL=(ALL) ALL\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae0fd6408fff691546313-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae0fd6408fff691546313-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae0fd6408fff691546313-1\"><span class=\"crayon-e\">linuxtechi </span><span class=\"crayon-v\">ALL</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ALL</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">ALL</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae0fd6408fff691546313-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>上述命令中：</p>\n<ul>\n<li><code>linuxtechi</code> 表示用户名</li>\n<li>第一个 <code>ALL</code> 指示允许从任何终端、机器访问 <code>sudo</code></li>\n<li>第二个 <code>(ALL)</code> 指示 <code>sudo</code> 命令被允许以任何用户身份执行</li>\n<li>第三个 <code>ALL</code> 表示所有命令都可以作为 root 执行</li>\n</ul>\n<h4 id=\"toc_5\">以提升的权限执行命令</h4>\n<p>要用提升的权限执行命令，只需要在命令前加上 <code>sudo</code>，如下所示：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae0fd6409003650150749\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo cat /etc/passwd\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae0fd6409003650150749-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae0fd6409003650150749-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae0fd6409003650150749-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">cat</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">etc</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">passwd</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae0fd6409003650150749-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>当你执行这个命令时，它会询问 <code>linuxtechi</code> 的密码，而不是 root 用户的密码。</p>\n<h4 id=\"toc_6\">以其他用户执行命令</h4>\n<p>除此之外，我们可以使用 <code>sudo</code> 以另一个用户身份执行命令。例如，在下面的命令中，用户 <code>linuxtechi</code> 以用户 <code>devesh</code> 的身份执行命令：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae0fd6409007486197793\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo -u devesh whoami\r\n[sudo] password for linuxtechi:\r\ndevesh\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae0fd6409007486197793-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae0fd6409007486197793-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae0fd6409007486197793-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae0fd6409007486197793-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae0fd6409007486197793-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sudo</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">u</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">devesh </span><span class=\"crayon-i\">whoami</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae0fd6409007486197793-2\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">sudo</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">password </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">linuxtechi</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5ae0fd6409007486197793-3\"><span class=\"crayon-i\">devesh</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae0fd6409007486197793-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p></p>\n<h4 id=\"toc_7\">内置命令行为</h4>\n<p><code>sudo</code> 的一个限制是 —— 它无法使用 Shell 的内置命令。例如， <code>history</code> 记录是内置命令，如果你试图用 <code>sudo</code> 执行这个命令，那么会提示如下的未找到命令的错误：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae0fd640900a113679077\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo history\r\n[sudo] password for linuxtechi:\r\nsudo: history: command not found\r\n\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae0fd640900a113679077-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae0fd640900a113679077-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae0fd640900a113679077-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae0fd640900a113679077-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ae0fd640900a113679077-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae0fd640900a113679077-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-i\">history</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae0fd640900a113679077-2\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">sudo</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">password </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">linuxtechi</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5ae0fd640900a113679077-3\"><span class=\"crayon-v\">sudo</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">history</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">command </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">found</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae0fd640900a113679077-4\"> </div><div class=\"crayon-line\" id=\"crayon-5ae0fd640900a113679077-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p><strong>访问 root shell</strong></p>\n<p>为了克服上述问题，我们可以访问 root shell，并在那里执行任何命令，包括 Shell 的内置命令。</p>\n<p>要访问 root shell, 执行下面的命令:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae0fd640900e861415194\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo bash\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae0fd640900e861415194-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae0fd640900e861415194-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae0fd640900e861415194-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-i\">bash</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae0fd640900e861415194-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>执行完这个命令后——您将观察到提示符变为井号（<code>#</code>）。</p>\n<h3 id=\"toc_8\">技巧</h3>\n<p>这节我们将讨论一些有用的技巧，这将有助于提高生产力。大多数命令可用于完成日常任务。</p>\n<h4 id=\"toc_9\">以 sudo 用户执行之前的命令</h4>\n<p>让我们假设你想用提升的权限执行之前的命令，那么下面的技巧将会很有用：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae0fd6409011673055209\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo !4\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae0fd6409011673055209-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae0fd6409011673055209-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae0fd6409011673055209-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sudo</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!</span><span class=\"crayon-cn\">4</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae0fd6409011673055209-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>上面的命令将使用提升的权限执行历史记录中的第 4 条命令。</p>\n<h4 id=\"toc_10\">在 Vim 里面使用 sudo 命令</h4>\n<p>很多时候，我们编辑系统的配置文件时，在保存时才意识到我们需要 root 访问权限来执行此操作。因为这个可能让我们丢失我们对文件的改动。没有必要惊慌，我们可以在 Vim 中使用下面的命令来解决这种情况：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae0fd6409014491891363\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n:w !sudo tee %\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae0fd6409014491891363-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae0fd6409014491891363-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae0fd6409014491891363-1\"><span class=\"crayon-o\">:</span><span class=\"crayon-v\">w</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!</span><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">tee</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae0fd6409014491891363-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>上述命令中：</p>\n<ul>\n<li>冒号 (<code>:</code>) 表明我们处于 Vim 的退出模式</li>\n<li>感叹号 (<code>!</code>) 表明我们正在运行 shell 命令</li>\n<li><code>sudo</code> 和 <code>tee</code> 都是 shell 命令</li>\n<li>百分号 (<code>%</code>) 表明从当前行开始的所有行</li>\n</ul>\n<h4 id=\"toc_11\">使用 sudo 执行多个命令</h4>\n<p>至今我们用 <code>sudo</code> 只执行了单个命令，但我们可以用它执行多个命令。只需要用分号 (<code>;</code>) 隔开命令，如下所示：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae0fd6409018635425431\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo -- bash -c 'pwd; hostname; whoami'\r\n\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae0fd6409018635425431-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae0fd6409018635425431-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae0fd6409018635425431-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae0fd6409018635425431-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sudo</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bash</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'pwd; hostname; whoami'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae0fd6409018635425431-2\"> </div><div class=\"crayon-line\" id=\"crayon-5ae0fd6409018635425431-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>上述命令中</p>\n<ul>\n<li>双连字符 (<code>--</code>) 停止命令行切换</li>\n<li><code>bash</code> 表示要用于执行命令的 shell 名称</li>\n<li><code>-c</code> 选项后面跟着要执行的命令</li>\n</ul>\n<h4 id=\"toc_12\">无密码运行 sudo 命令</h4>\n<p>当第一次执行 <code>sudo</code> 命令时，它会提示输入密码，默认情形下密码被缓存 15 分钟。但是，我们可以避免这个操作，并使用 <code>NOPASSWD</code> 关键字禁用密码认证，如下所示：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae0fd640901d276508722\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nlinuxtechi ALL=(ALL) NOPASSWD: ALL\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae0fd640901d276508722-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae0fd640901d276508722-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae0fd640901d276508722-1\"><span class=\"crayon-e\">linuxtechi </span><span class=\"crayon-v\">ALL</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ALL</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">NOPASSWD</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">ALL</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae0fd640901d276508722-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p></p>\n<h4 id=\"toc_13\">限制用户执行某些命令</h4>\n<p>为了提供受控访问，我们可以限制 <code>sudo</code> 用户只执行某些命令。例如，下面的行只允许执行 <code>echo</code> 和 <code>ls</code> 命令 。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae0fd6409021832997706\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nlinuxtechi ALL=(ALL) NOPASSWD: /bin/echo /bin/ls\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae0fd6409021832997706-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae0fd6409021832997706-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae0fd6409021832997706-1\"><span class=\"crayon-e\">linuxtechi </span><span class=\"crayon-v\">ALL</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ALL</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">NOPASSWD</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">ls</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae0fd6409021832997706-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p></p>\n<h4 id=\"toc_14\">深入了解 sudo</h4>\n<p>让我们进一步深入了解 <code>sudo</code> 命令。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae0fd6409024167159718\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ls -l /usr/bin/sudo\r\n-rwsr-xr-x 1 root root 145040 Jun 13  2017 /usr/bin/sudo\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae0fd6409024167159718-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae0fd6409024167159718-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae0fd6409024167159718-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae0fd6409024167159718-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ls</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sudo</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae0fd6409024167159718-2\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rwsr</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">xr</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">root </span><span class=\"crayon-i\">root</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">145040</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Jun</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">13</span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2017</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">sudo</span></div><div class=\"crayon-line\" id=\"crayon-5ae0fd6409024167159718-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>如果仔细观察文件权限，则发现 <code>sudo</code> 上启用了 setuid 位。当任何用户运行这个二进制文件时，它将以拥有该文件的用户权限运行。在所示情形下，它是 root 用户。</p>\n<p>为了演示这一点，我们可以使用 <code>id</code> 命令，如下所示：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae0fd6409027440432767\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ id\r\nuid=1002(linuxtechi) gid=1002(linuxtechi) groups=1002(linuxtechi)\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae0fd6409027440432767-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae0fd6409027440432767-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae0fd6409027440432767-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae0fd6409027440432767-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">id</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae0fd6409027440432767-2\"><span class=\"crayon-v\">uid</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1002</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">linuxtechi</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">gid</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1002</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">linuxtechi</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">groups</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1002</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">linuxtechi</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5ae0fd6409027440432767-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>当我们不使用 <code>sudo</code> 执行 <code>id</code> 命令时，将显示用户 <code>linuxtechi</code> 的 id。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae0fd640902a087600233\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo id\r\nuid=0(root) gid=0(root) groups=0(root)\r\n\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae0fd640902a087600233-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae0fd640902a087600233-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae0fd640902a087600233-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae0fd640902a087600233-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae0fd640902a087600233-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">id</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae0fd640902a087600233-2\"><span class=\"crayon-v\">uid</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">gid</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">groups</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5ae0fd640902a087600233-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae0fd640902a087600233-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>但是，如果我们使用 <code>sudo</code> 执行 <code>id</code> 命令时，则会显示 root 用户的 id。</p>\n<h3 id=\"toc_15\">结论</h3>\n<p>从这篇文章可以看出 —— <code>sudo</code> 为普通用户提供了更多受控访问。使用这些技术，多用户可以用安全的方式与 GNU/Linux 进行交互。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113912\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113912votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113912\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"}
{"url_object_id": "19e4dca035c34d14347d07439ad43f77", "title": "计算机如何感知大数据——聚类算法", "create_date": "2018/04/04", "url": "http://blog.jobbole.com/113745/", "front_image_url": ["http://wx4.sinaimg.cn/mw690/63918611gy1fpachr4a3bj20rs0daags.jpg"], "praise_nums": 2, "comment_nums": 0, "fav_nums": 1, "tags": "IT技术,图论,大数据,聚类", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/shaoai37\">LynnShaw</a> 翻译。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://medium.freecodecamp.com/how-machines-make-sense-of-big-data-an-introduction-to-clustering-algorithms-4bd97d4fbaba\">Peter Gleeso</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>看看下面这张图片。这是一个不同形状大小的昆虫的集合。花点时间按照相似程度将它们分成几组。</p>\n<p>这不是什么很有技巧性的问题。 我们从把蜘蛛分到一起开始。</p>\n<h6 class=\"section-inner sectionLayout--outsetColumn\" style=\"text-align: center;\"><img src=\"http://wx4.sinaimg.cn/mw690/63918611gy1fpachr4a3bj20rs0daags.jpg\"></h6>\n<h6 style=\"text-align: center;\">图片来自Google图片搜索，标记以便重用</h6>\n<p>做完了吗？虽然这里没有必要有所谓的正确答案，不过你极有可能将这些虫子分成四组。蜘蛛分成一组，蜗牛一组，蝴蝶和蛾子一族，黄蜂和蜜蜂总共三个一组。</p>\n<p class=\"section-inner sectionLayout--outsetColumn\">不算太糟糕，是吧？如果虫子数量是这个的两倍你可能还是会这么分，对吧？如果你有空余的时间——或者对昆虫学的热情——你甚至可能用相同方法对一百年个虫子这样分类。</p>\n<p class=\"section-inner sectionLayout--outsetColumn\">然而对一个机器来说，将十个目标分成多个有意义的群组是个不小的任务，多亏了数学中一个令人费解的分支<a href=\"https://en.wikipedia.org/wiki/Bell_number\">组合数学</a>，它告诉我们将十个昆虫分组共有115975种不同的可能。如果对二十个虫子进行分组，将会有<a href=\"https://www.wolframalpha.com/input/?i=bell%27s+number+%2820%29\">超过五十万亿</a>种不同的可能。</p>\n<p class=\"section-inner sectionLayout--outsetColumn\"> 如果对一百个虫子分类——方案数将是<a href=\"https://www.wolframalpha.com/input/?i=particles+in+universe\">宇宙中粒子的数量</a>的很多倍。多少倍呢？通过我的计算，大概是<a href=\"https://www.wolframalpha.com/input/?i=BellB%5B100%5D+%2F+number+of+particles+in+universe\">5*10的35次方倍</a>。事实上，有<a href=\"https://www.wolframalpha.com/input/?i=BellB%5B100%5D+%2F+googol\">四千万亿googol</a>多种方案（<a href=\"https://www.wolframalpha.com/input/?i=googol\">什么是googol?</a>）。仅仅是一百个目标。</p>\n<p class=\"section-inner sectionLayout--outsetColumn\">而这些方案几乎都是没有意义的——虽然从这些数量异常庞大的可能的选择中，你可以很快地找到为数不多的对虫子分类的有用的方式。</p>\n<p class=\"section-inner sectionLayout--outsetColumn\">我们人类理所当然的可以很快地对大量数据理解并分类。无论是一段文字，或者屏幕上的图像，或是一系列的目标——人类通常可以相当有效地搞清世界给我们的任何数据。</p>\n<p class=\"section-inner sectionLayout--outsetColumn\">鉴于发展人工智能和机器学习的一个关键方面就是让机器迅速理解庞大的输入数据集，那么有什么捷径吗？在这本文中，你将会看到三个聚类算法，机器可以这些算法快速理解大型数据集。这决不是一个详尽的清单——还有很多其他的算法——但这三个算法代表了一个良好的开端！</p>\n<p class=\"section-inner sectionLayout--outsetColumn\">当你想要使用它们的时候，你会得到对于每一个问题的总结，一个总体的功能介绍以及一个更细致的，一步一步实现的例子。我相信在现实中实现对于理解是非常有帮助的。如果你真的<em>很喜欢</em>这些，你会发现最好的学习方式是用笔和纸。加油去吧——没人评判哪种方式更好！</p>\n<h6 class=\"section-inner sectionLayout--outsetColumn\" style=\"text-align: center;\"><img src=\"http://wx3.sinaimg.cn/mw690/63918611gy1fpachstvd8j20m80em762.jpg\"></h6>\n<h6 class=\"section-inner sectionLayout--outsetColumn\" style=\"text-align: center;\">三个整齐的聚类，K=3</h6>\n<h3 id=\"c662\" class=\"graf graf--h3 graf-after--figure\">K-均值聚类</h3>\n<h4 id=\"cf9b\" class=\"graf graf--h4 graf-after--h3\"><strong>适用场景：</strong></h4>\n<p>预先已经知道要分成多少组。</p>\n<h4 id=\"71dc\" class=\"graf graf--h4 graf-after--p\"><strong>如何工作：</strong></h4>\n<p id=\"ad35\" class=\"graf graf--p graf-after--h4\">算法首先将每一个观测点随机地分配到<em>K</em>个类别中的一个，然后计算每一个类别的<em>均值</em>。下一步，在重新计算均值之前算法将每一个点重新分配给均值与该点数据最接近的类别。不断重复这一步直到不需要再重新分配。</p>\n<h4 id=\"6699\" class=\"graf graf--h4 graf-after--p\"><strong>实现例子：</strong></h4>\n<p id=\"cd33\" class=\"graf graf--p graf-after--h4\">考虑有12个足球运动员的一个足球队，这些运动员每个人在本赛季都获得了一定的进球数（3-30之间）。现在我们来将他们分成三个单独的聚类。</p>\n<p class=\"graf graf--p graf-after--h4\"><strong>第一步</strong>需要我们随机地将这些运动员分成三组并计算每组的均值。</p>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae10ac5135cc021240953\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nGroup 1\r\nPlayer A (5 goals), Player B (20 goals), Player C (11 goals) \r\nGroup Mean = (5 + 20 + 11) / 3 = 12\r\n\r\nGroup 2\r\nPlayer D (5 goals), Player E (3 goals), Player F (19 goals)\r\nGroup Mean = 9\r\n\r\nGroup 3\r\nPlayer G (30 goals), Player H (3 goals), Player I (15 goals)\r\nGroup Mean = 16</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae10ac5135cc021240953-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10ac5135cc021240953-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae10ac5135cc021240953-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10ac5135cc021240953-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ae10ac5135cc021240953-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10ac5135cc021240953-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ae10ac5135cc021240953-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10ac5135cc021240953-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ae10ac5135cc021240953-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10ac5135cc021240953-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ae10ac5135cc021240953-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae10ac5135cc021240953-1\"><span class=\"crayon-i\">Group</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10ac5135cc021240953-2\"><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">B</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">20</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">C</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5ae10ac5135cc021240953-3\"><span class=\"crayon-e\">Group </span><span class=\"crayon-v\">Mean</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10ac5135cc021240953-4\"> </div><div class=\"crayon-line\" id=\"crayon-5ae10ac5135cc021240953-5\"><span class=\"crayon-i\">Group</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10ac5135cc021240953-6\"><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">D</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">E</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">F</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">19</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5ae10ac5135cc021240953-7\"><span class=\"crayon-e\">Group </span><span class=\"crayon-v\">Mean</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10ac5135cc021240953-8\"> </div><div class=\"crayon-line\" id=\"crayon-5ae10ac5135cc021240953-9\"><span class=\"crayon-i\">Group</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10ac5135cc021240953-10\"><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">G</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">H</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">I</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5ae10ac5135cc021240953-11\"><span class=\"crayon-e\">Group </span><span class=\"crayon-v\">Mean</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0030 seconds] -->\r\n<p></p>\n<p class=\"graf graf--p graf-after--h4\"><strong>第二步：</strong>对每一个运动员，将它们重新分配到均值离他们最近的组。即，运动员A（进球数5）被分配到第2个组（均值=9）。然后重新计算这几组的均值。</p>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae10ac5135d5185139434\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nGroup 1 (Old Mean = 12)\r\nPlayer C (11 goals) \r\nNew Mean = 11\r\n\r\nGroup 2 (Old Mean = 9)\r\nPlayer A (5 goals), Player D (5 goals), Player E (3 goals), Player H (3 goals)\r\nNew Mean = 4\r\n\r\nGroup 3 (Old Mean = 16)\r\nPlayer G (30 goals), Player I (15 goals), Player B (20 goals), Player F (19 goals)\r\nNew Mean = 21</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae10ac5135d5185139434-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10ac5135d5185139434-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae10ac5135d5185139434-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10ac5135d5185139434-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ae10ac5135d5185139434-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10ac5135d5185139434-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ae10ac5135d5185139434-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10ac5135d5185139434-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ae10ac5135d5185139434-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10ac5135d5185139434-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ae10ac5135d5185139434-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae10ac5135d5185139434-1\"><span class=\"crayon-i\">Group</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">Old </span><span class=\"crayon-v\">Mean</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10ac5135d5185139434-2\"><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">C</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5ae10ac5135d5185139434-3\"><span class=\"crayon-r\">New</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Mean</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10ac5135d5185139434-4\"> </div><div class=\"crayon-line\" id=\"crayon-5ae10ac5135d5185139434-5\"><span class=\"crayon-i\">Group</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">Old </span><span class=\"crayon-v\">Mean</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10ac5135d5185139434-6\"><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">D</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">E</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">H</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5ae10ac5135d5185139434-7\"><span class=\"crayon-r\">New</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Mean</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10ac5135d5185139434-8\"> </div><div class=\"crayon-line\" id=\"crayon-5ae10ac5135d5185139434-9\"><span class=\"crayon-i\">Group</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">Old </span><span class=\"crayon-v\">Mean</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10ac5135d5185139434-10\"><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">G</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">I</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">B</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">20</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">F</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">19</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5ae10ac5135d5185139434-11\"><span class=\"crayon-r\">New</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Mean</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">21</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0032 seconds] -->\r\n<p>不断<strong>重复</strong>第二步直到所有组的均值不再变化。对于这个有些不太好的例子，下一次重复就会达到终止条件。<strong>停止！</strong>现在你已经形成三个聚类的数据集！</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae10ac5135d9138172750\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nGroup 1 (Old Mean = 11)\r\nPlayer C (11 goals), Player I (15 goals)\r\nFinal Mean = 13\r\n\r\nGroup 2 (Old Mean = 4)\r\nPlayer A (5 goals), Player D (5 goals), Player E (3 goals), Player H (3 goals)\r\nFinal Mean = 4\r\n\r\nGroup 3 (Old Mean = 21)\r\nPlayer G (30 goals), Player B (20 goals), Player F (19 goals)\r\nFinal Mean = 23</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae10ac5135d9138172750-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10ac5135d9138172750-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae10ac5135d9138172750-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10ac5135d9138172750-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ae10ac5135d9138172750-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10ac5135d9138172750-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ae10ac5135d9138172750-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10ac5135d9138172750-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ae10ac5135d9138172750-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10ac5135d9138172750-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ae10ac5135d9138172750-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae10ac5135d9138172750-1\"><span class=\"crayon-i\">Group</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">Old </span><span class=\"crayon-v\">Mean</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10ac5135d9138172750-2\"><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">C</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">I</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5ae10ac5135d9138172750-3\"><span class=\"crayon-m\">Final</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Mean</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">13</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10ac5135d9138172750-4\"> </div><div class=\"crayon-line\" id=\"crayon-5ae10ac5135d9138172750-5\"><span class=\"crayon-i\">Group</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">Old </span><span class=\"crayon-v\">Mean</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10ac5135d9138172750-6\"><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">D</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">E</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">H</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5ae10ac5135d9138172750-7\"><span class=\"crayon-m\">Final</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Mean</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10ac5135d9138172750-8\"> </div><div class=\"crayon-line\" id=\"crayon-5ae10ac5135d9138172750-9\"><span class=\"crayon-i\">Group</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">Old </span><span class=\"crayon-v\">Mean</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">21</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10ac5135d9138172750-10\"><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">G</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">B</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">20</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">F</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">19</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5ae10ac5135d9138172750-11\"><span class=\"crayon-m\">Final</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Mean</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">23</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0031 seconds] -->\r\n<p>在这个例子中，聚类可能对应于球员在场上的位置——如后卫、中场和前锋。k-均值在这里使用因为我们合理地预期数据可以分成这三类。</p>\n<p>通过这种方式，给出一系列性能统计数据，机器可以合理地评估任何团体运动中运动员的位置——这对运动分析很有用，对任何其他的将数据集按照预定义的组别进行分类也可以提供相关的见解。</p>\n<h4 id=\"27e9\" class=\"graf graf--h4 graf-after--p\"><strong>细节：</strong></h4>\n<p id=\"7aa0\" class=\"graf graf--p graf-after--h4\">这个算法有一些变体。对聚类进行“seeding”的初始化方法有好几种方式。在这里，我们将每个球员随机分配到一个小组，然后计算出这些组的均值。这会导致初始生成的组之间的均值很接近，致使后面有更多重复步骤。</p>\n<p class=\"graf graf--p graf-after--h4\">另一种方法是初始化每个聚类时只分配一个球员，然后将其它球员分配到最近的聚类。这样返回的聚类比初始化seeding得到的聚类更有意义，降低了变化很大的数据集中的重复性。但是，这种方法可能会减少完成算法所需的迭代次数，因为这些组将花费较少的时间完成收敛。</p>\n<p class=\"graf graf--p graf-after--h4\">K-均值聚类的一个明显的缺点是你必须提供关于你期望找到多少个聚类的<em>先验</em>假设。 有一些方法可以评估一组特定的聚类结果。 例如，聚类内平方和（<em class=\"markup--em markup--p-em\">Within-Cluster  </em><a href=\"https://en.wikipedia.org/wiki/Partition_of_sums_of_squares\"><em>Sum-of-Squares</em></a>）是每个聚类内方差的度量。 聚类效果越好，整体WCSS越低。</p>\n<h3 id=\"acbe\" class=\"graf graf--h3 graf-after--p\">层次聚类</h3>\n<h4 id=\"1eb8\" class=\"graf graf--h4 graf-after--h3\"><strong>什么时候使用：</strong></h4>\n<p>…你希望发掘出你的观测数据之间的潜在关系。</p>\n<p><strong>如何工作：</strong></p>\n<p id=\"6625\" class=\"graf graf--p graf-after--h4\">计算距离矩阵，其中矩阵元素(i,j)的值是观察值i和j之间的距离度量值。 然后，将最接近的两个观察值进行配对并计算其平均值。通过将配对的观测值合并成一个单一的对象，形成一个新的距离矩阵。 从这个距离矩阵中，配对最近的两个观察值并计算它们的平均值。 重复这个过程，直到所有的观察结果合并在一起。</p>\n<p><strong>实例：</strong></p>\n<p id=\"6bb0\" class=\"graf graf--p graf-after--h4\">这是一个关于鲸鱼和海豚物种选择的超简化数据集。作为一名训练有素的生物学家，我可以向您保证，我们通常会使用更多更详细的数据集来<a href=\"https://en.wikipedia.org/wiki/Phylogenetic_tree\">重建系统发生树</a>。 现在我们来看看这六种物种的典型体长。 我们将只使用两个重复的步骤。</p>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae10ac5135df921717771\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSpecies          Initials  Length(m)\r\nBottlenose Dolphin     BD        3.0\r\nRisso's Dolphin        RD        3.6\r\nPilot Whale            PW        6.5\r\nKiller Whale           KW        7.5\r\nHumpback Whale         HW       15.0\r\nFin Whale              FW       20.0</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae10ac5135df921717771-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10ac5135df921717771-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae10ac5135df921717771-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10ac5135df921717771-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ae10ac5135df921717771-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10ac5135df921717771-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ae10ac5135df921717771-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae10ac5135df921717771-1\"><span class=\"crayon-e\">Species          </span><span class=\"crayon-e\">Initials  </span><span class=\"crayon-e\">Length</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">m</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10ac5135df921717771-2\"><span class=\"crayon-e\">Bottlenose </span><span class=\"crayon-e\">Dolphin     </span><span class=\"crayon-i\">BD</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">3.0</span></div><div class=\"crayon-line\" id=\"crayon-5ae10ac5135df921717771-3\"><span class=\"crayon-i\">Risso</span>'<span class=\"crayon-i\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Dolphin        </span><span class=\"crayon-i\">RD</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">3.6</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10ac5135df921717771-4\"><span class=\"crayon-e\">Pilot </span><span class=\"crayon-e\">Whale            </span><span class=\"crayon-i\">PW</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">6.5</span></div><div class=\"crayon-line\" id=\"crayon-5ae10ac5135df921717771-5\"><span class=\"crayon-e\">Killer </span><span class=\"crayon-e\">Whale           </span><span class=\"crayon-i\">KW</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">7.5</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10ac5135df921717771-6\"><span class=\"crayon-e\">Humpback </span><span class=\"crayon-e\">Whale         </span><span class=\"crayon-i\">HW</span><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">15.0</span></div><div class=\"crayon-line\" id=\"crayon-5ae10ac5135df921717771-7\"><span class=\"crayon-e\">Fin </span><span class=\"crayon-e\">Whale              </span><span class=\"crayon-i\">FW</span><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">20.0</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p></p>\n<p class=\"graf graf--p graf-after--h4\"><strong>步骤1：</strong>计算每个物种之间的距离矩阵。在这里，我们将使用<a href=\"https://en.wikipedia.org/wiki/Euclidean_distance\">欧式距离</a>——数据点之间的距离。你可以计算出距离就像在道路图上查看距离图一样。可以通过读取相关行和列的交点处的值来查找任何物种对之间的长度差异。</p>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae10ac5135e2811453608\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n    BD   RD   PW   KW   HW\r\nRD  0.6                    \r\nPW  3.5  2.9               \r\nKW  4.5  3.9  1.0          \r\nHW 12.0 11.4  8.5  7.5     \r\nFW 17.0 16.4 13.5 12.5  5.0</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae10ac5135e2811453608-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10ac5135e2811453608-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae10ac5135e2811453608-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10ac5135e2811453608-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ae10ac5135e2811453608-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10ac5135e2811453608-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae10ac5135e2811453608-1\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">BD   </span><span class=\"crayon-e\">RD   </span><span class=\"crayon-e\">PW   </span><span class=\"crayon-e\">KW   </span><span class=\"crayon-e\">HW</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10ac5135e2811453608-2\"><span class=\"crayon-i\">RD</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.6</span><span class=\"crayon-h\">                    </span></div><div class=\"crayon-line\" id=\"crayon-5ae10ac5135e2811453608-3\"><span class=\"crayon-i\">PW</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">3.5</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">2.9</span><span class=\"crayon-h\">               </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10ac5135e2811453608-4\"><span class=\"crayon-i\">KW</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">4.5</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">3.9</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-h\">          </span></div><div class=\"crayon-line\" id=\"crayon-5ae10ac5135e2811453608-5\"><span class=\"crayon-i\">HW</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11.4</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">8.5</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">7.5</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10ac5135e2811453608-6\"><span class=\"crayon-i\">FW</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16.4</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">13.5</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12.5</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">5.0</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p></p>\n<p id=\"7109\" class=\"graf graf--p graf-after--pre\"><strong>步骤2：</strong>配对两个最接近的物种。在这里，两个最接近的物种是宽吻海豚和灰海豚，平均长度为3.3米。</p>\n<p id=\"d409\" class=\"graf graf--p graf-after--p\"><strong>重复</strong>步骤1重新计算距离矩阵，但是这次将宽吻海豚和灰海豚合并成长度为3.3m的单个对象。</p>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae10ac5135e6129638672\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n    [BD, RD]   PW   KW   HW\r\nPW       3.2               \r\nKW       4.2   1.0          \r\nHW      11.7   8.5  7.5     \r\nFW      16.7  13.5 12.5  5.0</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae10ac5135e6129638672-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10ac5135e6129638672-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae10ac5135e6129638672-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10ac5135e6129638672-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ae10ac5135e6129638672-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae10ac5135e6129638672-1\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">BD</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">RD</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">   </span><span class=\"crayon-e\">PW   </span><span class=\"crayon-e\">KW   </span><span class=\"crayon-e\">HW</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10ac5135e6129638672-2\"><span class=\"crayon-i\">PW</span><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">3.2</span><span class=\"crayon-h\">               </span></div><div class=\"crayon-line\" id=\"crayon-5ae10ac5135e6129638672-3\"><span class=\"crayon-i\">KW</span><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">4.2</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-h\">          </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10ac5135e6129638672-4\"><span class=\"crayon-i\">HW</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">11.7</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">8.5</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">7.5</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line\" id=\"crayon-5ae10ac5135e6129638672-5\"><span class=\"crayon-i\">FW</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">16.7</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">13.5</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12.5</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">5.0</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p></p>\n<p id=\"77af\" class=\"graf graf--p graf-after--pre\"><strong>接下来</strong>，用这个新距离矩阵重复步骤2。现在，距离最小的是领航鲸与逆戟鲸，所以我们计算他们的平均——7.0米。</p>\n<p class=\"graf graf--p graf-after--p\"><strong>然后</strong>，我们重复第1步——重新计算距离矩阵，但是现在我们已经将领航鲸与逆戟鲸合并成了一个长度为7.0米的单个对象。</p>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae10ac5135e9599433349\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n         [BD, RD] [PW, KW]   HW\r\n[PW, KW]      3.7              \r\nHW           11.7      8.0     \r\nFW           16.7     13.0   5.0</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae10ac5135e9599433349-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10ac5135e9599433349-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae10ac5135e9599433349-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10ac5135e9599433349-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae10ac5135e9599433349-1\"><span class=\"crayon-h\">         </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">BD</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">RD</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">PW</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">KW</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">   </span><span class=\"crayon-i\">HW</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10ac5135e9599433349-2\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">PW</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">KW</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">3.7</span><span class=\"crayon-h\">              </span></div><div class=\"crayon-line\" id=\"crayon-5ae10ac5135e9599433349-3\"><span class=\"crayon-i\">HW</span><span class=\"crayon-h\">           </span><span class=\"crayon-cn\">11.7</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">8.0</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10ac5135e9599433349-4\"><span class=\"crayon-i\">FW</span><span class=\"crayon-h\">           </span><span class=\"crayon-cn\">16.7</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">13.0</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">5.0</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p></p>\n<p id=\"da48\" class=\"graf graf--p graf-after--pre\"><strong>接下来</strong>，我们用这个距离矩阵重复步骤2。最小距离是两个合并对象之间的（3.7米）——现在我们将它们合并成一个更大的对象，并取平均值（即5.2米）。</p>\n<p class=\"graf graf--p graf-after--p\"><strong>然后</strong>，我们重复步骤1并计算一个新的距离矩阵，合并了宽吻海豚和灰海豚与领航鲸与逆戟鲸。</p>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae10ac5135ed145588384\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n   [[BD, RD] , [PW, KW]]    HW\r\nHW                   9.8    \r\nFW                  14.8   5.0</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae10ac5135ed145588384-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10ac5135ed145588384-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae10ac5135ed145588384-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae10ac5135ed145588384-1\"><span class=\"crayon-h\">   </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">BD</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">RD</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">PW</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">KW</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">    </span><span class=\"crayon-e\">HW</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10ac5135ed145588384-2\"><span class=\"crayon-i\">HW</span><span class=\"crayon-h\">                   </span><span class=\"crayon-cn\">9.8</span><span class=\"crayon-h\">    </span></div><div class=\"crayon-line\" id=\"crayon-5ae10ac5135ed145588384-3\"><span class=\"crayon-i\">FW</span><span class=\"crayon-h\">                  </span><span class=\"crayon-cn\">14.8</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">5.0</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p></p>\n<p id=\"cf09\" class=\"graf graf--p graf-after--pre\"><strong>接下来</strong>，我们重复步骤2。最小的距离（5.0米）在座头鲸与长须鲸之间，所以我们将它们合并成一个单一的对象，取平均值（17.5米）。</p>\n<p id=\"a88d\" class=\"graf graf--p graf-after--p\"><strong>然后</strong>，返回步骤1——计算距离矩阵，座头鲸与长须鲸已经合并。</p>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae10ac5135f1903966402\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n         [[BD, RD] , [PW, KW]]\r\n[HW, FW]                  12.3</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae10ac5135f1903966402-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10ac5135f1903966402-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae10ac5135f1903966402-1\"><span class=\"crayon-h\">         </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">BD</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">RD</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">PW</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">KW</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10ac5135f1903966402-2\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">HW</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">FW</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">                  </span><span class=\"crayon-cn\">12.3</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p></p>\n<p class=\"graf graf--p graf-after--p\"><strong>最后</strong>，我们重复步骤2——在这个矩阵中只有一个距离（12.3米），我们把所有东西都放在一个大对象中，现在我们可以停下来了！我们来看看最后的合并对象：</p>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae10ac5135f4572272822\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[[[BD, RD],[PW, KW]],[HW, FW]]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae10ac5135f4572272822-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae10ac5135f4572272822-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">BD</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">RD</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">PW</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">KW</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">HW</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">FW</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p></p>\n<p class=\"graf graf--p graf-after--p\">它有一个嵌套的结构（可以认为是<a href=\"http://json.org/example.html\">JSON</a>），可以把它绘制成一个树状的图形或者树形图。 它读取的方式与家谱相同。 两个观察结果在树上离得越近，就被认为是更相似或更密切相关的。</p>\n<div class=\"aspectRatioPlaceholder is-locked\"> <img src=\"http://wx4.sinaimg.cn/mw690/63918611gy1fpachtrft4j20dc0dc3yh.jpg\"></div>\n<p class=\"graf graf--p graf-after--p\">在<a href=\"http://www.r-fiddle.org/#\">R-Fiddle.org</a>上生成一个简单的树状图</p>\n<p id=\"e2dc\" class=\"graf graf--p graf-after--figure\">树状图的结构使我们能够深入了解数据集的结构。在我们的例子中，我们看到两个主要分支，一个分支是 HW 和 FW，另一个是 BD、RD、PW、KW。</p>\n<p id=\"5b08\" class=\"graf graf--p graf-after--p\">在进化生物学中，具有更多样本和测量的更大的数据集以这种方式被用来推断它们之间的分类关系。 除了生物学之外，层次聚类在数据挖掘和机器学习环境中也有应用。</p>\n<p id=\"a111\" class=\"graf graf--p graf-after--p\">很酷的是，这种方法不需要假设你正在寻找的聚类数量。 您可以通过在给定高度“切割”树来将返回的树形图划分为聚类。 这个高度可以通过多种方式进行选择，具体取决于你希望对数据进行聚类的分辨率。</p>\n<p id=\"c890\" class=\"graf graf--p graf-after--p\">例如，从上面的树状图可以看出，如果我们在高度为10的情况下绘制一条水平线，我们就会将两条主要分支分割，将树状图分成两个子图。 如果我们在高度= 2切割，树状图就被分成三个聚类。</p>\n<p><strong>细节：</strong></p>\n<p id=\"a2ce\" class=\"graf graf--p graf-after--h4\">关于层次聚类算法可以出现的变化，基本上有三个方面。</p>\n<p class=\"graf graf--p graf-after--h4\">最根本的是方法——在这里，我们使用了一个<em>凝聚</em>的过程，我们从单个数据点开始，并将它们迭代地聚集在一起，直到剩下一个大聚类。 另一种（但是计算量更大）的方法是从一个大聚类开始，然后将数据分成越来越小的聚类，直到剩下孤立的数据点为止。</p>\n<p class=\"graf graf--p graf-after--h4\">还有一系列的方法可以用来计算距离矩阵。 很多情况下，欧几里得距离（参考毕达哥拉斯定理）就足够了，但是在某些情况下还有其他可能更适用的选择。</p>\n<p class=\"graf graf--p graf-after--h4\">最后，连接标准也可以变化。 聚类根据彼此之间的距离而相互连接，但是我们定义“近”的方式是灵活的。 在上面的例子中，我们测量了每个组的平均值（或“质心”）之间的距离，并将最近的组进行配对。 但是， 你可能想要使用其他的定义。</p>\n<p class=\"graf graf--p graf-after--h4\">例如，每个聚类由多个离散点组成。 我们可以将两个聚类之间的距离定义为任意点之间的最小（或最大）距离——如下图所示。 还有其他方法来定义连接标准，它们可能适用于不同的环境。</p>\n<p class=\"graf graf--p graf-after--h4\"><img src=\"http://wx2.sinaimg.cn/mw690/63918611gy1fpachuzciuj20m80cgmyu.jpg\"></p>\n<p class=\"graf graf--p graf-after--h4\" style=\"text-align: center;\">红/蓝：形心连接；红色/绿色：最少连接；绿/蓝：最大连接</p>\n<h3 id=\"b664\" class=\"graf graf--h3 graf-after--figure\">图社区发现</h3>\n<h4 id=\"f884\" class=\"graf graf--h4 graf-after--h3\"><strong>什么时候使用：</strong></h4>\n<p id=\"7a65\" class=\"graf graf--p graf-after--h4\">…你可以将数据表示为网络或“图”的时候。</p>\n<h4 id=\"71dc\" class=\"graf graf--h4 graf-after--p\"><strong>如何工作：</strong></h4>\n<p id=\"6e96\" class=\"graf graf--p graf-after--h4\">图中的社区通常被定义为与网络其余部分相比，彼此连接更多的顶点的子集。 存在各种算法来基于更具体的定义来识别社区。 算法包括但不限于：Edge Betweenness，Modularity-Maximsation，Walktrap，Clique Percolation，Leading Eigenvector …</p>\n<h4 id=\"6699\" class=\"graf graf--h4 graf-after--p\"><strong>实现例子：</strong></h4>\n<p id=\"6cc8\" class=\"graf graf--p graf-after--h4\"><a href=\"https://en.wikipedia.org/wiki/Graph_theory\">图论</a>或网络的数学研究是数学的一个有趣的分支，它让我们将复杂系统建模为由“线”（或边）连接的“点”（或顶点）的抽象集合。</p>\n<p id=\"a226\" class=\"graf graf--p graf-after--p\">最直观的案例研究也许就是社交网络了。在这里，顶点代表人，边连接的是朋友/关注者的顶点。 然而，如果你能证明一个方法可以有意义地连接不同的部分，任何系统都可以被建模为一个网络。 图论中聚类的创新应用包括从图像数据中提取特征，分析基因调控网络。</p>\n<p id=\"30e4\" class=\"graf graf--p graf-after--p\">作为一个入门级的例子，看看这个快速组合在一起的图。 它显示了我最近访问过的八个网站，根据它们各自的维基百科文章是否彼此连接而连接在一起。 您可以手动组合这些数据，但是对于大型项目，编写Python脚本执行相同的操作要快得多。<a href=\"https://raw.githubusercontent.com/pg0408/Medium-articles/master/graph_maker.py\">这是我之前写的一个</a>。</p>\n<p id=\"3c6b\" class=\"graf graf--p graf-after--figure\"><img src=\"http://wx2.sinaimg.cn/mw690/63918611gy1fpachw50t6j20et093gm1.jpg\"></p>\n<p class=\"graf graf--p graf-after--figure\">根据其社区成员对顶点进行着色，并根据其中心位置来确定大小。 看看Google和Twitter是最中心的吧？</p>\n<p class=\"graf graf--p graf-after--p\">而且，这些聚类在现实世界中也很有意义（一直一个重要的性能指标）。黄色的顶点通常是参考/搜索网站；蓝色顶点全部用于在线发布（文章，推文或代码）；红色的顶点包括YouTube，因为Youtube是由前PayPal员工创建的。 机器推论的不错！</p>\n<p class=\"graf graf--p graf-after--p\">除了作为有用的大型系统可视化的方式之外，网络的真正威力是其数学分析。 让我们开始把我们的这张网络图片变成一种更加数学的格式。 以下是网络的邻接矩阵。</p>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae10ac5135fc119645362\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n         GH Gl  M  P  Q  T  W  Y\r\nGitHub    0  1  0  0  0  1  0  0  \r\nGoogle    1  0  1  1  1  1  1  1\r\nMedium    0  1  0  0  0  1  0  0\r\nPayPal    0  1  0  0  0  1  0  1\r\nQuora     0  1  0  0  0  1  1  0\r\nTwitter   1  1  1  1  1  0  0  1\r\nWikipedia 0  1  0  0  1  0  0  0\r\nYouTube   0  1  0  1  0  1  0  0</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae10ac5135fc119645362-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10ac5135fc119645362-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae10ac5135fc119645362-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10ac5135fc119645362-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ae10ac5135fc119645362-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10ac5135fc119645362-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ae10ac5135fc119645362-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10ac5135fc119645362-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ae10ac5135fc119645362-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae10ac5135fc119645362-1\"><span class=\"crayon-h\">         </span><span class=\"crayon-e\">GH </span><span class=\"crayon-i\">Gl</span><span class=\"crayon-h\">  </span><span class=\"crayon-i\">M</span><span class=\"crayon-h\">  </span><span class=\"crayon-i\">P</span><span class=\"crayon-h\">  </span><span class=\"crayon-i\">Q</span><span class=\"crayon-h\">  </span><span class=\"crayon-i\">T</span><span class=\"crayon-h\">  </span><span class=\"crayon-i\">W</span><span class=\"crayon-h\">  </span><span class=\"crayon-i\">Y</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10ac5135fc119645362-2\"><span class=\"crayon-i\">GitHub</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5ae10ac5135fc119645362-3\"><span class=\"crayon-i\">Google</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10ac5135fc119645362-4\"><span class=\"crayon-i\">Medium</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line\" id=\"crayon-5ae10ac5135fc119645362-5\"><span class=\"crayon-i\">PayPal</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10ac5135fc119645362-6\"><span class=\"crayon-i\">Quora</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line\" id=\"crayon-5ae10ac5135fc119645362-7\"><span class=\"crayon-i\">Twitter</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10ac5135fc119645362-8\"><span class=\"crayon-i\">Wikipedia</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line\" id=\"crayon-5ae10ac5135fc119645362-9\"><span class=\"crayon-i\">YouTube</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0030 seconds] -->\r\n<p></p>\n<p id=\"7ad5\" class=\"graf graf--p graf-after--pre\">每行和每列交点处的值记录该对顶点之间是否存在边。例如，Medium和Twitter之间存在一条边（惊喜！），所以它们的行/列相交的值是1。同样，Medium和PayPal之间没有边，所以它们行/列交点的值为0。</p>\n<p id=\"fd3d\" class=\"graf graf--p graf-after--p\">在邻接矩阵内进行编码就会得到这个网络的所有属性——它给了我们解锁各种有价值见解的钥匙。首先，将任意列（或行）相加，就可以得出每个顶点的度数——即连接了多少个顶点。通常用字母<em>k</em>表示。</p>\n<p id=\"7634\" class=\"graf graf--p graf-after--p\">同样，将每个顶点的度数相加并除以2得到L，即网络中边（或“连接”）的数量。行数/列数即网络中顶点（或“节点”）的数量，用<em>N</em>表示。</p>\n<p id=\"bc6b\" class=\"graf graf--p graf-after--p\">知道<em>k</em>，<em>L</em>，<em>N</em>和邻接矩阵<em>A</em>中每个单元的值，就可以计算任意给定的网络聚类的<em><a href=\"https://en.wikipedia.org/wiki/Modularity_%28networks%29\">模块性</a></em>。</p>\n<p id=\"facf\" class=\"graf graf--p graf-after--p\">假设我们已经将网络聚类成了一些社区。我们可以使用模块性评分来评估这个聚类的“质量”。更高的分数将表明我们已经把网络分成了“准确”的社区，而低分表明我们的聚类更随机。下面的图片说明了这一点。</p>\n<figure id=\"b803\" class=\"graf graf--figure graf-after--p\">\n<figcaption class=\"imageCaption\"><img src=\"http://wx4.sinaimg.cn/mw690/63918611gy1fpachxk96wj20m80aggnj.jpg\"></figcaption>\n<figcaption class=\"imageCaption\">模块性是衡量分区“质量”的指标。</figcaption>\n</figure>\n<p id=\"e812\" class=\"graf graf--p graf-after--figure\">模块性可以使用下面的公式计算：</p>\n<p id=\"4d1a\" class=\"graf graf--p graf-after--figure\"><img src=\"http://wx1.sinaimg.cn/mw690/63918611gy1fpachz41ulj20m8089t94.jpg\"></p>\n<p class=\"graf graf--p graf-after--figure\">这个公示包含相当数量的数学知识，但我们可以一点一点地分解它，使它更好理解。</p>\n<p class=\"graf graf--p graf-after--p\"><em>M</em>当然是我们正在计算的——模块性。</p>\n<p class=\"graf graf--p graf-after--p\">1/2<em>L</em>告诉我们把后面所有的东西除以2<em>L</em>，即网络中边的数量的两倍。到现在为止，一切都很好理解。</p>\n<p class=\"graf graf--p graf-after--figure\"><strong>Σ</strong>符号告诉我们对右边的所有东西求和，并迭代邻接矩阵<em>A</em>中的每一行和列。对于那些不熟悉求和符号的人来说，<em>i，j = 1</em>和<em>N</em>的作用非常像编程中的嵌套for循环。在Python中，你可以这样写：</p>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae10ac513601897289839\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsum = 0\r\n\r\nfor i in range(1,N):\r\n    for j in range(1,N):\r\n        ans = #stuff with i and j as indices\r\n        sum += ans</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae10ac513601897289839-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10ac513601897289839-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae10ac513601897289839-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10ac513601897289839-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ae10ac513601897289839-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10ac513601897289839-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae10ac513601897289839-1\"><span class=\"crayon-v\">sum</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10ac513601897289839-2\"> </div><div class=\"crayon-line\" id=\"crayon-5ae10ac513601897289839-3\"><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">range</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">N</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10ac513601897289839-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">range</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">N</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5ae10ac513601897289839-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">ans</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#stuff with i and j as indices</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10ac513601897289839-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">sum</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ans</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p></p>\n<p class=\"graf graf--p graf-after--figure\"><code class=\"markup--code markup--p-code\">那么#stuff with i and j</code> 具体是什么？</p>\n<p id=\"1f91\" class=\"graf graf--p graf-after--p\">括号里的东西告诉我们从<em>A_ij</em>中减去<em>（k_i k_j）/ 2L</em>。</p>\n<p id=\"4555\" class=\"graf graf--p graf-after--p\"><em>A_ij</em>是邻接矩阵中第<em>i</em>行第<em>j</em>列的值。</p>\n<p id=\"1ca6\" class=\"graf graf--p graf-after--p\"><em>k_i</em>和<em>k_j</em>的值是每个顶点的度数——通过将第<em>i</em>行和第<em>j</em>列中的项分别相加而得到。将它们相乘并除以<em>2L</em>得到如果网络是随机分布的顶点<em>i</em>和<em>j</em>之间的期望的边数。</p>\n<p class=\"graf graf--p graf-after--p\">总的来说，括号中的项表示网络的真实结构和随机重组的预期结构之间的差异。研究这个值表明，当<em>A_ij = 1，（k_i k_j）/ 2L</em>小的时候，它返回最大值。这意味着如果在顶点<em>i</em>和<em>j</em>之间存在“非预期”边缘，我们会看到更大的值。</p>\n<p class=\"graf graf--p graf-after--p\">最后，我们将括号中的项和后面几个符号相乘。</p>\n<p class=\"graf graf--p graf-after--p\"><em>δc_i</em>，<em>c_j</em>就是有名的 <em class=\"markup--em markup--p-em\">Kronecker-delta </em><em>函数</em>。 这里是其Python解释：</p>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae10ac513605917757281\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef Kronecker_Delta(ci, cj):\r\n    if ci == cj:\r\n        return 1\r\n    else:\r\n        return 0\r\n\r\nKronecker_Delta(\"A\",\"A\")    #returns 1\r\nKronecker_Delta(\"A\",\"B\")    #returns 0</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae10ac513605917757281-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10ac513605917757281-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae10ac513605917757281-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10ac513605917757281-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ae10ac513605917757281-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10ac513605917757281-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ae10ac513605917757281-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10ac513605917757281-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae10ac513605917757281-1\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">Kronecker_Delta</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ci</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cj</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10ac513605917757281-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ci</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cj</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5ae10ac513605917757281-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10ac513605917757281-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">else</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5ae10ac513605917757281-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10ac513605917757281-6\"> </div><div class=\"crayon-line\" id=\"crayon-5ae10ac513605917757281-7\"><span class=\"crayon-e\">Kronecker_Delta</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"A\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"A\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">    </span><span class=\"crayon-p\">#returns 1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10ac513605917757281-8\"><span class=\"crayon-e\">Kronecker_Delta</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"A\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"B\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">    </span><span class=\"crayon-p\">#returns 0</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p></p>\n<p class=\"graf graf--p graf-after--p\">是的——这真的很简单。Kronecker-delta函数有两个参数，如果相同则返回1，否则返回0。</p>\n<p class=\"graf graf--p graf-after--p\">这意味着如果顶点i和j已经被放入同一个聚类中，则δc_i，c_j = 1。否则，如果它们在不同的聚类中，则该函数返回0。</p>\n<p class=\"graf graf--p graf-after--p\">我们用这个Kronecker-delta函数乘以括号中的项，我们发现对于嵌套总和Σ，当分配给同一个聚类很多“非预期”的连接顶点的边时，其结果是最高的。因此，模块性是衡量图如何聚类到不同社区中的一种衡量标准。</p>\n<p id=\"7643\" class=\"graf graf--p graf-after--p\">除以<em>2L</em>这一操作将模块性的上限值界定为1。模块性分数接近或低于0表示网络的当前聚类实际上是无用的。模块性值越高，网络分散到不同社区的聚类越好。通过最大化模块性，我们可以找到聚类网络的最佳方式。</p>\n<p id=\"4f28\" class=\"graf graf--p graf-after--p\">请注意，我们必须预先定义图形如何聚类，以找出聚类实际上的“好”。不幸的是，使用暴力对图的每一种可能的聚类方式进行计算，以找到<br>\n具有最高模块性分数的方式，即使是在有限样本大小的情况下也是不可能的。</p>\n<p class=\"graf graf--p graf-after--p\"><a href=\"https://en.wikipedia.org/wiki/Partition_of_a_set#Counting_partitions\">组合学</a>告诉我们，对于只有8个顶点的网络，有4140种不同的聚类方式。 规模两倍的16个顶点的网络将有超过一百亿种可能的聚集顶点的方式。再次将网络加倍（对一个非常适中的32个顶点）将会产生128 septillion （128*10^24）种可能的方式，而且有八十个顶点的网络的聚类方式将比<a href=\"https://www.wolframalpha.com/input/?i=991267988808424794443839434655920239360814764000951599022939879419136287216681744888844&amp;lk=1&amp;rawformassumption=%22ClashPrefs%22+-%3E+%7B%22Math%22%7D\">宇宙中可观察的原子数还多</a>。</p>\n<p class=\"graf graf--p graf-after--p\">所以，我们不得不转向一种<em>启发式的</em>方法，该方法在评估可以产生最高模块性分数的聚类方面做得相当不错，而不是尝试每一种可能性。 这是一种叫Fast-Greedy Modularity-Maximization的算法，它有点类似于上面描述的凝聚层次聚类算法。 “Mod-Max”不是根据距离进行合并，而是根据模块性的变化来合并。它是这样工作的：</p>\n<p id=\"db81\" class=\"graf graf--p graf-after--p\"><strong>首先</strong>将每个顶点分配到自己的社区，然后计算整个网络的模块性。</p>\n<p id=\"80a1\" class=\"graf graf--p graf-after--p\"><strong>第一步</strong>要求每一个社区至少被一条单边连接，如果两个社区合并为一个，算法计算模块性的变化结果<em>ΔM</em>。</p>\n<p id=\"09cd\" class=\"graf graf--p graf-after--p\">然后，<strong>步骤2</strong>将使得<em>ΔM</em>增加最多的一对社区合并。为这个聚类计算新的模块性<em>M</em>，并记录下来。</p>\n<p id=\"8228\" class=\"graf graf--p graf-after--p\"><strong>重复</strong>步骤1和2——每次合并产生最大<em>ΔM</em>增益的社区，然后记录新的聚类模式及其相关的模块性评分<em>M</em>。</p>\n<p id=\"80a6\" class=\"graf graf--p graf-after--p\">当所有的顶点被分成一个大聚类时<strong>停下来</strong>。现在，算法检查它整个过程的记录，并确定返回最高值<em>M</em>的聚类模式。这就是返回的社区结构。</p>\n<p><strong>细节：</strong></p>\n<p id=\"37cf\" class=\"graf graf--p graf-after--h4\">这需要进行的计算太多了，至少对于我们人类来说。图论中有丰富的计算难题，通常是NP-hard问题，但它也具有难以置信的潜力，为复杂的系统和数据集提供有价值的见解。与Larry Page同名的PageRank算法——帮助Google在不到一代人的时间里从初创阶段发展到了几乎统治世界——完全基于图论。</p>\n<p id=\"8eec\" class=\"graf graf--p graf-after--p\">社区发现是当前图论研究的一个焦点问题，模块性最大化有许多替代方案，虽然有用，但也有一些缺点。</p>\n<p id=\"7379\" class=\"graf graf--p graf-after--p\">一开始，其聚集的方法往往将小而明确的社区吞并为大的社区。 这就是所谓的分辨率限制——算法不会在一定大小以内找到社区。 另一个挑战是，Mod-Max方法实际上倾向于产生许多具有类似的高模块性分数组成的“高原”，而不是一个独特的，易于到达的全局高峰值，这导致有时候难以确定最大分数。</p>\n<p id=\"3c5a\" class=\"graf graf--p graf-after--p\">其他算法使用不同的方式来定义和处理社区发现。<em class=\"markup--em markup--p-em\">Edge-Betweenness</em>是一个分裂的算法，从所有顶点分组在一个大聚类开始。持续迭代去除网络中最不重要的边，直到所有的顶点都被分开。这个过程产生了一个层级结构，类似的顶点在层级结构中更接近。</p>\n<p id=\"dd08\" class=\"graf graf--p graf-after--p\">另一种算法是<em class=\"markup--em markup--p-em\">Clique Percolation</em>，它考虑了图社区之间可能的重叠。 还有另一组算法是基于图上的<a href=\"https://en.wikipedia.org/wiki/Random_walk\">随机漫步</a>，然后是<em><a href=\"https://en.wikipedia.org/wiki/Spectral_clustering\">谱聚类</a></em>方法，它从邻接矩阵和由其导出的其它矩阵的特征分解开始研究。这些方法被用于例如计算机视觉等领域的特征提取。</p>\n<p id=\"b391\" class=\"graf graf--p graf-after--p\">给每个算法提供一个深入的实例，这已经远远超出了本文的范围。我想说的是，这是一个活跃的研究领域，它提供了强大的方法来理解数据，即使在十年前还是个非常困难的过程。</p>\n<h3 id=\"6ec6\" class=\"graf graf--h3 graf-after--p\">结论</h3>\n<p id=\"4fee\" class=\"graf graf--p graf-after--h3\">希望这篇文章能够让你更好地理解机器如何理解大数据。未来瞬息万变，其中许多变化将由在下一代或两代中的产生的技术所驱动。</p>\n<p id=\"e236\" class=\"graf graf--p graf-after--p\">正如介绍中所概述的，机器学习是一个雄心勃勃的研究领域，其中大量复杂的问题需要尽可能准确和高效地解决。对于我们人类来说任何容易完成的任务都需要机器采取创新的解决方案。</p>\n<p id=\"49ba\" class=\"graf graf--p graf-after--p graf--trailing\">这个领域内还有很大的进步空间，谁来贡献下一个突破的想法，无疑将会得到丰厚的回报。 也许读了这篇文章的某个人就会发明下一个强大的算法？所有伟大的想法都必须从某处开始！</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113745\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113745votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113745\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/shaoai37\">LynnShaw</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/shaoai37\">\r\n\t\t\t<img src=\"http://www.jobbole.com/wp-content/uploads/avatars/104743/4e04a90ce037ac8e7d76fe8ac03d6610-bpthumb.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            微博：@萧萧萧宁        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/shaoai37\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/shaoai37/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/shaoai37/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 35</a>        </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"}
{"url_object_id": "3de2dfc429d04bf285e94ece0ab02d8d", "title": "15 分钟参透比特币和区块链", "create_date": "2018/04/10", "url": "http://blog.jobbole.com/111954/", "front_image_url": ["http://wx3.sinaimg.cn/mw690/7cc829d3gy1fq7lkjvcdmj20sd0g445z.jpg"], "praise_nums": 4, "comment_nums": 2, "fav_nums": 3, "tags": "IT技术,区块链,比特币", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://mp.weixin.qq.com/s/JEkjYdvRw2x3PzxKDR7FQQ\">来自 ChenJunXuan 的投稿</a>   </div><div>\n<blockquote><p>区块链就是比特币世界这个村子的账本，谁挖到矿，谁就有权在这个账本翻开新的一页，并在新的一页记下“X年X日，本村某某挖矿得到比特币一枚，并得到奖励的手续费若干”。</p></blockquote>\n<p><img class=\"alignnone\" src=\"http://wx3.sinaimg.cn/mw690/7cc829d3gy1fq7lkjvcdmj20sd0g445z.jpg\" width=\"690\" height=\"392\"></p>\n<p>比特币又火了。为什么要说又呢？因为比特币在 2013 年已经火过一次了。这次与 2013 年相同的是，比特币的价格一路飙升，让人咂舌。与 2013 年不同的是，这次人们不仅仅关注比特币的价格，也开始关注比特币背后的技术——<strong>区块链</strong>。</p>\n<p>一夜之间，区块链从舞台背后站到了聚光灯下，成为了人们追捧的热点。物流、医药、版权…好像哪都可以凭借区块链脱胎换骨。那么，这么神奇的技术，到底是怎么回事？</p>\n<p>本文就以最通俗的语言，不涉及任何高等数学和计算机知识，来介绍一下比特币和区块链系统。</p>\n<p>说到区块链就不得不说比特币，比特币是区块链技术最好的载体，所以本文就以比特币为例来介绍区块链。</p>\n<p>比特币很牛，牛在两个特点：<strong>去中心化、</strong><strong>电子货币</strong>。</p>\n<p>别小瞧这两点，这两点同时存在可不是一件容易事儿。</p>\n<p>首先来说说去中心化，通常去中心化的货币一般都要追溯到很久以前了，远古时代人们自发地使用贝壳、石子做为雏形货币进行交易，这时候的货币可以看作是去中心化的货币——无需中央银行来组织发行、确认交易合法性。</p>\n<p>但是使用这类货币的弊端也不必我多说，货币供给不稳定，取决于每年的贝类产量；货币质量不一，有的大有的小，有的是花蛤有的是文蛤；交易很繁琐，大宗交易动不动就要好几车的贝壳，这么多货币运来运去还容易被抢劫。</p>\n<p>于是货币进化，信用货币时代到来，货币成了银行账户里的数字，上面的问题都解决了，但是我们必须需要银行来控制货币的发行、防伪，来进行交易结算，我们的财产权全掌握在了银行的手中。银行喜欢动不动搞点QE放点水，我们银行卡里的钱越来越贬值。</p>\n<p><strong>这时候，我们就希望能有一种货币，既能像使用贝壳一样无需银行插手，又能符合当前信息时代对货币功能的需求。于是，集这两种特点于一身的比特币诞生了。</strong></p>\n<h2>比特币的基本原理</h2>\n<p>做为一种货币，通常就要满足几个特点：得有人<strong>发行</strong>它，得能<strong>持有</strong>它，人与人之间可以互相<strong>交换</strong>它。</p>\n<h3>持有</h3>\n<p>持有比特币非常简单，只要有一个<strong>收款地址</strong>，就可以持有比特币并接受比特币。所持有的比特币数量只是这个地址下的一个数字。</p>\n<p>有人会问，这不跟银行账户一样么，确实很像，但实质又很不一样。银行系统是一个中心化的系统，账户的余额是由银行说了算的，哪天银行系统出错余额变成0，那你就真的从ATM机里取不出钱。</p>\n<p>比特币不使用这种权威的中心机构，又需要一个稳定的记账系统，所以解决办法是每一个“矿工”都把比特币世界发生过的所有交易记录存在自己的硬盘上。有了全部的交易记录，推算每个人有多少余额也就很容易了。这个被保存在所有人电脑里的交易记录，学名就是<strong>区块链</strong>。黑客可以黑掉一些人保存的区块链，但是他做不到黑掉全世界大部分人，只要有大部分仍保存着正确的区块链，那么整个系统就可以通过纠错重新恢复正常。</p>\n<blockquote><p>就像打麻将时，我们有时候用记账方式来记录每回合的应收应付，比特币世界也通过记账来交易，每发生一笔交易都会公之于众，然后大家把这笔交易记录在自己的小账本上，这样每家有多少钱，大家在自己的小账本上都能查清楚。只不过当记账由4个人变成全比特币世界的村民时，这就需要一个稍微复杂点的系统了。</p></blockquote>\n<h3>发行</h3>\n<p>再来看看发行。我们先看纸币是怎么发行的，很简单，央行开动印刷机，一瞬间出现大把“毛爷爷”。而做为一种去中心化的电子货币，比特币是没有央行的，那怎么发行呢？</p>\n<p>比特币规定，人们可以去解答一个困难的问题，谁最先答出来，谁就可以发行一块比特币，也就是我们所谓的“挖矿”。</p>\n<p>这个困难的问题是什么呢？是哈希(hashing)的问题。哈希是一个函数<strong>F</strong>，对输入<strong>X</strong>进行一些运算来得到<strong>哈希值</strong><strong>Y</strong>。就是咱们高中学过的<strong>Y = F(X)</strong>。比特币让你解答的问题就是，告诉你哈希值<strong>Y</strong>和<strong>F</strong>，求<strong>X</strong>。</p>\n<p>这时候你会说了，这不就是个反函数的事么。抱歉，哈希函数这个函数比较特殊，找不到合适的反函数，要想求出<strong>X</strong>，唯一的方法就是一个一个数来试，把每一个数都代入到<strong>F</strong>里，看看结果是不是<strong>Y</strong>，如果恰好蒙对了，那也就把这个问题解答出来了。</p>\n<p>所以说所谓的货币发行、挖矿，实际上就是一帮人在用最好的计算机来撞大运蒙这个数。当一名矿工蒙对<strong>X</strong>后，也就是挖到矿后，他就获得了在原有的区块链末端创造一个新的<strong>交易区块</strong>的权利，在这个新创建的交易区块上，这位矿工可以附带一个由<strong>比特币世界</strong>作为付款人，收款人是任何人交易，这样，他就通过这个交易，创造并发行了一枚比特币。</p>\n<p>区块链就是由一串交易区块组成的。我们来看看交易区块上包含什么。</p>\n<p>一个交易区块会显示谁是它的父区块，包含本区块上的交易记录，以及本区块的哈希值。</p>\n<p> </p>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/mw690/7cc829d3gy1fq7ljddkbdj20ht06ydil.jpg\" width=\"641\" height=\"250\"></p>\n<p>这样，随着矿工们不断挖矿创建新的交易区块，一个接一个的区块就串成了一串，成为了名副其实的区块链！在比特币世界中，由于某些原因，区块链会发生分叉（为什么会分叉下文会提到），因而比特币世界规定：唯一合法的区块链是当前最长的区块链。</p>\n<blockquote><p>区块链就是比特币世界这个村子的账本，谁挖到矿，谁就有权在这个账本翻开新的一页，并在新的一页记下“X年X日，本村某某挖矿得到比特币一枚，并得到奖励的手续费若干”。这个账本很特殊，并不是由村支书管理，而是所有的村民人手一本，谁挖到矿以后，都可以自己翻页记账，并让全村人按照同样的方式做，以保证全村所有人的账本一致。当全村人的账本出现不一致时，规定谁家的账本最长就听谁的。</p></blockquote>\n<h3>发行</h3>\n<p>比特币的关键点在于交易。对于一个去中心化的电子货币系统，交易是很有风险的。想象一下，你和另一个人的电子货币交易就类似于打欠条，而且这个欠条没有第三方公证人。如果其中一方突然翻脸，欠条的有效性是很难保障的。</p>\n<p>由于不能使用类似银行结算中心的第三方公证人（使用了就是中心化系统了），所以比特币干脆就让全世界人做为公证人。</p>\n<p>所有比特币的交易都不能偷偷摸摸进行，都需要将这笔交易通过互联网广播到全世界。如果C想给B 0.5个比特币，会向全世界广播“C给了B 0.5个比特币！”，这时所有挖矿的矿工们，会把这条交易记录加到他们正在挖的这个交易区块中。</p>\n<p>他们为什么要加呢？因为当矿工挖出矿时，除了规定奖励的一枚比特币外，每加多一条交易记录，还会额外再多给一点点手续费。蚊子肉也是肉，辛勤的矿工们没有不喜欢的。</p>\n<p>在把交易记录加到区块的过程中，矿工们首先会验证一下这笔交易合不合法，也就是查查村里的账本，当C名下货币不足0.5个时，这条交易记录就会被拒绝加入到区块中。</p>\n<p>加入到区块中并不代表交易已经成功，只有当包含这个交易记录的区块的随机数X被某位矿工发现，并创造了新的交易区块链接在当前区块后，才能被认为是合法交易，这条交易记录也就成为被验证的交易。</p>\n<p>B可能会问了，那也就是说C发了给我钱的广播后，我还不能马上确定我是不是收到钱了啊？</p>\n<blockquote><p>没错，C发广播，只相当于C站在村口朝全村人喊了一句 “我给B 五毛钱！”，只有当全村的人都听见，把这件事都记在了个自账本上，并且记下这件事的那页被矿工翻过去以后，B的户头上多了五毛钱这件事才真正得到了全村村民的认可。由于参与比特币挖矿的矿工众多，通常每笔交易所需的验证时间是非常短的，不会给交易带来延迟感。</p></blockquote>\n<p>由此比特币的发行和交易首尾相连扣在了一起。交易通过发布广播的形式进行，矿工们听到广播后把交易写在交易区块中；矿工们通过挖矿来确认历史交易的完成，并由此创建新的区块，延长区块链，发行新的比特币。</p>\n<section>\n<section class=\"\">\n<h2>区块链的分叉</h2>\n</section>\n</section>\n<p>之前提到了<strong>区块链的分叉</strong>。为什么区块链会发生分叉呢？原因就在于<strong>去中心化</strong>。</p>\n<p>没有中心，大家都各自维护账本，因此受困于网络的延时、交流的不充分，难免有出现分歧的时候。</p>\n<p>举两个例子，一个是在挖矿时容易出现的问题：矿工B蒙对了随机数，挖矿成功，延长了区块链，注意，此时矿工B延长的区块链仅仅是自己的，其他人还都不知道这件事。当然，矿工B马上向全世界发布挖矿成功的消息，让大家按照他的方式延长区块链。</p>\n<p>但是这时，另一位矿工C也蒙对了随机数，他或者因为网速延迟还没听到B的广播，或者听到广播但不甘心，存心想破坏规则，于是他也把自己的区块链延长了，并开始向全世界发广播。</p>\n<p>因为网速的延迟，并不是所有人都先听到B的广播，此时就会出现一部分人按照B的指示更新区块链，一部分人按照C的指示更新区块链，而且因为网速的延迟，大家没办法确定到底是B还是C先发布的广播，从而引起区块链分叉。</p>\n<blockquote><p>就好比村里两位矿工B和C分别住在村东和村西，B和C差不多在同一时间挖矿成功，把自家账本翻页，在新的一页写下属于自己的宣言“X年X月，本村B(C)挖矿得到比特币一枚”，并开始向全村大喊让全村人翻页并写下这句话。由于他们分别住在村子的两头，结果村东头的人先听到B大喊于是按找B的话记账，村西头的人先听到C大喊于是按照C的话记账，导致全村的账本此时出现了两个版本。</p></blockquote>\n<p>第二种情况是<strong>双重交易</strong>，B与C进行交易，发布广播宣布付给C一枚比特币，但是B同时还跟D勾搭，几乎同时又发布广播宣布付给D一枚比特币，更糟糕的是，B宣布付出的是同一枚。</p>\n<p>跟第一种情况一样，由于网速问题，一部分矿工先听到B与C交易的广播，并将这条交易记录计入到当前交易区块中，后听到B与D的交易，并判定不合法，拒不添加到交易区块。而另一部分矿工正相反，只把B与D的交易添加到交易区块中。</p>\n<p>这两种情况并不是罕见的，由于比特币世界由全世界各地的人参与，有的地区用的是100M光宽带，有的地方用的是56K拨号上网，网速千差万别，而且又有很多人心怀不轨，存心作恶，因此区块链分叉几乎时时刻刻都在发生。此时，比特币世界的最高原则就起作用了：<strong>唯一合法的区块链是当前最长的区块链。</strong></p>\n<p>可是就上面两种分叉的情况来看，此时分叉的两个区块链一样长啊？没关系，这两条都合法，也都不合法，咱们搁置争议，继续开挖，看谁挖得快，谁先再蒙对新的X，让自己的区块链再进一步，谁的区块链就变成最长，也就成了唯一合法的了。这么一听，怎么感觉这个区块链系统这么随意，有些不靠谱的样子啊，如果大家都不守规则，随意分叉，世界岂不乱套。</p>\n<p>别急，接下来咱们通过分析会发现，最终区块链肯定会恢复成稳定的一条。</p>\n<p>让我们回到第一个情况矿工B和矿工C分歧问题中，假设B的链条再进一步，成为了最长链条，这条链条也就成为比特币世界认定的合法链条。此时C有两个选择，一是放弃努力，乖乖的扔掉自己的区块链，使用B的。另一种选择是不甘心失败，扔坚持自己的区块链，希望自己能很快继续追平B并反超。</p>\n<p>选择前者是大家都开心的，比特币世界的区块链从此统一，选择后者实际上继续让区块链保持分叉状态。那么从理性角度，C应该如何做呢？实际上C此时应该果断放弃自己的链条。</p>\n<p>我们可以分析一下，当B和C的链条分叉时，此时比特币世界存在4种矿工、两种势力，B和拥护B的吃瓜矿工，C和拥护C的吃瓜矿工。此时B势力与C势力大体相当，所以大家各挖各的。</p>\n<p>当B势力先一步延长了B的链条后，此时C势力就会发生分化，绝大部分拥护C的吃瓜群众只要听到B链条延长的消息，马上会转投到B链条上，因为此时B链条更长，在更长的链条上继续挖矿显然更有前途。势力马上发生逆转，C会尴尬地发现，全世界都在与他为敌（哭）。所以C不得不放弃。</p>\n<p>当然，假设是C的势力先延长了区块链，那么情形正好相反，全世界的矿工都会马上投入C的怀抱。尽管可能确实是B先挖到的矿，但此时B也不得不选择放弃自己的那条已经无人问津的区块链。按照这种理性的假设，全世界大部分矿工都会安分守己的选择在最长的链条上工作，所以偶尔的分叉也不是什么大不了的事。</p>\n<p>当然仍存在一种极端情况，即B或C一个人的算力超过全世界算力的50%，这时候他们凭借一己之力就有可能反超。但是事实上，由于全世界都在参与，很难有人或组织有这么强的算力，其次即使C有这么强的算力，他老老实实地在最长链条上挖矿就好了，也没必要硬刚全世界，非要显示霸权只会让全世界都不陪他玩了，最后比特币失去价值，C损失更大。</p>\n<p>上面所说的第二种分叉情况的解决办法与第一种情况同理，坚持“唯一合法的区块链是当前最长的区块链”原则不动摇，最终合法的一条区块链只会记录B与C交易或B与D交易的其中一个，具体原因读者可以自己想一想。</p>\n<p> </p>\n<p>讲了这么多，大家可以发现，比特币凭借区块链的巧妙设计，使得交易与发行以一种非常稳定的状态进行，而保持稳定的核心力量是什么呢？就是无数矿工提供的算力。</p>\n<p>只要矿工够多，算力够大，验证速度够快，比特币的交易就可以快速地被验证，不小心出现的区块链分叉状态可以很快结束，保证整个系统稳定运行。所以挖矿可不光只是费电，这些电能实际上转化成为维持整个系统稳定的能量！</p>\n<p>这也告诉我们为什么比特币可以一个币价值数万，而有些新发行的各种币一文不值，因为比特币做为历史最长、受众最广的电子货币，也拥有数量最多、分布最广泛的矿工和算力，是最稳定的电子货币。</p>\n<p>而新发行的货币矿工数量很少，参与的算力低，根本起不到稳定整个系统的作用，算力低也意味着每笔交易的验证时间会变长，从而降低货币的可用性，所以这样的新兴货币一文不值。</p>\n<p>好了，关于比特币以及比特币系统所用到的区块链技术就介绍到这里，如有大牛对文中内容有异议，欢迎拍砖探讨！</p>\n<p> </p>\n<p><strong>参考文献：</strong></p>\n<p>Satoshi《Bitcoin: A Peer-to-Peer Electronic Cash System》</p>\n</div>\n<p> </p>\n<p><strong>关于作者：</strong></p>\n<p>ChenJunXuan / CC，17 年硕士毕业于上海交大，目前在阿里达摩院做计算机视觉方向/智能医学影像相关的算法开发，喜欢 Python。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"111954\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"111954votetotal\">4</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"111954\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 3 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 2 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"}
{"url_object_id": "df769d9585bb04c7096fe1e496ae06af", "title": "站会不只是站着！那该如何开展？", "create_date": "2018/04/03", "url": "http://blog.jobbole.com/113799/", "front_image_url": ["http://wx4.sinaimg.cn/large/63918611ly1fpzj87vetej20dw099419.jpg"], "praise_nums": 1, "comment_nums": 0, "fav_nums": 3, "tags": "职场,敏捷开发,站会", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/chenyahui\">精算狗</a> 翻译。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://martinfowler.com/articles/itsNotJustStandingUp.html\">Jason Yip</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>日常站会已经成为很多团队的惯例，尤其是在敏捷软件开发（Agile software development）中。然而，将有效站会和浪费时间区分开来的是很多小细节。</p>\n<p><img class=\"aligncenter\" src=\"http://wx4.sinaimg.cn/large/63918611ly1fpzj87vetej20dw099419.jpg\"></p>\n<p style=\"text-align: center;\">（photo: Karthik Chandrasekarial）</p>\n<h1>我们站着以保持会议简短</h1>\n<p>日常站会（daily stand-up meeting）（也叫 daily scrum，daily huddle，morning roll-call 等）可以简单地描述为：</p>\n<blockquote><p>整个团队每天见面，快速汇报状态最新进展。我们站着以保持会议简短。</p></blockquote>\n<p>就是这样。</p>\n<p>但是这么简短的定义没有真正告诉你那些把有效站会和浪费时间区分开来的细节。</p>\n<p>所以你怎么区分呢？</p>\n<p>对有经验的人来说，当站会出问题的时候，他们凭直觉就知道该调整什么来处理问题。</p>\n<p>对新手来说，出问题时他们不太可能弄清该做什么……如果没有协助的话，他们更可能直接完全放弃这项实践。</p>\n<p>这令人感到遗憾，因为进展顺利的站会给团队带来显著的价值。</p>\n<p>为了解决这个问题，重要的是详述日常站会一般做法的好处和结果。日常站会的这些范例能够帮助缺乏经验的人，也能提醒更有经验的人其直觉背后的原因。</p>\n<h1>“好”可能是什么样？</h1>\n<p>Bob Marley 的“Get Up Stand Up”响起……像巴甫洛夫的铃铛一样，队员们不需要额外的督促就站起来漫步到卡片墙前。这首歌是每天早晨同时播放的循环歌单的一部分。</p>\n<p>有些人把卡片移动到工作流中的正确位置，包括贴上不同颜色的便利贴，写上备注。直接项目团队以外的一些人如果对此感兴趣的话，会闲逛过来看看事情进展如何。</p>\n<p>注意墙边的活动已经停下了，队长启动团队之前购买的巨大计时器；他们对日常站会实际要花多长时间感兴趣。</p>\n<p>一个队员上前一步，谈论黑板上最右边的卡片，离部署点最近。他对部署脚本还有一些疑问。另一个队员表示她能帮忙解决。人们从右到左从上到下继续描述每个工作项都发生了什么，其他人如果能帮忙解决困难就插话进去。队长在一边将提及的困难记录在进展板上。</p>\n<p>一度有一场稍长的讨论来探索怎么解决一个特定的问题。队长意识到这次拖延时，会轻轻举起一根手指打断他们…….恰恰在一个人提议他们应该线下讨论之前。</p>\n<p>一小段时间之后，大家讨论过了所有的卡片，队长询问还有没有人想分享其他事情。某人提了一个有趣的想法，是关于一个会使计划中的一些东西被淘汰的新特征。这引起了一个总试图参加站会的产品经理的兴趣，他们都同意之后再讨论。</p>\n<p>队长在团队开始传统结束仪式时转了转眼睛……1……2……3……精益求精！不是他的菜，但是他得承认，这使得事情高调结束了。</p>\n<p>人们散开并开始讨论提及的不同事情，包括那些困难，新想法和特定工作项的问题。</p>\n<h1>当人们试图一起工作时发生的特定问题</h1>\n<p>当一队人试图作为团队工作时会发生特定的问题，日常站会是这些问题的常见解决方法。</p>\n<p>站会是定期同步的机制，这样团队……</p>\n<p><strong>对目标有同样的理解。</strong>即使我们觉得一开始是互相理解的（很可能并不是），我们的理解也会发生变化，就像我们工作的背景会发生变化。如果一个“团队”中的每个成员是朝不同的目标工作的，那么这个“团队”是无效的。</p>\n<p><strong>协调工作</strong>。如果不需要协调工作，你也就不需要团队。反过来，如果你有一个团队，我假定工作就需要协调。队员之间蹩脚的协调往往会导致糟糕的结果。</p>\n<p><strong>分享问题和改进。</strong>团队合作与单独工作相比，主要好处之一就是在某人遇到问题或者发现一个更好的做事方法时，队员能够互相帮助。如果一个“团队”的队员对分享问题感到不适，而且/或者不互相帮助，那么这个团队往往是无效的。</p>\n<p><strong>识别为一个团队。</strong>如果你不经常与团队接触，在心理上认同一个团队是很困难的。即使你认为他们有能力，而且追求同一个目标，你也无法产生强烈的关联感。</p>\n<h1>日常站会的范例</h1>\n<p>我整理了一些范例来回答下列问题：</p>\n<p>▪谁参加？</p>\n<p>▪我们谈论什么？</p>\n<p>▪我们发言的顺序是什么？</p>\n<p>▪时间和地点？</p>\n<p>▪我们怎么保持精神抖擞？</p>\n<p>▪我们怎么鼓励自主？</p>\n<h1>谁参加？</h1>\n<h2>所有人</h2>\n<p>来自不同领域（比如市场，产品支持，上层管理，培训等）的人和代表希望了解项目的状态和进程，并且/或者贡献一份力量。在多次会议和报告中交流项目状态需要大量重复的工作。</p>\n<p><em>因此</em></p>\n<p>将部分或者全部会议和报告替换成日常站会。任何直接相关的人员，或者想要了解项目的日常工作的人员应该只参加日常站会。</p>\n<p><em>但是</em></p>\n<p>如果不直接相关的人不清楚什么是期望行为，可能会打断站会。这可以通过简单地向新的参与者和观察者提前声明预期规范来解决。</p>\n<p>不是所有形式的报告都是，或者应该是站会形式的。举例来说，项目概述使用<a href=\"http://xprogramming.com/articles/bigvisiblecharts/\">大型可视化图表（Big Visible Chart）</a>会更好，比如燃尽图（burn-down）、燃烧图（burn-up）、累计流量表（cumulative flow diagram）等。</p>\n<h2>工作事项核心</h2>\n<p><em><strong>也叫：</strong></em>故事核心的站会</p>\n<blockquote><p>如果故事对项目来说非常重要，站会中就该是<strong>它们</strong>发言</p>\n<p><a href=\"http://www.exampler.com/blog/2007/11/06/latour-3-anthrax-and-standups/\"><em>— Brian Marick, “Latour 3: Anthrax and standups”</em></a></p></blockquote>\n<p>人们太<strong>注意接力者了，而没有给予接力棒足够的重视</strong>。也就是，人人都在忙着做事，但并不一定是处理工作事项。</p>\n<p><em>因此</em></p>\n<p>把日常站会看作是以工作事项（例如在敏捷软件开发背景下的用户故事）为核心的惯例，而不是人的惯例，与会者只是代表工作事项发言……因为工作事项显然不会说话。</p>\n<p><strong>昨日今日困难</strong>的问题可能仍然适用，但是是从工作事项角度出发的，而不是从人的角度出发的。这也意味着不是每个人都会发言。人们没有责任要说跟改进工作无关的事情。</p>\n<p>由于这样更清晰的关注点，人们更可能在不需要督促的情况下提出困难和申请解决困难。</p>\n<p><em>但是</em></p>\n<p><a href=\"http://blog.mountaingoatsoftware.com/should-the-daily-standup-%20be-person-by-person-or-story-by-story/comment-page-1#comment-23428\">没有发言的责任可能会隐藏一些人的问题，他们害羞或者往往在这种情况下不发言。</a>这在以工作事项为核心的情况下更难察觉。</p>\n<h1>我们谈论什么？</h1>\n<h2>昨日今日困难</h2>\n<p><em><strong>也叫：</strong></em>三个问题</p>\n<p>有些人健谈，可能漫谈到<strong>讲故事</strong>中去。有些人想在听到问题后立即开始<strong>解决问题</strong>。过于长的会议往往是低迷的，与长时间的讨论没有直接关系的参与者往往会分心。</p>\n<p><em>因此</em></p>\n<p>用以下格式组织谈话内容：</p>\n<ol>\n<li>我昨天完成了什么？</li>\n<li>我今天要做什么？</li>\n<li>什么障碍拖延了我的进度？</li>\n</ol>\n<p>满足日常站会的目标至少需要这 3 个问题。讨论的其他主题（例如设计讨论，八卦等）应该推迟到会议结束后。</p>\n<p>Olve Maudal 建议应该掉转问题的顺序来强调重要性的正确顺序：</p>\n<blockquote><p><em>1、有什么障碍？</em></p>\n<p><em> 2、今天要做什么？</em></p>\n<p><em> 3、从昨天起完成了什么？</em></p>\n<p><a href=\"http://olvemaudal.wordpress.com/2008/05/15/daily-stand-up-meetings-%20perhaps-the-third-question-should-go-first/\"><em>— Olve Maudal, “Daily Stand-up Meetings – Perhaps the third question should go first?”</em></a></p></blockquote>\n<p>Lasse Koskela 提出了另一种形式的问题，为了强调队员不应该向队长汇报：</p>\n<blockquote><p><em>每个队员向他的同伴更新信息：</em></p>\n<p><em>每个队员依次向他的同伴提供 3 条信息：</em></p>\n<p><em> 1、昨天开会以来我做的事情</em></p>\n<p><em> 2、我今天要做的事情</em></p>\n<p><em> 3、我需要某人来解决的困难</em></p>\n<p><a href=\"http://radio.javaranch.com/lasse/2006/05/07/1147034972559.html\"><em>— Lasse Koskela, “On Scrum and the curse of the three questions”</em></a></p></blockquote>\n<p>Jonathan Rasmussen 提供了不同的说法来改变站会的动态：</p>\n<blockquote><p>▪<em>你昨天做了什么来改变世界</em></p>\n<p>▪<em>你今天准备怎么做</em></p>\n<p>▪<em>你准备怎么突破任何不幸挡了你路的困难</em></p>\n<p><em>回答这些类型的问题完全改变了站会的动态。你正在使尽浑身解数，宣布你对宇宙的意图，而不是仅仅站在那陈述更新信息。</em></p>\n<p><a href=\"https://www.amazon.com/gp/product/1934356581?ie=UTF8&amp;tag=martinfowlerc-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=1934356581\"><em>— Jonathan Rasmusson, The Agile Samurai</em></a></p></blockquote>\n<p>还有很多团队加入了额外的问题。</p>\n<p><a href=\"http://joel.is/an-invitation-to-come-and-hack-on-buffer/\">Buffer 增加了一个部分，人们可以分享手头上用来提升自己的事请。</a></p>\n<p>Thomas Cagley 建议<a href=\"https://tcagley.wordpress.com/2014/07/18/stand-up-meetings-add-ons/\">寻找风险</a>。</p>\n<p>Mark Levison 发现，增加更有针对性的改进问题是有用的。改动后两个问题来与具体背景接轨。</p>\n<blockquote><p><em> 1、你昨天完成了什么？</em></p>\n<p><em> 2、你今天要做什么？</em></p>\n<p><em> 3、</em> <em>障碍/困难有哪些？</em></p>\n<p><em> 4、你昨天注意到什么代码味道/缺少单元测试……了吗？</em></p>\n<p><em> 5、昨天你对代码做了哪些改进？</em></p>\n<p><a href=\"https://agilepainrelief.com/notesfromatooluser/2011/01/daily-stand-up-variations.html#.VsoT4ZMrLeQ\"><em>— Mark Levison, “Daily Stand-Up Variations”</em></a></p></blockquote>\n<p><em>但是</em></p>\n<p>结构不像由问题的答案所提供给我们的信息那么重要。如果提供信息的准则不那么结构化，遵循清单就不重要了。随着团队成长，你可能会发现你想要调整结构，反映了这个范例是如何演变的。</p>\n<p>更大的问题是，<strong>昨天今天困难</strong>是否太过于关注个人成就，而不是注意正确的事情……这就引向了。</p>\n<h2>改进板（Improvement Board）</h2>\n<p><em><strong>也叫</strong>__<strong>：</strong></em>阻碍板（Blockage Board）、障碍板（Impediment Board）、改善新闻表（Kaizen Newspaper）</p>\n<p>站会中提出的困难没有被解决或者及时处理。</p>\n<p><em>因此</em></p>\n<p>把提及的困难贴到<strong>改进板</strong>上。这是一个公开可见的白板或者表格，记录提及的困难，并跟踪解决方法的进度。一个<strong>改进板</strong>可以在站会以外的时间更新，并作为一个更即时的、不那么具有压迫性的提出困难的方法。一个常见的错误是没能写得足够大，使人们能在很远的地方看到。</p>\n<p>把问题写下来并坦率地承认它的简单行为是减少在对话中走神的可靠方法。所以即使不是每个人都同意某个特定事物是障碍，写下来以便会议结束后讨论也是值得的。</p>\n<p>加上每个提及的困难发生的次数，这强调了哪些问题一般来说更重要，得先处理。</p>\n<p>板面的设计有几种方法。比如像下面一样的表格结构：</p>\n<table cellspacing=\"0\" cellpadding=\"5\">\n<tbody>\n<tr>\n<td valign=\"top\"><strong>问题</strong></td>\n<td valign=\"top\"><strong>计数</strong></td>\n<td valign=\"top\"><strong>控制</strong></td>\n<td valign=\"top\"><strong>对策</strong></td>\n<td valign=\"top\"><strong>状态</strong></td>\n</tr>\n<tr>\n<td valign=\"top\">问题的名字</td>\n<td valign=\"top\">问题发生的计数</td>\n<td valign=\"top\">短期解决方法</td>\n<td valign=\"top\">基于根本原因分析的 长期解决方法</td>\n<td valign=\"top\">计划-执行- 检查-行动</td>\n</tr>\n</tbody>\n</table>\n<p>另一种更像任务板的风格：</p>\n<table cellspacing=\"0\" cellpadding=\"5\">\n<tbody>\n<tr>\n<td valign=\"top\"><strong>要做</strong></td>\n<td valign=\"top\"><strong>正在进行</strong></td>\n<td valign=\"top\"><strong>已完成</strong></td>\n</tr>\n<tr>\n<td valign=\"top\">代表困难的卡片</td>\n<td valign=\"top\">当我们主动解决困难时， 把对应的卡片移动到这里</td>\n<td valign=\"top\">当我们解决了困难时， 把对应的卡片移动到这里</td>\n</tr>\n</tbody>\n</table>\n<p><em>但是</em></p>\n<p>如果提出了太多困难，团队没有能力解决的话，要冒着<strong>改进板</strong>变成抱怨板的风险。</p>\n<h1>我们发言的顺序是什么？</h1>\n<h2>最后到达的最先发言</h2>\n<p>在站会期间，与会者得知道谁应该先发言。由协调人决定谁先发言是与自我组织对抗的、虽然微妙、但是确切的力量。在不需要干预的情况下，团队也应该知道谁先发言。</p>\n<p><em>因此</em></p>\n<p>同意<strong>最后到达的人先发言</strong>。这是个简单的规则，也带来了额外的好处——鼓励人们准时参加站会。</p>\n<p><em>但是</em></p>\n<p>最后到达的人可能也是准备最不充分的，不能给站会开一个好头。</p>\n<h2>接龙</h2>\n<p>在站会期间，与会者得知道谁应该先发言。由协调人决定谁先发言是与自我组织对抗的、虽然微妙、但是确切的力量。在不需要干预的情况下，团队也应该知道谁先发言。</p>\n<p>因此</p>\n<p>使用一个简单的、预先制定的规则来决定谁下一个发言，例如<strong>接龙</strong>。顺时针转还是逆时针转不重要，重要的是团队主导会议，而不是协调人或者经理主导会议。</p>\n<h2>传递信物</h2>\n<p>有了简单的、可预测的排序机制（例如<strong>接龙</strong>），直到快轮到自己发言之前，参与者很容易忽略其他发言人。人们往往会想其他事情，而不是注意听其他人说了什么。</p>\n<p><em>因此</em></p>\n<p>引进一个不可预测的排序机制，比如投掷一个发言信物（例如一个球）来决定谁下一个发言。用发言信物也简化了谁第一个发言的问题，可以是恰好取回信物的人（或者是他/她把信物投向的第一个人）。</p>\n<p>投掷东西也给日常站会增添了一点乐趣，也可以作为一个良好的、感染其他观察团队的机制。</p>\n<p>我在参加与 Simon Stewart 合作的一个项目时第一次学到这个方法。我们用了一个小杂耍球，但是几乎所有东西都可以用作信物。其他团队用过<a href=\"http://edgibbs.com/2006/08/14/passing-a-rugby-ball-in-standups/\">橄榄球</a>，甚至<a href=\"http://kanemar.wordpress.com/2006/05/13/controling-the-flow-of-daily-%20meetings-with-a-team-mascot/\">毛绒玩具</a>。</p>\n<p><em>但是</em></p>\n<p>对大一点的团队来说，可能很难记住谁已经发过言了。在这些情况下，坚持像<strong>接龙</strong>这样简单一点的机制更容易。</p>\n<p>取决于组织甚至团队的文化氛围，扔球可能会显得不专业，对这个惯例产生不必要的负面看法。</p>\n<h2>抽一张卡片</h2>\n<p>在站会期间，与会者得知道谁应该先发言，之后谁应该发言。由协调人决定谁先发言是与自我组织对抗的、虽然微妙、但是确切的力量。团队不喜欢传信物是因为他们手里一般都拿着杯咖啡。</p>\n<p><em>因此</em></p>\n<p><a href=\"http://%20web.archive.org/web/20090526072425/http://www.robbyonrails.com/articles/2006/05/29/the-%20daily-stand-up-part-2\">让每个队员抽一张卡片来决定发言顺序。</a>想象一摞卡片，每张卡片上有一个数字。每个队员到达时可以选一张卡片，根据卡片上的数字来决定发言顺序。</p>\n<h2>过一遍板</h2>\n<p><em><strong>也叫：</strong></em>过一遍墙</p>\n<blockquote><p><em>站会保证每个人都不闲着。过一遍板上的内容保证每个人都只关注最重要的事。</em></p>\n<p><em>— Bret Pettichord via Twitter</em></p></blockquote>\n<p> </p>\n<blockquote><p><em>会议形式的另一个问题是，没有清楚地讨论任务或者工作流。每个话题被简单提及，取决于队员发言的顺序。这使得正在发生的事情很难讲清楚。</em></p>\n<p><a href=\"http://web.archive.org/web/20090611160352/http://dnicolet1.tripod.com/%20agile/index.blog?entry_id=1900488\"><em>— Dave Nicolette, “An alternative format for the daily stand-up”</em></a></p></blockquote>\n<p>人们更关注让自己忙起来，而不是真正改进工作，所以你转向一个以工作事项为核心的模型，而不是以人为核心的模式。但是，即使是工作事项核心的站会，如果使用了像<strong>接龙</strong>或者<strong>传递信物</strong>这样的传统排序机制，也很难理解发生了什么。</p>\n<p><em>因此</em></p>\n<p><strong>过一遍板</strong>，就是在站会中过一遍可视管理板上的每个工作事项。</p>\n<p>大多数敏捷和精益团队使用可视管理系统来展示正在处理的工作事项。对敏捷软件开发来说，这可能叫做任务板（task board）、故事墙（story wall）或者看板（Kanban board）。这些板展示工作事项的进程。通常用在板上移动卡片的方法来展示进程。理论上，垂直位置表示优先程度。</p>\n<p>站会中，从尾到头（例如从右到左）并从高优先级到低优先级（例如从上到下）过一遍每个工作事项。你可能在板上明确地标明应该使用怎样的顺序。</p>\n<p>Pawel Brodzinski 提出了一个<a href=\"http://brodzinski.com/2011/12/effective-standups.html\">默认顺序</a>：</p>\n<p>1. 困难</p>\n<p>2. 加速或者紧急事件</p>\n<p>3. 上次站会后没再有新进展的事项（可能卡住了）</p>\n<p>4. 根据优先级的其他事件</p>\n<p><em>但是</em></p>\n<p>显然，一块板是需要预先准备的，不是所有团队都有。在这种情况下，一人一人发言的结构更合适。</p>\n<p><strong>过一遍板</strong>更可能会屈从于<strong>向队长汇报</strong>，如果没有应用<strong>轮流当协调人</strong>或者其他自我组织范例。</p>\n<h1>时间和地点</h1>\n<h2>在工作地点开会</h2>\n<blockquote><p><em>在工作场地开会，而不是在会议室。</em></p>\n<p><a href=\"http://www.leanblog.org/2010/08/video-of-a-daily-huddle-at-everett-clinic/\"><em>— Marc Graban, “Video of a Daily Huddle at Everett Clinic”</em></a></p></blockquote>\n<p>工作地点有很多触发记忆的东西，能让你想起来发生的事情。</p>\n<p>我们也不希望日常会议需要大量提前协调、寻找再走到开会的房间。</p>\n<p><em>因此</em></p>\n<p><strong>在工作地点开会</strong>，而不是在会议室。如果你们有故事墙或者看板，就在它前面开会。</p>\n<p><em>但是</em></p>\n<p>附近的其他人可能会觉得会议的噪音令人分心。这一般暗示了潜在的糟糕工作空间设计，但仍然必须被承认。</p>\n<h2>同样的时间，同样的地点</h2>\n<p>我们希望团队对站会有主人翁意识。我们也希望利益相关方能路过旁听一场站会，避免再安排另一场状态会议。如果任意队员都能强制推迟或者改变站会的地点，这就很难实现。</p>\n<p><em>因此</em></p>\n<p>团队要同意在<strong>同一时间同一地点</strong>开站会。不要等掉队的人，包括发起人和经理。会议是为整个团队开的，而不是为了某个人。如果你<strong>用站会来开始一天</strong>的话，这就尤其重要了。</p>\n<p>一些更严格的团队可能会惩罚迟到者。我倾向于讨论，并谨慎使用任何惩罚。</p>\n<p><em>但是</em></p>\n<p><strong>同一时间同一地点</strong>并不是盲目地不知变通。重要的是开始时间基本一致，很少要重新安排。如果经常需要重新安排，可能意味着应该调整开始时间。如果每个人都不方便去某个地方，很可能意味着应该调整地点。</p>\n<h2>用站会来开始一天</h2>\n<p>日常站会让我们意识到并注意突出问题。如果在晚些时候开站会，那么这种注意和意识就浪费了。</p>\n<p><em>因此</em></p>\n<p><strong>用站会来开始一天。</strong>由于弹性工作时间，不是每个队员都在同一时间开始上班。针对弹性工作时间的一个常见方法是利用核心工作时间。站会应该在核心工作时间开始时开始。</p>\n<p>类似地，如果队员由于个人原因要迟到一会（比如得送孩子上学），站会开始时间应该设在每个人都能参加的时刻。</p>\n<p><em>但是</em></p>\n<p>在站会前大家往往不会做任何与项目相关的任务。如果<strong>开始一天的站会开晚了</strong>，懒散时间会很显著。到某种程度下，这些时间可能会被简单地用来查看邮件、填时间表等。但是把站会安排在晚一点的时间，而不是“一天的开始”值得研究。</p>\n<h2>别用站会来开始一天</h2>\n<p>站会往往被作为为一天设置关注点的惯例，尤其是如果你<strong>用站会来开始一天</strong>。因此，在站会开始前，队员往往不处理特性。当会议实际上不是第一件事时，这个倾向可能会对生产效率有显著影响。</p>\n<p><em>因此</em></p>\n<p><strong>别用站会来开始一天。</strong>把日常站会安排到一个足够晚的时间，晚到人们不会从心理上把会议和一天的开始联系在一起。</p>\n<p><em>但是</em></p>\n<p>如果不用日常会议开始一天，那它就不能再作为一个在一天的开始设定团队关注点的惯例了。效率的明显提高可能不值得这样的代价，取决于不同团队。</p>\n<p>当有很多项目用到站会时，可能同时有很多站会。对多个项目感兴趣的观察者可能想要更改站会时间，这样他们能都参加。问题在于，如果一个观察者能要求与会者调整他/她的安排，会威胁到团队的主人翁意识。然而，在决定什么时候开站会时也必须考虑这一点。</p>\n<h1>我们怎样保持精神抖擞？</h1>\n<h2>聚集在一起</h2>\n<blockquote><p><em>我经常发现的问题是，人们往往把日常站会看作简单的个人报告。“我做了这个……我要做那个”——接着下一个人也这么说。更理想的方法是站得更近，像足球队围在一起那样。</em></p>\n<p><a href=\"https://www.linkedin.com/pulse/20140926150354-136414-the-origin-of-the-daily-stand-up\"><em>— Jeff Sutherland, “The Origin of The Daily Stand-up”</em></a></p></blockquote>\n<p>讲话的音量影响参与度，也影响交流的效率。物理距离会改变好的交流所要求的音量。有些人不大声讲话，大声讲话会感到不舒服。</p>\n<p><em>因此</em></p>\n<p>站会更应该是 <strong>Huddle </strong>而不是会议。如果很难听清，让大家站近一点。除了可以用更轻松的说话音量，身体上更接近往往也会增加与会者的参与度。能够站得更近也表现了队里更多的信任感。如果站会是一个新事物，用手势招呼别人参加和说些有“来吧。”效果的话通常来说就足够了。如果圈子的大小已经建立了一段时间，在尝试缩小它之前考虑解释一下缩小圈子的原因。</p>\n<p><em>但是</em></p>\n<p>团队必须平衡近距离和个人舒适区域。即使在非常有信任感的团队中，也有一个点，站得太近以至于超过了这个点，人们会觉得不舒服。症状往往是与会者紧张并/或者坐立不安。</p>\n<h2>站起来</h2>\n<p>有些人健谈，可能漫谈到<strong>讲故事</strong>中去。有些人想在听到问题后立即开始<strong>解决问题</strong>。过于长的会议往往是低迷的，与长时间的讨论没有直接关系的参与者往往会分心。</p>\n<p><em>因此</em></p>\n<p>在会议期间要求所有与会者<strong>站起来</strong>。用站立来链接身体和心理的意愿。身体上的不适也会提醒与会者会议拖得过长了。鼓励这种做法的一个简单方法是：直接在没有椅子的地方开会。</p>\n<p><em>但是</em></p>\n<p>站起来往往会导致会议缩短，但并不保证会缩短到一个理想的时长。人们可能会学着适应不适感而不是采用一个更合适的对策。而且如果会议<em>没有</em>拖得过长，也没有跑题，站起来就是一个不必要的仪式了。</p>\n<h2>十五分钟或者更短</h2>\n<p>大多数人会在长时间的会议中走神。又长又无聊的会议是一个糟糕的、消耗精力的开始一天的方法。一个具体的时长帮助我们想起来什么时候该考虑调整，以缩短会议时长。</p>\n<p><em>因此</em></p>\n<p>保持日常站会在<strong>十五分钟或者更短</strong>。一般来说，十五分钟过后，普通人开始走神，这对设定关注点来说一点帮助都没有。</p>\n<p><em>但是</em></p>\n<p>十五分钟对小一点的团队来说可能太长了。由于走神的影响，甚至对大一点的团队来说，十五分钟是一个好的限制。另外，会议也可能太短，以至于结束时，与会者仍然不清楚发生了什么或者该问谁来弄清楚。</p>\n<h2>结束信号</h2>\n<p>在最后一个人发言结束后，团队可能不会马上意识到会议结束了。如果人们是逐渐意识到该散了的，会议不能高调结束，可能会导致<strong>低迷</strong>。</p>\n<p><em>因此</em></p>\n<p>用一句顺嘴的话（例如，<a href=\"http://edgibbs.com/2006/08/07/signaling-the-end-of-a-standup/\">“好了，大家去吃午饭吧。”</a>）或者其他动作作为站会<strong>结束的信号</strong>。</p>\n<h2>给会议计时</h2>\n<p>很难从量上判断站会是否超时，尤其在长度是逐渐增加的情况下。</p>\n<p><em>因此</em></p>\n<p><strong>给会议计时</strong>并发布结果。大多时候，与会者仅仅是没有意识到<strong>讲故事</strong>的影响，没有准备要线下讨论，也没有准备会议要开多久。把它量化。</p>\n<p><em>但是</em></p>\n<p>和所有措施一样，除非真的有一个要完成的目标是由于能量级导致的问题，不应该引入给会议计时的方法。一旦完成目标，应该抛弃这个方法。没有特定的原因就计时会导致怀疑和对度量的冷漠。</p>\n<p>时间是精力、注意力和节奏的代表。要更注意这些东西而不是时间。</p>\n<h2>线下讨论</h2>\n<p>有些人想要在听到问题后立即开始<strong>解决问题</strong>。过于长的会议往往是低迷的，与长时间的讨论没有直接关系的参与者往往会分心。承认要解决提及的问题需要进一步讨论仍然是重要的。有些人可能会觉得打断站会的结构不舒服。</p>\n<p><em>因此</em></p>\n<p>用像“<strong>线下讨论</strong>”这么一句简单一致的话作为提示，提醒大家这样的讨论应该在日常站会外进行。如果讨论的是社交，没有更多要求。如果讨论的是<strong>解决问题</strong>，协调人（最终就是团队）应该确保提名或者指定了正确的人来之后解决问题。</p>\n<p>或者，有些团队使用更间接的信号。</p>\n<p>例如，Mike Cohn 描述了一个信号，使用<a href=\"http://www.marketplace.org/2012/02/20/life/hate-those-endless-meetings-try-standing\">橡胶老鼠来暗示“我们要钻进老鼠洞了”</a>。</p>\n<p>Benjamin Mitchell 描述了一个双手法则：</p>\n<blockquote><p><em>如果任何人觉得现在的对话跑题了，或者已经不再有效率了，他们就举起一只手。一旦另一个人也举起了手，就标志着这段对话该结束了，并继续站会的剩余部分。正在发言的人可以在站会结束后继续。</em></p>\n<p><a href=\"http://blog.benjaminm.net/2012/02/23/overlong-agile-stand-up-two-hand-rule/\"><em>— Benjamin Mitchell, “Stuck in an overlong Agile stand up? Try the two hands rule”</em></a></p></blockquote>\n<p><em>但是</em></p>\n<p><strong>解决问题</strong>和澄清问题有不同之处。没有被理解的信息是没用的。允许澄清问题到哪种程度取决于团队的大小以及是否会影响<strong>十五分钟或更短</strong>这一规则。</p>\n<h1>我们怎么鼓励自主？</h1>\n<h2>轮流当协调人</h2>\n<p>队员<strong>向队长汇报</strong>，也就是他们只跟会议协调人说话，而不互相说话。会议协调人只提出并解决与站会相关的过程问题。我们希望团队作站会的主人，这就要求去除对单个协调人的依赖。</p>\n<p><em>因此</em></p>\n<p><strong>轮流当协调人。</strong>轮流安排队员负责确保大家参加站会，并坚持商定的准则。</p>\n<p><em>但是</em></p>\n<p>没有丰富站会经验的团队从一个经验丰富的教练那收获颇多。更重要的是，团队应该戒除依赖，对站会掌握更多的控制。到了一定时刻，就不该要协调人了。</p>\n<h2>打破眼神交流</h2>\n<p>队员<strong>向队长汇报</strong>，也就是他们只跟会议协调人说话，而不互相说话。会议协调人只提出并解决与站会相关的过程问题。我们希望团队作站会的主人，这就要求去除对单个协调人的依赖。</p>\n<p><em>因此</em></p>\n<p>协调人必须<a href=\"http://radio.javaranch.com/lasse/2006/05/07/%201147034972559.html#comment1147110635098\">打破眼神交流</a>，来委婉提醒发言者，他/她应该强调整个团队而不是一个人。一种方法是<a href=\"http://www.netobjectives.com/podcasts/last20060719_podcasts.mp3\">四处走走，这样当前的发言者就看不见协调人了</a>。</p>\n<h1>我们怎么知道什么时候站会进行得不顺利？</h1>\n<blockquote><p><em>我忍受了三年日常站会。站会中最让我痛苦的是我的老板（我叫他 Wally）。他开站会的主要原因不是提高效率，也不是尽可能多地用 XP 来减少人与人在与产品直接相关事情之外的互动。然而，对 Wally 来说，站会（例如周一早上 7 点的会议和周五下午 5 点的会议）是用来加强雇主和雇员关系的忠诚度测试。</em></p>\n<p><a href=\"http://queue.acm.org/detail.cfm?id=957730\"><em>— Phillip A. Laplante, “Stand and Deliver: Why I Hate Stand-Up Meetings”</em></a></p></blockquote>\n<p>站会的“味道”是极好的暗示事情进展不顺利的指示剂。重要的是注意即使你没有闻到什么，也不意味着站会进行得顺利。这只意味着它不臭。</p>\n<p>下面的这些味道，大多数都与前面的范例有关。与前面的范例无关的那些，潜在的问题往往更轻微，或者是在日常站会的关注点之外；人们得想出自己的解决方法。</p>\n<h2>注意接力者，而不是接力棒</h2>\n<p>人们太注意自己正在做什么了，而忽略了去考虑他们的行动是不是真的在改进工作。重新组织站会，这样就是<strong>以工作事项为核心</strong>了。</p>\n<h2>向队长汇报</h2>\n<p>队员面对着经理或者会议协调人，还要跟他们说话，而不是跟团队说话。这表明日常站会是为经理/协调人准备的，但它实际上是为团队准备的。有很多方法来打破这种依赖性：<strong>轮流当协调人</strong>，<strong>打破眼神交流</strong>，改变<strong>昨日今日困难</strong>问题的模式，<strong>传递信物</strong>等。</p>\n<h2>人们会迟到</h2>\n<p>这直接用<strong>同一时间同一地点</strong>解决，但是像之前提到的，这可能意味着站会举办的时间或者地点不对。</p>\n<p>有其他范例来处理这个问题，比如罚款。但是，我一般不推荐这些方法，因为它们暗示这些问题是外在推动的，但是更可能有其他原因。</p>\n<h2>开始一天的站会开晚了</h2>\n<p>由于站会被视为工作日的开始，站会之前没有工作能完成。这可能会对可用工作时间产生显著影响，取决于早晨的站会多晚开始。这引向了<strong>别用站会来开始一天</strong>。</p>\n<h2>社交</h2>\n<p>站会的目标之一是提高团队的社会化程度。但是，日常站会不是为了队员能在与项目无关的事上互相“跟上”。很难举出例子，因为社交从团建到偏离的程度取决于不同的团队。这个界可以从未直接参与到社会化中的参与者的行为中检测到。如果他们保持积极的精力水平，那么可能就是团建；如果他们的精力水平降低，那么就<strong>线下讨论</strong>，可能的话用另一场讨论来充当<a href=\"http://web.archive.org/web/20070103031934/http://www.easycomp.org/cgi-bin/%20OrgPatterns?TheWaterCooler\">饮水机</a>。</p>\n<h2>我不记得了</h2>\n<blockquote><p>我昨天做了什么？<em>…__…</em>我不记得了<em>……</em>我今天在做什么？<em>…__…</em>我不知道<em>…__…</em></p></blockquote>\n<p>缺乏准备导致更慢的进节奏，从而导致低迷。这也冒着满足不了<strong>十五分钟或更少</strong>这一规则的风险，这会进一步降低精力水平。</p>\n<p>绕过这个问题的一个好方法是转向<strong>以工作事项为核心</strong>的站会，并<strong>过一遍板</strong>。</p>\n<p>否则，这是一个期望的问题，期望人们有责任知道<strong>昨日困难今日</strong>问题的答案。</p>\n<h2>讲故事</h2>\n<p>参与者不是只简单描述一个问题，而是提供了足够的细节和背景导致别人走神。一般规则是在站会期间识别困难，在站会后讨论细节。这可以总结为“讲讲标题，而不是整个故事”或者<strong>线下讨论</strong>。</p>\n<h2>解决问题</h2>\n<blockquote><p>站会是提出问题和表面想法的时间，而不是深度解决问题的时间。</p>\n<p><em><a href=\"http://www.leanblog.org/2010/08/video-of-a-daily-huddle-at-everett-clinic/\">— Marc Graban, “Video of a Daily Huddle at Everett Clinic”</a></em></p></blockquote>\n<p>保持站会在<strong>十五分钟或者更短</strong>的关键是在会议期间限制<strong>讲故事</strong>，别屈服于<strong>解决问题</strong>。<strong>线下讨论</strong>。</p>\n<h2>低迷</h2>\n<p>低迷可能暗示着由<strong>讲故事</strong>、<strong>解决问题</strong>等导致的节奏变缓。在这种情况下，<strong>线下讨论</strong>。低迷可能仅仅是团队规模的问题。低迷也可能暗示该试试备选的<strong>用站会来开始一天</strong>和<strong>别用站会来开始一天</strong>。</p>\n<h2>没提及的困难</h2>\n<p><strong><em>也叫：</em></strong><a href=\"http://blog.jbrains.ca/permalink/stand-updaily-scrum-focus-on-achievement-and-commitment\">游记</a></p>\n<p>困难没被提及有很多原因。不记得了、高疼痛阙值、对提出问题的不信任感（因为<strong>困难没有被解决</strong>）、没有提出问题的方便渠道等。协调人应该鼓励人们提困难。</p>\n<p>引进一个<strong>改进板</strong>也能提供一个不那么有压迫感的中介。<a href=\"http://www.retrospectives.com/\">Retrospectives</a> 是发现<strong>困难没有被提及</strong>的潜在原因的有效方法。</p>\n<h2>困难没有被解决</h2>\n<p>除了埋怨环境之外，让人们停止提困难的最确定的方法是别解决困难。为了让人们很难忘记或者忽略困难，用<strong>改进板</strong>公开跟踪它们。</p>\n<h2>只有在站会上提出的困难</h2>\n<p>站会充当一个安全网。在最糟糕的情况下，一天内会将一个困难与更大的团队交流。但是，开站会并不是为了避免问题被提出并在一天内解决。引进一个像<strong>改进板</strong>这样的替代媒介来提出困难可能有用。如果没用，潜在原因可能会在使用 <a href=\"http://www.retrospectives.com/\">Retrospectives</a> 时发现。</p>\n<h1>真的只是每天一起站起来</h1>\n<p>希望这篇文章为你提供了一些关于有效站会的细节和常见问题指示的见解。要清楚日常站会不仅仅是每天一起站起来。</p>\n<p>在一天结束时，重要的是不要太在意每一个范例，或者有某些“味道”。记住我们正试着解决的问题。大家精力充沛吗？大家在分享问题和想法吗？大家是否专注于我们的目标？大家是否像一个团队一样工作？每个人都知道发生了什么吗？</p>\n<p>如果你能肯定地回答这些问题，站会很可能还比较顺利。毕竟，真的只是每天一起站起来。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113799\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113799votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113799\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 3 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui\">精算狗</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2015/04/8fbdaaa5ea6d3b49c8c1c825aafeb5d9.png\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            简介还没来得及写 :）        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/chenyahui\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/chenyahui/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 22</a> · <a title=\"QQ：564968845\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a> <a title=\"个人微信：564968845\" target=\"_blank\" href=\"#\"><i class=\"fa fa-weixin\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"}
{"url_object_id": "1401d80b943d81d3493c295bfe34a3ab", "title": "Linux 新用户？来试试这 8 款重要的软件", "create_date": "2018/03/21", "url": "http://blog.jobbole.com/113775/", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/01/1b8322e1daff605d71fc81e724421f17.jpg"], "praise_nums": 1, "comment_nums": 0, "fav_nums": 0, "tags": "IT技术,Linux", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.maketecheasier.com/essential-linux-apps/\">Ada Ivanova</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9458-1.html\">Linux中国/ChenYi</a>   </div><p>即便您不是计算机的新手，刚接触 Linux 时，通常都会面临选择使用应用软件的问题。在数百万 Linux 应用程序中，做起选择来并不轻松。本文中，您将能发现八个重要的 Linux 应用，帮助您快速选择应用程序。</p>\n<p>下面这些应用程序大多不是 Linux 独有的。如果有过使用 Windows/Mac 的经验，您很可能会熟悉其中一些软件。根据兴趣和需求，下面的程序可能不全符合您的要求，但是在我看来，清单里大多数甚至全部的软件，对于新用户开启 Linux 之旅都是有帮助的。</p>\n<p><strong>相关链接</strong> : <a title=\"11 Portable Apps Every Linux User Should Use\" href=\"https://www.maketecheasier.com/portable-apps-for-linux/\">每一个 Linux 用户都应该使用的 11 个可移植软件</a></p>\n<h3 id=\"toc_1\">1. Chromium 网页浏览器</h3>\n<p><img title=\"linux-apps-01-chromium\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/1a4a3161971e417d60d75361bfdf7083.jpg\" alt=\"linux-apps-01-chromium\"></p>\n<p>几乎不会不需要使用网页浏览器的用户。您可以看到陈旧的 Linux 发行版几乎都会附带 Firefox（火狐浏览器）或者其他 <a href=\"https://www.maketecheasier.com/linux-browsers-you-probably-havent-heard-of/\">Linux 浏览器</a>，关于浏览器，强烈建议您尝试 <a href=\"http://www.chromium.org/\">Chromium</a>。它是谷歌浏览器的开源版。Chromium 的主要优点是速度和安全性。它同样拥有大量的附加组件。</p>\n<h3 id=\"toc_2\">2. LibreOffice</h3>\n<p><img title=\"linux-apps-02-libreoffice\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/4b02246613b823b1d7568cd8c7af6c79.jpg\" alt=\"linux-apps-02-libreoffice\"></p>\n<p><a href=\"https://www.libreoffice.org/\">LibreOffice</a> 是一个开源办公套件，其包括文字处理（Writer）、电子表格（Calc）、演示（Impress）、数据库（Base）、公式编辑器（Math）、矢量图和流程图（Draw）应用程序。它与 Microsoft Office 文档兼容，如果其基本功能不能满足需求，您可以使用 <a href=\"https://www.maketecheasier.com/best-libreoffice-extensions/\">LibreOffice 拓展</a>。</p>\n<p>LibreOffice 显然是 Linux 应用中至关重要的一员，如果您使用 Linux 的计算机，安装它是有必要的。</p>\n<h3 id=\"toc_3\">3. GIMP（GUN 图像处理程序GNU Image Manipulation Program）</h3>\n<p><img title=\"linux-apps-03-gimp\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/7c72e5b5a6595e7250a09f90ccd12e95.jpg\" alt=\"linux-apps-03-gimp\"></p>\n<p><a href=\"https://www.gimp.org/\">GIMP</a> 是一款非常强大的开源图片处理程序，它类似于 Photoshop。通过 GIMP，您可以编辑或是创建用于 Web 或是打印的光栅图（位图）。如果您对专业的图片处理没有概念，Linux 自然提供有更简单的图像编辑器，GIMP 看上去可能会复杂一点。GIMP 并不单纯提供图片裁剪和大小调整，它更覆盖了图层、滤镜、遮罩、路径和其他一些高级功能。</p>\n<h3 id=\"toc_4\">4. VLC 媒体播放器</h3>\n<p><img title=\"linux-apps-04-vlc\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/ec5bc4abf3e1daf3ee5371e3bfbc8a4a.jpg\" alt=\"linux-apps-04-vlc\"></p>\n<p><a href=\"http://www.videolan.org/\">VLC</a> 也许就是最好的影音播放器了。它是跨平台的，所以您可能在 Windows 上也听说过它。VLC 最特殊的地方是其拥有大量解码器（并不是所有的解码器都开放源代码），所以它几乎可以播放所有的影音文件。</p>\n<h3 id=\"toc_5\">5. Jitsy</h3>\n<p><img title=\"linux-apps-05-jitsi\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/106a94517baf8cca5c0302d20afdcb58.jpg\" alt=\"linux-apps-05-jitsi\"></p>\n<p><a href=\"https://jitsi.org/\">Jitsy</a> 完全是关于通讯的。您可以借助它使用 Google talk、Facebook chat、Yahoo、ICQ 和 XMPP。它是用于音视频通话（包括电话会议），桌面流desktop streaming和群组聊天的多用户工具。会话会被加密。Jistsy 同样能帮助您传输文件或记录电话。</p>\n<h3 id=\"toc_6\">6. Synaptic</h3>\n<p><img title=\"linux-apps-06-synaptic\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/a939e9ecbb8c51fa5908c7a234317cef.jpg\" alt=\"linux-apps-06-synaptic\"></p>\n<p><a href=\"http://www.nongnu.org/synaptic/\">Synaptic</a> 是一款基于 Debian 系统发行版的另一款应用程序安装程序。并不是所有基于 Debian 的 Linux 都安装有它，如果您使用基于 Debian 的 Linux 操作系统没有预装，也许您可以试一试。Synaptic 是一款用于添加或移除系统应用的 GUI 工具，甚至相对于许多发行版默认安装的 <a href=\"https://www.maketecheasier.com/are-linux-gui-software-centers-any-good/\">软件中心包管理器</a> ，经验丰富的 Linux 用户更亲睐于 Sunaptic。</p>\n<p><strong>相关链接</strong> : <a title=\"10 Free Linux Productivity Apps You Haven’t Heard Of\" href=\"https://www.maketecheasier.com/free-linux-productivity-apps-you-havent-heard-of/\">10 款您没听说过的 Linux 生产力应用程序</a></p>\n<h3 id=\"toc_7\">7. VirtualBox</h3>\n<p><img title=\"linux-apps-07-virtualbox\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/653bd651a823462de3513ae285eb14d4.jpg\" alt=\"linux-apps-07-virtualbox\"></p>\n<p><a href=\"https://www.virtualbox.org/\">VirtualBox</a> 能支持您在计算机上运行虚拟机。当您想在当前 Linux 发行版上安装其他发行版或操作系统时，使用虚拟机会方便许多。您同样可以通过它运行 Windows 应用程序，性能可能会稍弱，但是如果您有一台强大的计算机，就不会那么糟。</p>\n<h3 id=\"toc_8\">8. AisleRiot Solitaire（纸牌游戏）</h3>\n<p><img title=\"linux-apps-08-aisleriot\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/433400c4755063f31346d9ddcdf76188.jpg\" alt=\"linux-apps-08-aisleriot\"></p>\n<p>对于 Linux 的新用户来说，一款纸牌游戏并不是刚需，但是它真的太有趣了。当您进入这款纸牌游戏，您会发现，这是一款极好的纸牌游戏包。<a href=\"https://wiki.gnome.org/Aisleriot\">AisleRiot</a> 是 Linux 标志性的应用程序，原因是 – 它涵盖超过八十种纸牌游戏，包括流行的 Klondike、Bakers Dozen、Camelot 等等，作为预警 – 它是会上瘾的，您可能会花很长时间沉迷于此！</p>\n<p>根据您所使用的发行版，这些软件会有不同的安装方法。但是大多数都可以通过您使用的发行版中的包管理器安装使用，甚至它们可能会预装在您的发行版上。安装并且尝试它们想必是最好的，如果不合您的胃口，您可以轻松地删除它们。</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113775\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113775votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113775\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"}
{"url_object_id": "7a3fd4e360713292fb09393642fffc46", "title": "从业 24 年独立开发者：大多数同行都只看 5 年以内", "create_date": "2018/03/22", "url": "http://blog.jobbole.com/113778/", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/03/db3f0f9a2c81173f5758eed4074b7543.jpg"], "praise_nums": 1, "comment_nums": 0, "fav_nums": 1, "tags": "职场,游戏", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.gamelook.com.cn/2018/03/323982\">GameLook</a>   </div><p>GameLook报道/有人说，游戏行业的竞争越来越激烈，游戏数量的增加使得曝光率问题日益严重，但在Jeff Vogel看来，真正热爱游戏研发的人，是不会抱怨这些问题的，因为大多数人做开发者都是从1-5年的时间看待自己的游戏研发职业生涯，而真正想要把游戏当作职业的人，往往是考虑40年或者更长的周期。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/db3f0f9a2c81173f5758eed4074b7543.jpg\" alt=\"\" width=\"564\" height=\"293\"></p>\n<p>在24年的独立游戏研发生涯中，Spiderweb Software创始人Jeff Vogel学到了很多东西。在3月20日举行的GDC独立游戏峰会上，他分享了一些自己的心得，有些观点让人十分意外。</p>\n<p><strong>游戏是朝阳产业，创新不是唯一出路</strong></p>\n<p>Vogel强调，“游戏行业还是个朝阳产业，没有人无所不知，我们还有很多东西都需要弄明白，比如，如何设计这些游戏，如何创造、测试以及销售这些产品，如何为游戏做营销，如何给1亿美元预算的项目增加开箱子玩法而又不影响发布之后的口碑？”他提到自己的第一个游戏项目时候说，“这个项目并没有耗时太久，我当时有了一个想法，也就是小时候就喜欢的那些游戏，所以我要做的就是把小时候喜欢的游戏都回顾一遍，然后从每个游戏里汲取最好的创意。按照我的方法，我希望把它们变成让我觉得满意的游戏”。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/3ea9cfb97b6ce8d6c4919b5e34eb106f.jpg\" alt=\"\" width=\"698\" height=\"566\"></p>\n<p style=\"text-align: center\">Jeff Vogel的第一款游戏截图</p>\n<p>独立游戏非常适合做创新，但创新并不是唯一的出路。你必须知道，我们游戏行业的每个人都是站在巨人的肩膀上，所有的玩法都是在原有的玩法之上演变而来，我只了解自己喜欢的，然后复制这个想法，这就是我的创意过程，他鼓励其他开发者们用类似的方式，按照自己的个人需求去寻找创意，有人把游戏创意说的很玄，比如追求自己的灵感，这样的建议，但我的建议是千万不要这样做，这是一个非常现实的建议，我来说说原因。</p>\n<p>大多数人思考自己在游戏行业生涯的时候，往往是从1-5年的角度考虑问题，对于一些刚开始做游戏研发的人们来说，追寻自己的灵感似乎是非常合理的事情。但是，如果你把自己从事独立游戏研发行业的期限延长到40年或者更久的时间考虑，或许会有所帮助。</p>\n<p>这是一个特别长的时间，如果你在一个行业工作这么久，就会达到最高的工作效率，因为你需要维持生存，需要一个对应的生活方式，一个长久的想法，一个可持续的过程，保持自己不至于破产，因为，如果你因为一些想法而失去了立足之本，在接下来的40年里，它都会让你不断吃亏。</p>\n<p><strong>独立游戏要注重体验，远离消极玩家</strong></p>\n<p>当然，Vogel的创意也并不只是抄袭其他游戏的玩法，他对自己游戏的要求也是相对较高的，比如研发续作的时候，前作25%最差的部分需要被替换，提高整体游戏质量。他非常喜欢重复使用资源、代码和引擎，并认为所有人都不应该因此感到羞辱，比如有一个狼的icon，他在15款不同的游戏里使用过，“人们一直拿这个梗开我的玩笑，但我还是没有因此失业”。</p>\n<p>虽然Spiderweb的游戏有一定的用户群，而且口碑还不错，但这些游戏对于更大的用户群缺乏吸引力，有很大一部分原因是画质无法和3A游戏媲美，但Vogel说，“我非常反感所有人吐槽我的画面质量不够好，我也是投入了资金，专门招聘了美术师的，有些美术资源也是从比较大的渠道获得的，然而还是有人经常说，我的游戏画面很差，我以后再也不会浪费精力去专门提高美术质量了”。</p>\n<p>对于独立游戏开发者而言，这种批评的声音也是经常遇到的，人性有一部分是刻薄的，会对某些事物提出不合理的需求，而且在Steam这样的分销平台没有出现之前，Vogel做电话销售的时候就遇到过类似的问题。而到了互联网时代，这种问题就更加严重，“通常最愤怒的人不是完全匿名的，他们可能是五年前你的游戏最忠实的粉丝，然后你对游戏做出了改变，而且改掉的恰好是他们最喜欢的东西，他们就不再是你的粉丝，你要知道，有时候爱与恨之间的界限很小”。</p>\n<p>作为一个想要长期在游戏行业生存的开发者，Vogel表示，远离各种形式的骚扰是很重要的，作为一个成年人，虽然你很少会被人轻易激怒，但仍有很多事情会让你抓狂，所以Vogel基本上不会看自己的游戏在Steam平台的评论，也不访问论坛，如果被人喷，他还会暂时不登陆Twitter，等待事情平息了之后再登录，如果与一些玩家的关系闹僵，他会毫不犹豫的放弃这部分用户。Vogel说，“不要怕得罪用户，他们说客户总是对的，但实际上并非如此，用户一直是错的。但差别在于，你永远吵不赢他们。有时候你不得不对一部分玩家说，‘我的游戏不适合你，所以我不能增加你要的功能、不能做这样的资料片、不能满足你的要求’，对于你无法让他们满意的用户，退款是最好的方法”。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/b87866fb081fe1d1caf5bc8b5b63273f.jpg\" alt=\"\" width=\"714\" height=\"401\"></p>\n<p style=\"text-align: center\">《Geneforge 3》截图</p>\n<p>对于论坛管理，他说，“如果有人在论坛挑事，直接封掉就是了。但如果有人说，‘这些人又不会影响你的生意，不应该封他们’，那你可以连这些人一起封掉，这些消极的负面声音只会给你的社区带来不利影响，真正支持你的玩家会理解你的做法”。</p>\n<p>和所有的工作室一样，Spiderweb也经历了起伏，Vogel指出，2004年是最艰难的时候，那一年他的两款游戏，《Blades of Avernum》和《Geneforge 3》的销量都不佳。</p>\n<p>有人说，游戏开发者就像是艺术家，遭遇挫折在所难免，但Vogel认为，作为艺术家，你必须成长，“我们更像是玩具制造者，我们卖的是娱乐体验，我们的作品是用来给人们的大脑带来消遣的，我们卖的是惊喜，而自满、平淡无奇和重复会扼杀惊喜。如果你想做续作，很好，但你的续作最好是加入一些新东西，而且是越早越好，因为，如果玩家们开始发现你的需走只是重复，那么就会以拒绝购买的方式让你看到他们的答案”。</p>\n<p>最后，Vogel还提醒同行们不要过度消耗自己的健康，“不要因为熬夜工作而感到自豪，你需要睡眠才能活的长久，最好是挑一把好的椅子，因为有一天如果你的脊椎不行了，就会追悔莫及”。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113778\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113778votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113778\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"}
{"url_object_id": "ab0322e9007276c76fe370fbf4a95a33", "title": "Linux 中的“大内存页”（hugepage）是个什么？", "create_date": "2018/03/24", "url": "http://blog.jobbole.com/113782/", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/01/1b8322e1daff605d71fc81e724421f17.jpg"], "praise_nums": 1, "comment_nums": 0, "fav_nums": 1, "tags": "IT技术,Linux", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://kerneltalks.com/services/what-is-huge-pages-in-linux/\">Shrikant Lavhate</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9450-1.html\">Linux中国/DarkSun</a>   </div><blockquote><p>学习 Linux 中的大内存页hugepage。理解什么是“大内存页”，如何进行配置，如何查看当前状态以及如何禁用它。</p></blockquote>\n<p>本文中我们会详细介绍大内存页huge page，让你能够回答：Linux 中的“大内存页”是什么？在 RHEL6、RHEL7、Ubuntu 等 Linux 中，如何启用/禁用“大内存页”？如何查看“大内存页”的当前值？</p>\n<p>首先让我们从“大内存页”的基础知识开始讲起。</p>\n<h3 id=\"toc_1\">Linux 中的“大内存页”是个什么玩意？</h3>\n<p>“大内存页”有助于 Linux 系统进行虚拟内存管理。顾名思义，除了标准的 4KB 大小的页面外，它们还能帮助管理内存中的巨大的页面。使用“大内存页”，你最大可以定义 1GB 的页面大小。</p>\n<p>在系统启动期间，你能用“大内存页”为应用程序预留一部分内存。这部分内存，即被“大内存页”占用的这些存储器永远不会被交换出内存。它会一直保留其中，除非你修改了配置。这会极大地提高像 Oracle 数据库这样的需要海量内存的应用程序的性能。</p>\n<h3 id=\"toc_2\">为什么使用“大内存页”？</h3>\n<p>在虚拟内存管理中，内核维护一个将虚拟内存地址映射到物理地址的表，对于每个页面操作，内核都需要加载相关的映射。如果你的内存页很小，那么你需要加载的页就会很多，导致内核会加载更多的映射表。而这会降低性能。</p>\n<p>使用“大内存页”，意味着所需要的页变少了。从而大大减少由内核加载的映射表的数量。这提高了内核级别的性能最终有利于应用程序的性能。</p>\n<p>简而言之，通过启用“大内存页”，系统具只需要处理较少的页面映射表，从而减少访问/维护它们的开销！</p>\n<h3 id=\"toc_3\">如何配置“大内存页”？</h3>\n<p>运行下面命令来查看当前“大内存页”的详细内容。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae10979d24ce321873304\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nroot@kerneltalks # grep Huge /proc/meminfo\r\nAnonHugePages:         0 kB\r\nHugePages_Total:       0\r\nHugePages_Free:        0\r\nHugePages_Rsvd:        0\r\nHugePages_Surp:        0\r\nHugepagesize:       2048 kB\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae10979d24ce321873304-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10979d24ce321873304-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae10979d24ce321873304-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10979d24ce321873304-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ae10979d24ce321873304-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10979d24ce321873304-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ae10979d24ce321873304-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10979d24ce321873304-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae10979d24ce321873304-1\"><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">kerneltalks</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\"># grep Huge /proc/meminfo</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10979d24ce321873304-2\"><span class=\"crayon-v\">AnonHugePages</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">         </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">kB</span></div><div class=\"crayon-line\" id=\"crayon-5ae10979d24ce321873304-3\"><span class=\"crayon-v\">HugePages_Total</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10979d24ce321873304-4\"><span class=\"crayon-v\">HugePages_Free</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line\" id=\"crayon-5ae10979d24ce321873304-5\"><span class=\"crayon-v\">HugePages_Rsvd</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10979d24ce321873304-6\"><span class=\"crayon-v\">HugePages_Surp</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line\" id=\"crayon-5ae10979d24ce321873304-7\"><span class=\"crayon-v\">Hugepagesize</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">2048</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10979d24ce321873304-8\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>从上面输出可以看到，每个页的大小为 2MB（<code>Hugepagesize</code>），并且系统中目前有 <code>0</code> 个“大内存页”（<code>HugePages_Total</code>）。这里“大内存页”的大小可以从 <code>2MB</code> 增加到 <code>1GB</code>。</p>\n<p>运行下面的脚本可以知道系统当前需要多少个巨大页。该脚本取之于 Oracle。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae10979d24d7577640826\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n#!/bin/bash\r\n#\r\n# hugepages_settings.sh\r\n#\r\n# Linux bash script to compute values for the\r\n# recommended HugePages/HugeTLB configuration\r\n#\r\n# Note: This script does calculation for all shared memory\r\n# segments available when the script is run, no matter it\r\n# is an Oracle RDBMS shared memory segment or not.\r\n# Check for the kernel version\r\nKERN=`uname -r | awk -F. '{ printf(\"%d.%d\\n\",$1,$2); }'`\r\n# Find out the HugePage size\r\nHPG_SZ=`grep Hugepagesize /proc/meminfo | awk {'print $2'}`\r\n# Start from 1 pages to be on the safe side and guarantee 1 free HugePage\r\nNUM_PG=1\r\n# Cumulative number of pages required to handle the running shared memory segments\r\nfor SEG_BYTES in `ipcs -m | awk {'print $5'} | grep \"[0-9][0-9]*\"`\r\ndo\r\n   MIN_PG=`echo \"$SEG_BYTES/($HPG_SZ*1024)\" | bc -q`\r\n   if [ $MIN_PG -gt 0 ]; then\r\n      NUM_PG=`echo \"$NUM_PG+$MIN_PG+1\" | bc -q`\r\n   fi\r\ndone\r\n# Finish with results\r\ncase $KERN in\r\n   '2.4') HUGETLB_POOL=`echo \"$NUM_PG*$HPG_SZ/1024\" | bc -q`;\r\n          echo \"Recommended setting: vm.hugetlb_pool = $HUGETLB_POOL\" ;;\r\n   '2.6' | '3.8' | '3.10' | '4.1' ) echo \"Recommended setting: vm.nr_hugepages = $NUM_PG\" ;;\r\n    *) echo \"Unrecognized kernel version $KERN. Exiting.\" ;;\r\nesac\r\n# End\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae10979d24d7577640826-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10979d24d7577640826-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae10979d24d7577640826-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10979d24d7577640826-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ae10979d24d7577640826-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10979d24d7577640826-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ae10979d24d7577640826-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10979d24d7577640826-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ae10979d24d7577640826-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10979d24d7577640826-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ae10979d24d7577640826-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10979d24d7577640826-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ae10979d24d7577640826-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10979d24d7577640826-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5ae10979d24d7577640826-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10979d24d7577640826-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5ae10979d24d7577640826-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10979d24d7577640826-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5ae10979d24d7577640826-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10979d24d7577640826-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5ae10979d24d7577640826-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10979d24d7577640826-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5ae10979d24d7577640826-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10979d24d7577640826-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5ae10979d24d7577640826-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10979d24d7577640826-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5ae10979d24d7577640826-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10979d24d7577640826-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5ae10979d24d7577640826-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10979d24d7577640826-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5ae10979d24d7577640826-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10979d24d7577640826-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5ae10979d24d7577640826-33\">33</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae10979d24d7577640826-1\"><span class=\"crayon-p\">#!/bin/bash</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10979d24d7577640826-2\"><span class=\"crayon-p\">#</span></div><div class=\"crayon-line\" id=\"crayon-5ae10979d24d7577640826-3\"><span class=\"crayon-p\"># hugepages_settings.sh</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10979d24d7577640826-4\"><span class=\"crayon-p\">#</span></div><div class=\"crayon-line\" id=\"crayon-5ae10979d24d7577640826-5\"><span class=\"crayon-p\"># Linux bash script to compute values for the</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10979d24d7577640826-6\"><span class=\"crayon-p\"># recommended HugePages/HugeTLB configuration</span></div><div class=\"crayon-line\" id=\"crayon-5ae10979d24d7577640826-7\"><span class=\"crayon-p\">#</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10979d24d7577640826-8\"><span class=\"crayon-p\"># Note: This script does calculation for all shared memory</span></div><div class=\"crayon-line\" id=\"crayon-5ae10979d24d7577640826-9\"><span class=\"crayon-p\"># segments available when the script is run, no matter it</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10979d24d7577640826-10\"><span class=\"crayon-p\"># is an Oracle RDBMS shared memory segment or not.</span></div><div class=\"crayon-line\" id=\"crayon-5ae10979d24d7577640826-11\"><span class=\"crayon-p\"># Check for the kernel version</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10979d24d7577640826-12\"><span class=\"crayon-v\">KERN</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">uname</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">r</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">awk</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">F</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'{ printf(\"%d.%d\\n\",$1,$2); }'</span><span class=\"crayon-sy\">`</span></div><div class=\"crayon-line\" id=\"crayon-5ae10979d24d7577640826-13\"><span class=\"crayon-p\"># Find out the HugePage size</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10979d24d7577640826-14\"><span class=\"crayon-v\">HPG_SZ</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">`</span><span class=\"crayon-e\">grep </span><span class=\"crayon-v\">Hugepagesize</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">proc</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">meminfo</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">awk</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">'print $2'</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">`</span></div><div class=\"crayon-line\" id=\"crayon-5ae10979d24d7577640826-15\"><span class=\"crayon-p\"># Start from 1 pages to be on the safe side and guarantee 1 free HugePage</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10979d24d7577640826-16\"><span class=\"crayon-v\">NUM_PG</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-5ae10979d24d7577640826-17\"><span class=\"crayon-p\"># Cumulative number of pages required to handle the running shared memory segments</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10979d24d7577640826-18\"><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">SEG_BYTES </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">ipcs</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">awk</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">'print $5'</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">grep</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"[0-9][0-9]*\"</span><span class=\"crayon-sy\">`</span></div><div class=\"crayon-line\" id=\"crayon-5ae10979d24d7577640826-19\"><span class=\"crayon-st\">do</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10979d24d7577640826-20\"><span class=\"crayon-h\">   </span><span class=\"crayon-v\">MIN_PG</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">`</span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"$SEG_BYTES/($HPG_SZ*1024)\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">q</span><span class=\"crayon-sy\">`</span></div><div class=\"crayon-line\" id=\"crayon-5ae10979d24d7577640826-21\"><span class=\"crayon-h\">   </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">MIN_PG</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">gt</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">then</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10979d24d7577640826-22\"><span class=\"crayon-h\">      </span><span class=\"crayon-v\">NUM_PG</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">`</span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"$NUM_PG+$MIN_PG+1\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">q</span><span class=\"crayon-sy\">`</span></div><div class=\"crayon-line\" id=\"crayon-5ae10979d24d7577640826-23\"><span class=\"crayon-h\">   </span><span class=\"crayon-e\">fi</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10979d24d7577640826-24\"><span class=\"crayon-v\">done</span></div><div class=\"crayon-line\" id=\"crayon-5ae10979d24d7577640826-25\"><span class=\"crayon-p\"># Finish with results</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10979d24d7577640826-26\"><span class=\"crayon-st\">case</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-e\">KERN </span><span class=\"crayon-st\">in</span></div><div class=\"crayon-line\" id=\"crayon-5ae10979d24d7577640826-27\"><span class=\"crayon-h\">   </span><span class=\"crayon-s\">'2.4'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">HUGETLB_POOL</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">`</span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"$NUM_PG*$HPG_SZ/1024\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">q</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10979d24d7577640826-28\"><span class=\"crayon-h\">          </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Recommended setting: vm.hugetlb_pool = $HUGETLB_POOL\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">;</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ae10979d24d7577640826-29\"><span class=\"crayon-h\">   </span><span class=\"crayon-s\">'2.6'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'3.8'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'3.10'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'4.1'</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Recommended setting: vm.nr_hugepages = $NUM_PG\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">;</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10979d24d7577640826-30\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Unrecognized kernel version $KERN. Exiting.\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">;</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ae10979d24d7577640826-31\"><span class=\"crayon-v\">esac</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10979d24d7577640826-32\"><span class=\"crayon-p\"># End</span></div><div class=\"crayon-line\" id=\"crayon-5ae10979d24d7577640826-33\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0040 seconds] -->\r\n<p>将它以 <code>hugepages_settings.sh</code> 为名保存到 <code>/tmp</code> 中，然后运行之：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae10979d24dc154673548\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nroot@kerneltalks # sh /tmp/hugepages_settings.sh\r\nRecommended setting: vm.nr_hugepages = 124\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae10979d24dc154673548-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10979d24dc154673548-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae10979d24dc154673548-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae10979d24dc154673548-1\"><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">kerneltalks</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\"># sh /tmp/hugepages_settings.sh</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10979d24dc154673548-2\"><span class=\"crayon-e\">Recommended </span><span class=\"crayon-v\">setting</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">vm</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">nr_hugepages</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">124</span></div><div class=\"crayon-line\" id=\"crayon-5ae10979d24dc154673548-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>你的输出类似如上结果，只是数字会有一些出入。</p>\n<p>这意味着，你系统需要 124 个每个 2MB 的“大内存页”！若你设置页面大小为 4MB，则结果就变成了 62。你明白了吧？</p>\n<h3 id=\"toc_4\">配置内核中的“大内存页”</h3>\n<p>本文最后一部分内容是配置上面提到的 <a href=\"https://kerneltalks.com/linux/how-to-tune-kernel-parameters-in-linux/\">内核参数 </a> ，然后重新加载。将下面内容添加到 <code>/etc/sysctl.conf</code> 中，然后输入 <code>sysctl -p</code> 命令重新加载配置。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae10979d24df065702987\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nvm.nr_hugepages=126\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae10979d24df065702987-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10979d24df065702987-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae10979d24df065702987-1\"><span class=\"crayon-v\">vm</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">nr_hugepages</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">126</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10979d24df065702987-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>注意我们这里多加了两个额外的页，因为我们希望在实际需要的页面数量之外多一些额外的空闲页。</p>\n<p>现在，内核已经配置好了，但是要让应用能够使用这些“大内存页”还需要提高内存的使用阀值。新的内存阀值应该为 126 个页 x 每个页 2 MB = 252 MB，也就是 258048 KB。</p>\n<p>你需要编辑 <code>/etc/security/limits.conf</code> 中的如下配置：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae10979d24e3751552413\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsoft memlock 258048\r\nhard memlock 258048\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae10979d24e3751552413-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae10979d24e3751552413-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae10979d24e3751552413-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae10979d24e3751552413-1\"><span class=\"crayon-e\">soft </span><span class=\"crayon-i\">memlock</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">258048</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae10979d24e3751552413-2\"><span class=\"crayon-e\">hard </span><span class=\"crayon-i\">memlock</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">258048</span></div><div class=\"crayon-line\" id=\"crayon-5ae10979d24e3751552413-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>某些情况下，这些设置是在指定应用的文件中配置的，比如 Oracle DB 就是在 <code>/etc/security/limits.d/99-grid-oracle-limits.conf</code> 中配置的。</p>\n<p>这就完成了！你可能还需要重启应用来让应用来使用这些新的巨大页。</p>\n<p>（LCTT 译注：此外原文有误，“透明大内存页”和“大内存页”不同，而且，在 Redhat 系统中，“大内存页” 不是默认启用的，而“透明大内存页”是启用的。因此这个段落删除了。）</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113782\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113782votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113782\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"}
{"url_object_id": "86a8795768a1192f6a4d22bbb49ab0d7", "title": "刚开始学编程？这几款小工具能让你事半功倍", "create_date": "2018/03/26", "url": "http://blog.jobbole.com/113785/", "front_image_url": ["https://pic.36krcnd.com/201803/10141844/8fkz2ekh01zhphjt.jpeg!1200"], "praise_nums": 2, "comment_nums": 1, "fav_nums": 7, "tags": "IT技术,Web前端,编程", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://medium.freecodecamp.org/tools-i-wish-i-had-known-about-when-i-started-coding-57849efd9248\">Mario Hoyos</a>   译文出处：<a target=\"_blank\" href=\"http://36kr.com/p/5121154.html\">36氪</a>   </div><p><img src=\"https://pic.36krcnd.com/201803/10141844/8fkz2ekh01zhphjt.jpeg!1200\" alt=\"åå¼å§å­¦ç¼ç¨ï¼è¿å æ¬¾å°å·¥å·è½è®©ä½ äºååå\"></p>\n<p>科技行业里，可供人们使用的工具成百上千，你要怎么知道用哪一种上手最合适呢？</p>\n<p>拿最近刚进入编程这行的人来说吧，大量的工具信息堆砌过来其实毫无益处，反而会无从下手。我发现在自己的开发过程中，很多安装的扩展工具不仅没有真正起到助益作用，反而常常妨碍了正常的开发工作。</p>\n<p>我不是专家，不过随着时间的推移，我还是编制了一份工具清单，这些工具已经证明对我非常有用。如果你刚刚开始学习怎么编程的话，这个清单能给你提供一些指导。如果你是个经验丰富的开发人员，也希望你能从中学到一些新的东西。</p>\n<p>我将把这篇文章分为Chrome扩展程序和VS代码扩展扩展程序两部分。我知道还有其他的浏览器和文本编辑器，但是我想你当然只能在你能找到的工具里选择，所以还是别因为个人喜好而引起一场宗教般的争论。</p>\n<p>请随便选。</p>\n<h3>Chrome扩展程序</h3>\n<p><span class=\"load-html-img loaded\"><img src=\"http://jbcdn2.b0.upaiyun.com/2018/03/8b4aab0d40f4316375f7cd578ff0286e.jpeg\" alt=\"刚开始学编程？这几款小工具能让你事半功倍\"></span></p>\n<p>现在设我是一位web开发人员，以Chrome为阵地。下面是一些能让我少花点时间的工具：</p>\n<ul class=\" list-paddingleft-2\">\n<li><a href=\"https://chrome.google.com/webstore/detail/whatfont/jabopobgcpjmedljpbcaablpmlmfcogm?hl=en\">WhatFont</a> —— 名字就说明了一切。这是找出你最喜欢网站使用的字体的简单方法，这样你就可以为己所用了。</li>\n<li><a href=\"https://chrome.google.com/webstore/detail/pesticide-for-chrome/bblbgcheenepgnnajgfpiicnbbdmmooh?hl=en\">Pesticide</a>—— 修改CSS的绝佳程序。当我试着学习匣子模型的时候，它简直就是救命稻草般的存在。</li>\n<li><a href=\"https://chrome.google.com/webstore/detail/colorzilla/bhlhnicpbhignbdhedgjhgdocnmhomnp?hl=en\">Colorzilla</a> ——用于复制确切颜色的一个网站，用它可以将颜色直接复制到剪贴板上，这样你就没必要花太多时间获得正确的RGBA组合了。</li>\n<li><a href=\"https://chrome.google.com/webstore/detail/css-peeper/mbnbehikldjhnfehhnaidhjhoofhpehk?hl=en\">CSS Peeper</a>——查看网站使用的颜色时非常方便。在你一开始山寨你认为酷的网站的时候很管用。这个程序能让你查看它们的幕后的色彩方案。</li>\n<li><a href=\"https://chrome.google.com/webstore/detail/wappalyzer/gppongmhjkpfnbhagpmjfkannfbllamg?hl=en\">Wappalyzer</a> ——想要获悉你在网站上看到的是什么技术，这个程序很有用。想知道某网站使用什么样的框架或者它承载了什么服务？这个照样管用。</li>\n<li><a href=\"https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi?hl=en\">React Dev Tools</a>——一款用于调试应用程序的工具。有一点要提一下，它只有在你编写React程序时才有用。</li>\n<li><a href=\"https://chrome.google.com/webstore/detail/redux-devtools/lmhkpmbekcpmknklioeibfkpmmfibljd?hl=en\">Redux Dev Tools</a>——一款用于调试应用程序的工具。有一点要提一下，它只有在你编写Redux程序时才有用。</li>\n<li><a href=\"https://chrome.google.com/webstore/detail/json-formatter/bcjindcccaagfpapjjmafapmmgkkhgoa?hl=en\">JSON Formatter</a> ——让JSON在浏览器中看起来更一目了然的不二之选。也许麻烦的JSON让你苦不堪言，不过只要用了这个软件，找到你要找的东西，所花费的时间会大幅缩短。</li>\n<li><a href=\"https://chrome.google.com/webstore/detail/vimeo-repeat-speed/noonakfaafcdaagngpjehilgegefdima?hl=en\">Vimeo Repeat and Speed</a> ——加速Vimeo视频的绝佳工具。如果你像大多数的web开发人员一样观看视频教程，你就会知道用1.25倍的常规回放速度观看它们是多么的方便。本程序同时也有适用于YouTube的版本。</li>\n</ul>\n<h3>VS Code扩展程序</h3>\n<p><span class=\"load-html-img loaded\"><img src=\"http://jbcdn2.b0.upaiyun.com/2018/03/6f53b4a3d95c1c5b648380d21c6e90fa.jpeg\" alt=\"刚开始学编程？这几款小工具能让你事半功倍\"></span></p>\n<p>Visual Studio Code是我写代码时的不二之选。</p>\n<p>每个人都有他自己喜欢的文本编辑器，我也不例外。不过，我还是想把这些扩展程序介绍给你，而它们对你所使用的大多数编辑器都适用。看看我最喜欢的扩展程序有哪些：</p>\n<ul class=\" list-paddingleft-2\">\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=formulahendry.auto-rename-tag\">Auto Rename Tag </a>——自动重命名成对的HTML标记。假如你创建了一个&lt;p&gt;标记。现在你想更改它。有了这个软件，你只需要更改一个就行，另一个会自动修改。从理论上来说，使用这个软件可以把你的工作效率提升一倍。</li>\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=ecmel.vscode-html-css\">HTML CSS Support</a> ——HTML文档的CSS支持工具。该工具在获得一些简洁的语法高亮显示和代码建议方面非常有用。</li>\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=abusaidm.html-snippets\">HTML Snippets</a> ——这一工具在代码分段方面非常有用，可以为你节省大量的时间。它能跟Emmet配对，这样一来你甚至都不用再真正键入HTML了。</li>\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=dzannotti.vscode-babel-coloring\">Babel ES6/ES7</a> ——JavaScript Babel的辅助工具。如果你用的是Babel，这个工具可以让你更容易区分代码。如果你喜欢JavaScript，那务必也不要错过这款软件。</li>\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=CoenraadS.bracket-pair-colorizer\">Bracket Pair Colorizer </a>——色彩可视化工具。如果你没有准确地括号，那这个工具对于发现因此导致的许多常见漏洞十分方便。</li>\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint\">ESLint </a>——你在编写代码的时候，利用这个软件可以轻易获取有关漏洞的提示，而且在编码过程中，它还可以帮助你养成良好的编码习惯。</li>\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=spywhere.guides\">Guides</a> ——这一工具可以被用来添加额外的指导行代码。这是另一个视觉提示，以确保你正确地括号了。</li>\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=whtouche.vscode-js-console-utils\">JavaScript Console Utils </a>——使控制台日志记录变得更为简单可行。如果你像大多数开发人员一样，你会发现自己需要在调试流中登录到控制台（我知道我们应该使用调试器）。这个实用的程序使得创建有用的console.log()语句变得易如反掌。</li>\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=streetsidesoftware.code-spell-checker\">Code Spell Checker</a> ——这一工具正如其名，是拼写检查程序。漏洞的的另一个常见来源是变量或函数名。这一拼写检查工具可以查找不常见的单词，而且还可以把我们用JavaScript编写的东西进行有效的审核。</li>\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=eamodio.gitlens\">Git Lens</a> ——可以让我们对某文件何时、以及由何人进行更改变得一目了然。当代码被破坏时，我们就能找到该负责任的人，而不是让你当替罪羊了。</li>\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=christian-kohler.path-intellisense\">Path Intellisense</a> ——文件路径自动完成程序。这样一来从其他文件中导入重要的东西就非常方便了。这一工具使文件导航变得轻而易举。</li>\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode\">Prettier </a>——自动代码格式化程序。忘掉那些你不得不手动缩进代码的日子吧，有了这个工具，事情就变得简单多啦。这个程序会比你自己做得更快更好。对这个程序我是鼎力推荐的。</li>\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=robertohuertasm.vscode-icons\">VSCode-Icons</a> ——将图标添加到文件谱中。如果文件结构非常不科学，你的眼睛想罢工的话，这个程序可能会有所帮助。它对于你正在制作的任何文件都能提供有用的图标辅助，能使你更为轻易地区分看到的内容。</li>\n</ul>\n<h3>总结</h3>\n<p>你肯定也有自己中意的工具，这些工具对你的开发工作来说是必不可少的。也希望我上面提到的一些工具能够提高你的工作效率。</p>\n<p>但是千万不要落入贪多不烂的陷阱，因为它可能耗费很多时间。</p>\n<p>希望你能在评论区留下你最喜欢的工具，这样我们就可以共同进步了。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113785\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113785votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113785\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 7 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"}
{"url_object_id": "d7679705b6786b2bb8061b616470a651", "title": "深入学习 Redis（1）：Redis 内存模型", "create_date": "2018/03/27", "url": "http://blog.jobbole.com/113789/", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2016/04/49961db8952e63d98b519b76a2daa5e2.png"], "praise_nums": 3, "comment_nums": 4, "fav_nums": 8, "tags": "IT技术,Redis,数据库", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.cnblogs.com/kismetv/p/8654978.html\">编程迷思</a>   </div><h2>前言</h2>\n<p>Redis是目前最火爆的内存数据库之一，通过在内存中读写数据，大大提高了读写速度，可以说Redis是实现网站高并发不可或缺的一部分。</p>\n<p>我们使用Redis时，会接触Redis的5种对象类型（字符串、哈希、列表、集合、有序集合），丰富的类型是Redis相对于Memcached等的一大优势。在了解Redis的5种对象类型的用法和特点的基础上，进一步了解Redis的内存模型，对Redis的使用有很大帮助，例如：</p>\n<p>1、估算Redis内存使用量。目前为止，内存的使用成本仍然相对较高，使用内存不能无所顾忌；根据需求合理的评估Redis的内存使用量，选择合适的机器配置，可以在满足需求的情况下节约成本。</p>\n<p>2、优化内存占用。了解Redis内存模型可以选择更合适的数据类型和编码，更好的利用Redis内存。</p>\n<p>3、分析解决问题。当Redis出现阻塞、内存占用等问题时，尽快发现导致问题的原因，便于分析解决问题。</p>\n<p>这篇文章主要介绍Redis的内存模型（以3.0为例），包括Redis占用内存的情况及如何查询、不同的对象类型在内存中的编码方式、内存分配器(jemalloc)、简单动态字符串(SDS)、RedisObject等；然后在此基础上介绍几个Redis内存模型的应用。</p>\n<p>在后面的文章中，会陆续介绍关于Redis高可用的内容，包括主从复制、哨兵、集群等等，欢迎关注。</p>\n<p> </p>\n<h2>目录</h2>\n<p><a href=\"#t1\">一、Redis内存统计</a></p>\n<p><a href=\"#t2\">二、Redis内存划分</a></p>\n<p><a href=\"#t21\">1、数据（或者称为对象）</a></p>\n<p><a href=\"#t22\">2、进程本身运行需要的内存</a></p>\n<p><a href=\"#t23\">3、缓冲内存</a></p>\n<p><a href=\"#t24\">4、内存碎片</a></p>\n<p><a href=\"#t3\">三、Redis数据存储的细节</a></p>\n<p><a href=\"#t31\">1、概述</a></p>\n<p><a href=\"#t32\">2、jemalloc</a></p>\n<p><a href=\"#t33\">3、redisObject</a></p>\n<p><a href=\"#t34\">4、SDS</a></p>\n<p><a href=\"#t4\">四、Redis的对象类型与内部编码</a></p>\n<p><a href=\"#t41\">1、字符串</a></p>\n<p><a href=\"#t42\">2、列表</a></p>\n<p><a href=\"#t43\">3、哈希</a></p>\n<p><a href=\"#t44\">4、集合</a></p>\n<p><a href=\"#t45\">5、有序集合</a></p>\n<p><a href=\"#t5\">五、应用举例</a></p>\n<p><a href=\"#t51\">1、估算Redis内存使用量</a></p>\n<p><a href=\"#t52\">2、优化内存占用</a></p>\n<p><a href=\"#t53\">3、关注内存碎片率</a></p>\n<p><a href=\"#t6\">六、参考文献</a></p>\n<h1><a name=\"t1\"></a>一、Redis内存统计</h1>\n<p>工欲善其事必先利其器，在说明Redis内存之前首先说明如何统计Redis使用内存的情况。</p>\n<p>在客户端通过redis-cli连接服务器后（后面如无特殊说明，客户端一律使用redis-cli），通过info命令可以查看内存使用情况：</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae1311eec05b073117064\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ninfo memory</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae1311eec05b073117064-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae1311eec05b073117064-1\"><span class=\"crayon-e\">info </span><span class=\"crayon-v\">memory</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n\n</div>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/8c3d1b1af4dea80d14b73aad3232d6c2.png\" alt=\"\"></p>\n<p>其中，info命令可以显示redis服务器的许多信息，包括服务器基本信息、CPU、内存、持久化、客户端连接信息等等；memory是参数，表示只显示内存相关的信息。</p>\n<p>返回结果中比较重要的几个说明如下：</p>\n<p>（1）<strong>used_memory</strong><strong>：</strong>Redis分配器分配的内存总量（单位是字节），包括使用的虚拟内存（即swap）；Redis分配器后面会介绍。used_memory_human只是显示更友好。</p>\n<p>（2）<strong>used_memory_rss</strong><strong>：</strong>Redis进程占据操作系统的内存（单位是字节），与top及ps命令看到的值是一致的；除了分配器分配的内存之外，used_memory_rss还包括进程运行本身需要的内存、内存碎片等，但是不包括虚拟内存。</p>\n<p>因此，used_memory和used_memory_rss，前者是从Redis角度得到的量，后者是从操作系统角度得到的量。二者之所以有所不同，一方面是因为内存碎片和Redis进程运行需要占用内存，使得前者可能比后者小，另一方面虚拟内存的存在，使得前者可能比后者大。</p>\n<p>由于在实际应用中，Redis的数据量会比较大，此时进程运行占用的内存与Redis数据量和内存碎片相比，都会小得多；因此used_memory_rss和used_memory的比例，便成了衡量Redis内存碎片率的参数；这个参数就是mem_fragmentation_ratio。</p>\n<p>（3）<strong>mem_fragmentation_ratio</strong><strong>：</strong>内存碎片比率，该值是used_memory_rss / used_memory的比值。</p>\n<p>mem_fragmentation_ratio一般大于1，且该值越大，内存碎片比例越大。mem_fragmentation_ratio&lt;1，说明Redis使用了虚拟内存，由于虚拟内存的媒介是磁盘，比内存速度要慢很多，当这种情况出现时，应该及时排查，如果内存不足应该及时处理，如增加Redis节点、增加Redis服务器的内存、优化应用等。</p>\n<p>一般来说，mem_fragmentation_ratio在1.03左右是比较健康的状态（对于jemalloc来说）；上面截图中的mem_fragmentation_ratio值很大，是因为还没有向Redis中存入数据，Redis进程本身运行的内存使得used_memory_rss 比used_memory大得多。</p>\n<p>（4）<strong>mem_allocator</strong><strong>：</strong>Redis使用的内存分配器，在编译时指定；可以是 libc 、jemalloc或者tcmalloc，默认是jemalloc；截图中使用的便是默认的jemalloc。</p>\n<h1><a name=\"t2\"></a>二、Redis内存划分</h1>\n<p>Redis作为内存数据库，在内存中存储的内容主要是数据（键值对）；通过前面的叙述可以知道，除了数据以外，Redis的其他部分也会占用内存。</p>\n<p>Redis的内存占用主要可以划分为以下几个部分：</p>\n<h2><a name=\"t21\"></a>1、数据</h2>\n<p>作为数据库，数据是最主要的部分；这部分占用的内存会统计在used_memory中。</p>\n<p>Redis使用键值对存储数据，其中的值（对象）包括5种类型，即字符串、哈希、列表、集合、有序集合。这5种类型是Redis对外提供的，实际上，在Redis内部，每种类型可能有2种或更多的内部编码实现；此外，Redis在存储对象时，并不是直接将数据扔进内存，而是会对对象进行各种包装：如redisObject、SDS等；这篇文章后面将重点介绍Redis中数据存储的细节。</p>\n<h2><a name=\"t22\"></a>2、进程本身运行需要的内存</h2>\n<p>Redis主进程本身运行肯定需要占用内存，如代码、常量池等等；这部分内存大约几兆，在大多数生产环境中与Redis数据占用的内存相比可以忽略。这部分内存不是由jemalloc分配，因此不会统计在used_memory中。</p>\n<p>补充说明：除了主进程外，Redis创建的子进程运行也会占用内存，如Redis执行AOF、RDB重写时创建的子进程。当然，这部分内存不属于Redis进程，也不会统计在used_memory和used_memory_rss中。</p>\n<h2><a name=\"t23\"></a>3、缓冲内存</h2>\n<p>缓冲内存包括客户端缓冲区、复制积压缓冲区、AOF缓冲区等；其中，客户端缓冲存储客户端连接的输入输出缓冲；复制积压缓冲用于部分复制功能；AOF缓冲区用于在进行AOF重写时，保存最近的写入命令。在了解相应功能之前，不需要知道这些缓冲的细节；这部分内存由jemalloc分配，因此会统计在used_memory中。</p>\n<h2><a name=\"t24\"></a>4、内存碎片</h2>\n<p>内存碎片是Redis在分配、回收物理内存过程中产生的。例如，如果对数据的更改频繁，而且数据之间的大小相差很大，可能导致redis释放的空间在物理内存中并没有释放，但redis又无法有效利用，这就形成了内存碎片。内存碎片不会统计在used_memory中。</p>\n<p>内存碎片的产生与对数据进行的操作、数据的特点等都有关；此外，与使用的内存分配器也有关系：如果内存分配器设计合理，可以尽可能的减少内存碎片的产生。后面将要说到的jemalloc便在控制内存碎片方面做的很好。</p>\n<p>如果Redis服务器中的内存碎片已经很大，可以通过安全重启的方式减小内存碎片：因为重启之后，Redis重新从备份文件中读取数据，在内存中进行重排，为每个数据重新选择合适的内存单元，减小内存碎片。</p>\n<h1><a name=\"t3\"></a>三、Redis数据存储的细节</h1>\n<h2><a name=\"t31\"></a>1、概述</h2>\n<p>关于Redis数据存储的细节，涉及到内存分配器（如jemalloc）、简单动态字符串（SDS）、5种对象类型及内部编码、redisObject。在讲述具体内容之前，先说明一下这几个概念之间的关系。</p>\n<p>下图是执行set hello world时，所涉及到的数据模型。</p>\n<p style=\"text-align: center\"><img src=\"http://jbcdn2.b0.upaiyun.com/2018/03/e68530a523ccf27f161597f21994f842.png\" alt=\"\"></p>\n<p style=\"text-align: center\">图片来源：https://searchdatabase.techtarget.com.cn/7-20218/</p>\n<p>（1）dictEntry：Redis是Key-Value数据库，因此对每个键值对都会有一个dictEntry，里面存储了指向Key和Value的指针；next指向下一个dictEntry，与本Key-Value无关。</p>\n<p>（2）Key：图中右上角可见，Key（”hello”）并不是直接以字符串存储，而是存储在SDS结构中。</p>\n<p>（3）redisObject：Value(“world”)既不是直接以字符串存储，也不是像Key一样直接存储在SDS中，而是存储在redisObject中。实际上，不论Value是5种类型的哪一种，都是通过redisObject来存储的；而redisObject中的type字段指明了Value对象的类型，ptr字段则指向对象所在的地址。不过可以看出，字符串对象虽然经过了redisObject的包装，但仍然需要通过SDS存储。</p>\n<p>实际上，redisObject除了type和ptr字段以外，还有其他字段图中没有给出，如用于指定对象内部编码的字段；后面会详细介绍。</p>\n<p>（4）jemalloc：无论是DictEntry对象，还是redisObject、SDS对象，都需要内存分配器（如jemalloc）分配内存进行存储。以DictEntry对象为例，有3个指针组成，在64位机器下占24个字节，jemalloc会为它分配32字节大小的内存单元。</p>\n<p>下面来分别介绍jemalloc、redisObject、SDS、对象类型及内部编码。</p>\n<h2><a name=\"t32\"></a>2、jemalloc</h2>\n<p>Redis在编译时便会指定内存分配器；内存分配器可以是 libc 、jemalloc或者tcmalloc，默认是jemalloc。</p>\n<p>jemalloc作为Redis的默认内存分配器，在减小内存碎片方面做的相对比较好。jemalloc在64位系统中，将内存空间划分为小、大、巨大三个范围；每个范围内又划分了许多小的内存块单位；当Redis存储数据时，会选择大小最合适的内存块进行存储。</p>\n<p>jemalloc划分的内存单元如下图所示：</p>\n<p style=\"text-align: center\"><img src=\"http://jbcdn2.b0.upaiyun.com/2018/03/34ac5c647e31f0ab02036d78ee63f248.png\" alt=\"\"></p>\n<p style=\"text-align: center\">图片来源：http://blog.csdn.net/zhengpeitao/article/details/76573053</p>\n<p>例如，如果需要存储大小为130字节的对象，jemalloc会将其放入160字节的内存单元中。</p>\n<h2><a name=\"t33\"></a>3、redisObject</h2>\n<p>前面说到，Redis对象有5种类型；无论是哪种类型，Redis都不会直接存储，而是通过redisObject对象进行存储。</p>\n<p>redisObject对象非常重要，Redis对象的类型、内部编码、内存回收、共享对象等功能，都需要redisObject支持，下面将通过redisObject的结构来说明它是如何起作用的。</p>\n<p>redisObject的定义如下（不同版本的Redis可能稍稍有所不同）：</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae1311eec06a295156470\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ntypedef struct redisObject {\r\n　　unsigned type:4;\r\n　　unsigned encoding:4;\r\n　　unsigned lru:REDIS_LRU_BITS; /* lru time (relative to server.lruclock) */\r\n　　int refcount;\r\n　　void *ptr;\r\n} robj;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae1311eec06a295156470-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1311eec06a295156470-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae1311eec06a295156470-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1311eec06a295156470-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ae1311eec06a295156470-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1311eec06a295156470-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ae1311eec06a295156470-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae1311eec06a295156470-1\"><span class=\"crayon-r\">typedef</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">struct</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">redisObject</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1311eec06a295156470-2\">　　<span class=\"crayon-t\">unsigned</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">type</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ae1311eec06a295156470-3\">　　<span class=\"crayon-t\">unsigned</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">encoding</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1311eec06a295156470-4\">　　<span class=\"crayon-t\">unsigned</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lru</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">REDIS_LRU_BITS</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">/* lru time (relative to server.lruclock) */</span></div><div class=\"crayon-line\" id=\"crayon-5ae1311eec06a295156470-5\">　　<span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">refcount</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1311eec06a295156470-6\">　　<span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">ptr</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ae1311eec06a295156470-7\"><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">robj</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n\n</div>\n<p>redisObject的每个字段的含义和作用如下：</p>\n<h3>（1）type</h3>\n<p>type字段表示对象的类型，占4个比特；目前包括REDIS_STRING(字符串)、REDIS_LIST (列表)、REDIS_HASH(哈希)、REDIS_SET(集合)、REDIS_ZSET(有序集合)。</p>\n<p>当我们执行type命令时，便是通过读取RedisObject的type字段获得对象的类型；如下图所示：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/43d3539f6d0124bd1581566616b64f97.png\" alt=\"\"></p>\n<h3>（2）encoding</h3>\n<p>encoding表示对象的内部编码，占4个比特。</p>\n<p>对于Redis支持的每种类型，都有至少两种内部编码，例如对于字符串，有int、embstr、raw三种编码。通过encoding属性，Redis可以根据不同的使用场景来为对象设置不同的编码，大大提高了Redis的灵活性和效率。以列表对象为例，有压缩列表和双端链表两种编码方式；如果列表中的元素较少，Redis倾向于使用压缩列表进行存储，因为压缩列表占用内存更少，而且比双端链表可以更快载入；当列表对象元素较多时，压缩列表就会转化为更适合存储大量元素的双端链表。</p>\n<p>通过object encoding命令，可以查看对象采用的编码方式，如下图所示：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/f6339c50fe0f4a46f0059b2f35231e23.png\" alt=\"\"></p>\n<p>5种对象类型对应的编码方式以及使用条件，将在后面介绍。</p>\n<h3>（3）lru</h3>\n<p>lru记录的是对象最后一次被命令程序访问的时间，占据的比特数不同的版本有所不同（如4.0版本占24比特，2.6版本占22比特）。</p>\n<p>通过对比lru时间与当前时间，可以计算某个对象的空转时间；object idletime命令可以显示该空转时间（单位是秒）。object idletime命令的一个特殊之处在于它不改变对象的lru值。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/12d2cec6e14b158f69fda46c75601482.png\" alt=\"\"></p>\n<p>lru值除了通过object idletime命令打印之外，还与Redis的内存回收有关系：如果Redis打开了maxmemory选项，且内存回收算法选择的是volatile-lru或allkeys—lru，那么当Redis内存占用超过maxmemory指定的值时，Redis会优先选择空转时间最长的对象进行释放。</p>\n<h3>（4）refcount</h3>\n<p><strong>refcount</strong><strong>与共享对象</strong></p>\n<p>refcount记录的是该对象被引用的次数，类型为整型。refcount的作用，主要在于对象的引用计数和内存回收。当创建新对象时，refcount初始化为1；当有新程序使用该对象时，refcount加1；当对象不再被一个新程序使用时，refcount减1；当refcount变为0时，对象占用的内存会被释放。</p>\n<p>Redis中被多次使用的对象(refcount&gt;1)，称为共享对象。Redis为了节省内存，当有一些对象重复出现时，新的程序不会创建新的对象，而是仍然使用原来的对象。这个被重复使用的对象，就是共享对象。目前共享对象仅支持整数值的字符串对象。</p>\n<p><strong>共享对象的具体实现</strong></p>\n<p>Redis的共享对象目前只支持整数值的字符串对象。之所以如此，实际上是对内存和CPU（时间）的平衡：共享对象虽然会降低内存消耗，但是判断两个对象是否相等却需要消耗额外的时间。对于整数值，判断操作复杂度为O(1)；对于普通字符串，判断复杂度为O(n)；而对于哈希、列表、集合和有序集合，判断的复杂度为O(n^2)。</p>\n<p>虽然共享对象只能是整数值的字符串对象，但是5种类型都可能使用共享对象（如哈希、列表等的元素可以使用）。</p>\n<p>就目前的实现来说，Redis服务器在初始化时，会创建10000个字符串对象，值分别是0~9999的整数值；当Redis需要使用值为0~9999的字符串对象时，可以直接使用这些共享对象。10000这个数字可以通过调整参数REDIS_SHARED_INTEGERS（4.0中是OBJ_SHARED_INTEGERS）的值进行改变。</p>\n<p>共享对象的引用次数可以通过object refcount命令查看，如下图所示。命令执行的结果页佐证了只有0~9999之间的整数会作为共享对象。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/da89cea4d30533c989b73b07efd27317.png\" alt=\"\"></p>\n<h3>（5）ptr</h3>\n<p>ptr指针指向具体的数据，如前面的例子中，set hello world，ptr指向包含字符串world的SDS。</p>\n<h3>（6）总结</h3>\n<p>综上所述，redisObject的结构与对象类型、编码、内存回收、共享对象都有关系；一个redisObject对象的大小为16字节：</p>\n<p>4bit+4bit+24bit+4Byte+8Byte=16Byte。</p>\n<h2><a name=\"t34\"></a>4、SDS</h2>\n<p>Redis没有直接使用C字符串(即以空字符’\\0’结尾的字符数组)作为默认的字符串表示，而是使用了SDS。SDS是简单动态字符串(Simple Dynamic String)的缩写。</p>\n<h3>（1）SDS结构</h3>\n<p>sds的结构如下：</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae1311eec07f590502660\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nstruct sdshdr { \r\n    int len;\r\n    int free;\r\n    char buf[];\r\n};</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae1311eec07f590502660-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1311eec07f590502660-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae1311eec07f590502660-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1311eec07f590502660-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ae1311eec07f590502660-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae1311eec07f590502660-1\"><span class=\"crayon-t\">struct</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sdshdr</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1311eec07f590502660-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">len</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ae1311eec07f590502660-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">free</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1311eec07f590502660-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">char</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">buf</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ae1311eec07f590502660-5\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n\n</div>\n<p>其中，buf表示字节数组，用来存储字符串；len表示buf已使用的长度，free表示buf未使用的长度。下面是两个例子。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/2116fb2f5ea2170e8e9df0032c1fad4d.png\" alt=\"\"></p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/951c87cee3bcd2599fcdddac9167d232.png\" alt=\"\"></p>\n<p style=\"text-align: center\">图片来源：《Redis设计与实现》</p>\n<p>通过SDS的结构可以看出，buf数组的长度=free+len+1（其中1表示字符串结尾的空字符）；所以，一个SDS结构占据的空间为：free所占长度+len所占长度+ buf数组的长度=4+4+free+len+1=free+len+9。</p>\n<h3>（2）SDS与C字符串的比较</h3>\n<p>SDS在C字符串的基础上加入了free和len字段，带来了很多好处：</p>\n<ul>\n<li>获取字符串长度：SDS是O(1)，C字符串是O(n)</li>\n<li>缓冲区溢出：使用C字符串的API时，如果字符串长度增加（如strcat操作）而忘记重新分配内存，很容易造成缓冲区的溢出；而SDS由于记录了长度，相应的API在可能造成缓冲区溢出时会自动重新分配内存，杜绝了缓冲区溢出。</li>\n<li>修改字符串时内存的重分配：对于C字符串，如果要修改字符串，必须要重新分配内存（先释放再申请），因为如果没有重新分配，字符串长度增大时会造成内存缓冲区溢出，字符串长度减小时会造成内存泄露。而对于SDS，由于可以记录len和free，因此解除了字符串长度和空间数组长度之间的关联，可以在此基础上进行优化：空间预分配策略（即分配内存时比实际需要的多）使得字符串长度增大时重新分配内存的概率大大减小；惰性空间释放策略使得字符串长度减小时重新分配内存的概率大大减小。</li>\n<li>存取二进制数据：SDS可以，C字符串不可以。因为C字符串以空字符作为字符串结束的标识，而对于一些二进制文件（如图片等），内容可能包括空字符串，因此C字符串无法正确存取；而SDS以字符串长度len来作为字符串结束标识，因此没有这个问题。</li>\n</ul>\n<p>此外，由于SDS中的buf仍然使用了C字符串（即以’\\0’结尾），因此SDS可以使用C字符串库中的部分函数；但是需要注意的是，只有当SDS用来存储文本数据时才可以这样使用，在存储二进制数据时则不行（’\\0’不一定是结尾）。</p>\n<h3>（3）SDS与C字符串的应用</h3>\n<p>Redis在存储对象时，一律使用SDS代替C字符串。例如set hello world命令，hello和world都是以SDS的形式存储的。而sadd myset member1 member2 member3命令，不论是键（”myset”），还是集合中的元素（”member1”、 ”member2”和”member3”），都是以SDS的形式存储。除了存储对象，SDS还用于存储各种缓冲区。</p>\n<p>只有在字符串不会改变的情况下，如打印日志时，才会使用C字符串。</p>\n<h1><a name=\"t4\"></a>四、Redis的对象类型与内部编码</h1>\n<p>前面已经说过，Redis支持5种对象类型，而每种结构都有至少两种编码；这样做的好处在于：一方面接口与实现分离，当需要增加或改变内部编码时，用户使用不受影响，另一方面可以根据不同的应用场景切换内部编码，提高效率。</p>\n<p>Redis各种对象类型支持的内部编码如下图所示(图中版本是Redis3.0，Redis后面版本中又增加了内部编码，略过不提；本章所介绍的内部编码都是基于3.0的)：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/28593c0d23953ad296b17967fa129871.png\" alt=\"\"></p>\n<p style=\"text-align: center\">图片来源：《Redis设计与实现》</p>\n<p>关于Redis内部编码的转换，都符合以下规律：<strong>编码转换在</strong><strong>Redis</strong><strong>写入数据时完成，且转换过程不可逆，只能从小内存编码向大内存编码转换。</strong></p>\n<h2><a name=\"t41\"></a>1、字符串</h2>\n<h3>（1）概况</h3>\n<p>字符串是最基础的类型，因为所有的键都是字符串类型，且字符串之外的其他几种复杂类型的元素也是字符串。</p>\n<p>字符串长度不能超过512MB。</p>\n<h3>（2）内部编码</h3>\n<p>字符串类型的内部编码有3种，它们的应用场景如下：</p>\n<ul>\n<li>int：8个字节的长整型。字符串值是整型时，这个值使用long整型表示。</li>\n<li>embstr：&lt;=39字节的字符串。embstr与raw都使用redisObject和sds保存数据，区别在于，embstr的使用只分配一次内存空间（因此redisObject和sds是连续的），而raw需要分配两次内存空间（分别为redisObject和sds分配空间）。因此与raw相比，embstr的好处在于创建时少分配一次空间，删除时少释放一次空间，以及对象的所有数据连在一起，寻找方便。而embstr的坏处也很明显，如果字符串的长度增加需要重新分配内存时，整个redisObject和sds都需要重新分配空间，因此redis中的embstr实现为只读。</li>\n<li>raw：大于39个字节的字符串</li>\n</ul>\n<p>示例如下图所示：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/671a709f884a9584f067c2dc7d588b59.png\" alt=\"\"></p>\n<p>embstr和raw进行区分的长度，是39；是因为redisObject的长度是16字节，sds的长度是9+字符串长度；因此当字符串长度是39时，embstr的长度正好是16+9+39=64，jemalloc正好可以分配64字节的内存单元。</p>\n<h3>（3）编码转换</h3>\n<p>当int数据不再是整数，或大小超过了long的范围时，自动转化为raw。</p>\n<p>而对于embstr，由于其实现是只读的，因此在对embstr对象进行修改时，都会先转化为raw再进行修改，因此，只要是修改embstr对象，修改后的对象一定是raw的，无论是否达到了39个字节。示例如下图所示：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/46b394cc882ed056fdee8caf1237e4da.png\" alt=\"\"></p>\n<h2><a name=\"t42\"></a>2、列表</h2>\n<h3>（1）概况</h3>\n<p>列表（list）用来存储多个有序的字符串，每个字符串称为元素；一个列表可以存储2^32-1个元素。Redis中的列表支持两端插入和弹出，并可以获得指定位置（或范围）的元素，可以充当数组、队列、栈等。</p>\n<h3>（2）内部编码</h3>\n<p>列表的内部编码可以是压缩列表（ziplist）或双端链表（linkedlist）。</p>\n<p>双端链表：由一个list结构和多个listNode结构组成；典型结构如下图所示：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/dc15e787d4b13a9944b821568afae17c.png\" alt=\"\"></p>\n<p style=\"text-align: center\">图片来源：《Redis设计与实现》</p>\n<p>通过图中可以看出，双端链表同时保存了表头指针和表尾指针，并且每个节点都有指向前和指向后的指针；链表中保存了列表的长度；dup、free和match为节点值设置类型特定函数，所以链表可以用于保存各种不同类型的值。而链表中每个节点指向的是type为字符串的redisObject。</p>\n<p>压缩列表：压缩列表是Redis为了节约内存而开发的，是由一系列特殊编码的<strong>连续内存块</strong>(而不是像双端链表一样每个节点是指针)组成的顺序型数据结构；具体结构相对比较复杂，略。与双端链表相比，压缩列表可以节省内存空间，但是进行修改或增删操作时，复杂度较高；因此当节点数量较少时，可以使用压缩列表；但是节点数量多时，还是使用双端链表划算。</p>\n<p>压缩列表不仅用于实现列表，也用于实现哈希、有序列表；使用非常广泛。</p>\n<h3>（3）编码转换</h3>\n<p>只有同时满足下面两个条件时，才会使用压缩列表：列表中元素数量小于512个；列表中所有字符串对象都不足64字节。如果有一个条件不满足，则使用双端列表；且编码只可能由压缩列表转化为双端链表，反方向则不可能。</p>\n<p>下图展示了列表编码转换的特点：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/aeea9b05c5e09cae19d2ee9ed2875285.png\" alt=\"\"></p>\n<p>其中，单个字符串不能超过64字节，是为了便于统一分配每个节点的长度；这里的64字节是指字符串的长度，不包括SDS结构，因为压缩列表使用连续、定长内存块存储字符串，不需要SDS结构指明长度。后面提到压缩列表，也会强调长度不超过64字节，原理与这里类似。</p>\n<h2><a name=\"t43\"></a>3、哈希</h2>\n<h3>（1）概况</h3>\n<p>哈希（作为一种数据结构），不仅是redis对外提供的5种对象类型的一种（与字符串、列表、集合、有序结合并列），也是Redis作为Key-Value数据库所使用的数据结构。为了说明的方便，在本文后面当使用“内层的哈希”时，代表的是redis对外提供的5种对象类型的一种；使用“外层的哈希”代指Redis作为Key-Value数据库所使用的数据结构。</p>\n<h3>（2）内部编码</h3>\n<p>内层的哈希使用的内部编码可以是压缩列表（ziplist）和哈希表（hashtable）两种；Redis的外层的哈希则只使用了hashtable。</p>\n<p>压缩列表前面已介绍。与哈希表相比，压缩列表用于元素个数少、元素长度小的场景；其优势在于集中存储，节省空间；同时，虽然对于元素的操作复杂度也由O(n)变为了O(1)，但由于哈希中元素数量较少，因此操作的时间并没有明显劣势。</p>\n<p>hashtable：一个hashtable由1个dict结构、2个dictht结构、1个dictEntry指针数组（称为bucket）和多个dictEntry结构组成。</p>\n<p>正常情况下（即hashtable没有进行rehash时）各部分关系如下图所示：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/bade6592c75a4d693f8269dd3a9c5d85.png\" alt=\"\"></p>\n<p style=\"text-align: center\">图片改编自：《Redis设计与实现》</p>\n<p>下面从底层向上依次介绍各个部分：</p>\n<p><strong>dictEntry</strong></p>\n<p>dictEntry结构用于保存键值对，结构定义如下：</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae1311eec08c586511939\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ntypedef struct dictEntry{\r\n    void *key;\r\n    union{\r\n        void *val;\r\n        uint64_tu64;\r\n        int64_ts64;\r\n    }v;\r\n    struct dictEntry *next;\r\n}dictEntry;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae1311eec08c586511939-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1311eec08c586511939-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae1311eec08c586511939-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1311eec08c586511939-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ae1311eec08c586511939-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1311eec08c586511939-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ae1311eec08c586511939-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1311eec08c586511939-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ae1311eec08c586511939-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae1311eec08c586511939-1\"><span class=\"crayon-r\">typedef</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">struct</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">dictEntry</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1311eec08c586511939-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ae1311eec08c586511939-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">union</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1311eec08c586511939-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">val</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ae1311eec08c586511939-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">uint64_tu64</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1311eec08c586511939-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">int64_ts64</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ae1311eec08c586511939-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-v\">v</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1311eec08c586511939-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">struct</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">dictEntry *</span><span class=\"crayon-v\">next</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ae1311eec08c586511939-9\"><span class=\"crayon-sy\">}</span><span class=\"crayon-v\">dictEntry</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n\n</div>\n<p>其中，各个属性的功能如下：</p>\n<ul>\n<li>key：键值对中的键；</li>\n<li>val：键值对中的值，使用union(即共用体)实现，存储的内容既可能是一个指向值的指针，也可能是64位整型，或无符号64位整型；</li>\n<li>next：指向下一个dictEntry，用于解决哈希冲突问题</li>\n</ul>\n<p>在64位系统中，一个dictEntry对象占24字节（key/val/next各占8字节）。</p>\n<p><strong>bucket</strong></p>\n<p>bucket是一个数组，数组的每个元素都是指向dictEntry结构的指针。redis中bucket数组的大小计算规则如下：大于dictEntry的、最小的2^n；例如，如果有1000个dictEntry，那么bucket大小为1024；如果有1500个dictEntry，则bucket大小为2048。</p>\n<p><strong>dictht</strong></p>\n<p>dictht结构如下：</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae1311eec096675485168\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ntypedef struct dictht{\r\n    dictEntry **table;\r\n    unsigned long size;\r\n    unsigned long sizemask;\r\n    unsigned long used;\r\n}dictht;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae1311eec096675485168-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1311eec096675485168-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae1311eec096675485168-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1311eec096675485168-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ae1311eec096675485168-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1311eec096675485168-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae1311eec096675485168-1\"><span class=\"crayon-r\">typedef</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">struct</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">dictht</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1311eec096675485168-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-e \">dictEntry *</span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">table</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ae1311eec096675485168-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">unsigned</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">size</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1311eec096675485168-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">unsigned</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sizemask</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ae1311eec096675485168-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">unsigned</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">used</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1311eec096675485168-6\"><span class=\"crayon-sy\">}</span><span class=\"crayon-v\">dictht</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n\n</div>\n<p>其中，各个属性的功能说明如下：</p>\n<ul>\n<li>table属性是一个指针，指向bucket；</li>\n<li>size属性记录了哈希表的大小，即bucket的大小；</li>\n<li>used记录了已使用的dictEntry的数量；</li>\n<li>sizemask属性的值总是为size-1，这个属性和哈希值一起决定一个键在table中存储的位置。</li>\n</ul>\n<p><strong>dict</strong></p>\n<p>一般来说，通过使用dictht和dictEntry结构，便可以实现普通哈希表的功能；但是Redis的实现中，在dictht结构的上层，还有一个dict结构。下面说明dict结构的定义及作用。</p>\n<p>dict结构如下：</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae1311eec09c235099488\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ntypedef struct dict{\r\n    dictType *type;\r\n    void *privdata;\r\n    dictht ht[2];\r\n    int trehashidx;\r\n} dict;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae1311eec09c235099488-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1311eec09c235099488-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae1311eec09c235099488-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1311eec09c235099488-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ae1311eec09c235099488-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1311eec09c235099488-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae1311eec09c235099488-1\"><span class=\"crayon-r\">typedef</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">struct</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">dict</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1311eec09c235099488-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-e \">dictType *</span><span class=\"crayon-v\">type</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ae1311eec09c235099488-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">privdata</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1311eec09c235099488-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">dictht </span><span class=\"crayon-v\">ht</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ae1311eec09c235099488-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">trehashidx</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1311eec09c235099488-6\"><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dict</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n\n</div>\n<p>其中，type属性和privdata属性是为了适应不同类型的键值对，用于创建多态字典。</p>\n<p>ht属性和trehashidx属性则用于rehash，即当哈希表需要扩展或收缩时使用。ht是一个包含两个项的数组，每项都指向一个dictht结构，这也是Redis的哈希会有1个dict、2个dictht结构的原因。通常情况下，所有的数据都是存在放dict的ht[0]中，ht[1]只在rehash的时候使用。dict进行rehash操作的时候，将ht[0]中的所有数据rehash到ht[1]中。然后将ht[1]赋值给ht[0]，并清空ht[1]。</p>\n<p>因此，Redis中的哈希之所以在dictht和dictEntry结构之外还有一个dict结构，一方面是为了适应不同类型的键值对，另一方面是为了rehash。</p>\n<h3>（3）编码转换</h3>\n<p>如前所述，Redis中内层的哈希既可能使用哈希表，也可能使用压缩列表。</p>\n<p>只有同时满足下面两个条件时，才会使用压缩列表：哈希中元素数量小于512个；哈希中所有键值对的键和值字符串长度都小于64字节。如果有一个条件不满足，则使用哈希表；且编码只可能由压缩列表转化为哈希表，反方向则不可能。</p>\n<p>下图展示了Redis内层的哈希编码转换的特点：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/0a98910371a2157072c25fcf2b7f6784.png\" alt=\"\"></p>\n<h2><a name=\"t44\"></a>4、集合</h2>\n<h3>（1）概况</h3>\n<p>集合（set）与列表类似，都是用来保存多个字符串，但集合与列表有两点不同：集合中的元素是无序的，因此不能通过索引来操作元素；集合中的元素不能有重复。</p>\n<p>一个集合中最多可以存储2^32-1个元素；除了支持常规的增删改查，Redis还支持多个集合取交集、并集、差集。</p>\n<h3>（2）内部编码</h3>\n<p>集合的内部编码可以是整数集合（intset）或哈希表（hashtable）。</p>\n<p>哈希表前面已经讲过，这里略过不提；需要注意的是，集合在使用哈希表时，值全部被置为null。</p>\n<p>整数集合的结构定义如下：</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae1311eec0a2232898069\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ntypedef struct intset{\r\n    uint32_t encoding;\r\n    uint32_t length;\r\n    int8_t contents[];\r\n} intset;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae1311eec0a2232898069-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1311eec0a2232898069-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae1311eec0a2232898069-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1311eec0a2232898069-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ae1311eec0a2232898069-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae1311eec0a2232898069-1\"><span class=\"crayon-r\">typedef</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">struct</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">intset</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1311eec0a2232898069-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">uint32_t </span><span class=\"crayon-v\">encoding</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ae1311eec0a2232898069-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">uint32_t </span><span class=\"crayon-v\">length</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1311eec0a2232898069-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">int8_t </span><span class=\"crayon-v\">contents</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ae1311eec0a2232898069-5\"><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">intset</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n\n</div>\n<p>其中，encoding代表contents中存储内容的类型，虽然contents（存储集合中的元素）是int8_t类型，但实际上其存储的值是int16_t、int32_t或int64_t，具体的类型便是由encoding决定的；length表示元素个数。</p>\n<p>整数集合适用于集合所有元素都是整数且集合元素数量较小的时候，与哈希表相比，整数集合的优势在于集中存储，节省空间；同时，虽然对于元素的操作复杂度也由O(n)变为了O(1)，但由于集合数量较少，因此操作的时间并没有明显劣势。</p>\n<h3>（3）编码转换</h3>\n<p>只有同时满足下面两个条件时，集合才会使用整数集合：集合中元素数量小于512个；集合中所有元素都是整数值。如果有一个条件不满足，则使用哈希表；且编码只可能由整数集合转化为哈希表，反方向则不可能。</p>\n<p>下图展示了集合编码转换的特点：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/c5dcfed49dff9c771a6929455d548f81.png\" alt=\"\"></p>\n<h2><a name=\"t45\"></a>5、有序集合</h2>\n<h3>（1）概况</h3>\n<p>有序集合与集合一样，元素都不能重复；但与集合不同的是，有序集合中的元素是有顺序的。与列表使用索引下标作为排序依据不同，有序集合为每个元素设置一个分数（score）作为排序依据。</p>\n<h3>（2）内部编码</h3>\n<p>有序集合的内部编码可以是压缩列表（ziplist）或跳跃表（skiplist）。ziplist在列表和哈希中都有使用，前面已经讲过，这里略过不提。</p>\n<p>跳跃表是一种有序数据结构，通过在每个节点中维持多个指向其他节点的指针，从而达到快速访问节点的目的。除了跳跃表，实现有序数据结构的另一种典型实现是平衡树；大多数情况下，跳跃表的效率可以和平衡树媲美，且跳跃表实现比平衡树简单很多，因此redis中选用跳跃表代替平衡树。跳跃表支持平均O(logN)、最坏O(N)的复杂点进行节点查找，并支持顺序操作。Redis的跳跃表实现由zskiplist和zskiplistNode两个结构组成：前者用于保存跳跃表信息（如头结点、尾节点、长度等），后者用于表示跳跃表节点。具体结构相对比较复杂，略。</p>\n<h3>（3）编码转换</h3>\n<p>只有同时满足下面两个条件时，才会使用压缩列表：有序集合中元素数量小于128个；有序集合中所有成员长度都不足64字节。如果有一个条件不满足，则使用跳跃表；且编码只可能由压缩列表转化为跳跃表，反方向则不可能。</p>\n<p>下图展示了有序集合编码转换的特点：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/ec94bc8c186973c1318a5c439729eacb.png\" alt=\"\"></p>\n<h1><a name=\"t5\"></a>五、应用举例</h1>\n<p>了解Redis的内存模型之后，下面通过几个例子说明其应用。</p>\n<h2><a name=\"t51\"></a>1、估算Redis内存使用量</h2>\n<p>要估算redis中的数据占据的内存大小，需要对redis的内存模型有比较全面的了解，包括前面介绍的hashtable、sds、redisobject、各种对象类型的编码方式等。</p>\n<p>下面以最简单的字符串类型来进行说明。</p>\n<p>假设有90000个键值对，每个key的长度是7个字节，每个value的长度也是7个字节（且key和value都不是整数）；下面来估算这90000个键值对所占用的空间。在估算占据空间之前，首先可以判定字符串类型使用的编码方式：embstr。</p>\n<p>90000个键值对占据的内存空间主要可以分为两部分：一部分是90000个dictEntry占据的空间；一部分是键值对所需要的bucket空间。</p>\n<p>每个dictEntry占据的空间包括：</p>\n<p>1)       一个dictEntry，24字节，jemalloc会分配32字节的内存块</p>\n<p>2)       一个key，7字节，所以SDS(key)需要7+9=16个字节，jemalloc会分配16字节的内存块</p>\n<p>3)       一个redisObject，16字节，jemalloc会分配16字节的内存块</p>\n<p>4)       一个value，7字节，所以SDS(value)需要7+9=16个字节，jemalloc会分配16字节的内存块</p>\n<p>5)       综上，一个dictEntry需要32+16+16+16=80个字节。</p>\n<p>bucket空间：bucket数组的大小为大于90000的最小的2^n，是131072；每个bucket元素为8字节（因为64位系统中指针大小为8字节）。</p>\n<p>因此，可以估算出这90000个键值对占据的内存大小为：90000*80 + 131072*8 = 8248576。</p>\n<p>下面写个程序在redis中验证一下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae1311eec0a8857059216\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npublic class RedisTest {\r\n \r\n　　public static Jedis jedis = new Jedis(\"localhost\", 6379);\r\n \r\n　　public static void main(String[] args) throws Exception{\r\n　　　　Long m1 = Long.valueOf(getMemory());\r\n　　　　insertData();\r\n　　　　Long m2 = Long.valueOf(getMemory());\r\n　　　　System.out.println(m2 - m1);\r\n　　}\r\n \r\n　　public static void insertData(){\r\n　　　　for(int i = 10000; i &lt; 100000; i++){\r\n　　　　　　jedis.set(\"aa\" + i, \"aa\" + i); //key和value长度都是7字节，且不是整数\r\n　　　　}\r\n　　}\r\n \r\n　　public static String getMemory(){\r\n　　　　String memoryAllLine = jedis.info(\"memory\");\r\n　　　　String usedMemoryLine = memoryAllLine.split(\"\\r\\n\")[1];\r\n　　　　String memory = usedMemoryLine.substring(usedMemoryLine.indexOf(':') + 1);\r\n　　　　return memory;\r\n　　}\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae1311eec0a8857059216-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1311eec0a8857059216-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae1311eec0a8857059216-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1311eec0a8857059216-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ae1311eec0a8857059216-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1311eec0a8857059216-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ae1311eec0a8857059216-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1311eec0a8857059216-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ae1311eec0a8857059216-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1311eec0a8857059216-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ae1311eec0a8857059216-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1311eec0a8857059216-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ae1311eec0a8857059216-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1311eec0a8857059216-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5ae1311eec0a8857059216-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1311eec0a8857059216-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5ae1311eec0a8857059216-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1311eec0a8857059216-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5ae1311eec0a8857059216-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1311eec0a8857059216-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5ae1311eec0a8857059216-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1311eec0a8857059216-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5ae1311eec0a8857059216-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1311eec0a8857059216-24\">24</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae1311eec0a8857059216-1\"><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">RedisTest</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1311eec0a8857059216-2\"><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5ae1311eec0a8857059216-3\">　　<span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Jedis </span><span class=\"crayon-v\">jedis</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Jedis</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"localhost\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6379</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1311eec0a8857059216-4\"><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5ae1311eec0a8857059216-5\">　　<span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">args</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">throws</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Exception</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1311eec0a8857059216-6\">　　　　<span class=\"crayon-t\">Long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">m1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Long</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">valueOf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">getMemory</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ae1311eec0a8857059216-7\">　　　　<span class=\"crayon-e\">insertData</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1311eec0a8857059216-8\">　　　　<span class=\"crayon-t\">Long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">m2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Long</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">valueOf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">getMemory</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ae1311eec0a8857059216-9\">　　　　<span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">out</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">println</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">m2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">m1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1311eec0a8857059216-10\">　　<span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5ae1311eec0a8857059216-11\"><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1311eec0a8857059216-12\">　　<span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">insertData</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5ae1311eec0a8857059216-13\">　　　　<span class=\"crayon-st\">for</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10000</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100000</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1311eec0a8857059216-14\">　　　　　　<span class=\"crayon-v\">jedis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">set</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"aa\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"aa\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//key和value长度都是7字节，且不是整数</span></div><div class=\"crayon-line\" id=\"crayon-5ae1311eec0a8857059216-15\">　　　　<span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1311eec0a8857059216-16\">　　<span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5ae1311eec0a8857059216-17\"><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1311eec0a8857059216-18\">　　<span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getMemory</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5ae1311eec0a8857059216-19\">　　　　<span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">memoryAllLine</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">jedis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">info</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"memory\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1311eec0a8857059216-20\">　　　　<span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">usedMemoryLine</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">memoryAllLine</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">split</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"\\r\\n\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ae1311eec0a8857059216-21\">　　　　<span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">memory</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">usedMemoryLine</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">substring</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">usedMemoryLine</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">indexOf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">':'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1311eec0a8857059216-22\">　　　　<span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">memory</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ae1311eec0a8857059216-23\">　　<span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1311eec0a8857059216-24\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0048 seconds] -->\r\n<p>运行结果：8247552</p>\n<p>理论值与结果值误差在万分之1.2，对于计算需要多少内存来说，这个精度已经足够了。之所以会存在误差，是因为在我们插入90000条数据之前redis已分配了一定的bucket空间，而这些bucket空间尚未使用。</p>\n<p>作为对比将key和value的长度由7字节增加到8字节，则对应的SDS变为17个字节，jemalloc会分配32个字节，因此每个dictEntry占用的字节数也由80字节变为112字节。此时估算这90000个键值对占据内存大小为：90000*112 + 131072*8 = 11128576。</p>\n<p>在redis中验证代码如下（只修改插入数据的代码）：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae1311eec0b1674766862\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npublic static void insertData(){\r\n　　for(int i = 10000; i &lt; 100000; i++){\r\n　　　　jedis.set(\"aaa\" + i, \"aaa\" + i); //key和value长度都是8字节，且不是整数\r\n　　}\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae1311eec0b1674766862-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1311eec0b1674766862-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ae1311eec0b1674766862-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1311eec0b1674766862-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ae1311eec0b1674766862-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae1311eec0b1674766862-1\"><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">insertData</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1311eec0b1674766862-2\">　　<span class=\"crayon-st\">for</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10000</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100000</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5ae1311eec0b1674766862-3\">　　　　<span class=\"crayon-v\">jedis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">set</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"aaa\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"aaa\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//key和value长度都是8字节，且不是整数</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1311eec0b1674766862-4\">　　<span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5ae1311eec0b1674766862-5\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>运行结果：11128576；估算准确。</p>\n<p>对于字符串类型之外的其他类型，对内存占用的估算方法是类似的，需要结合具体类型的编码方式来确定。</p>\n<h2><a name=\"t52\"></a>2、优化内存占用</h2>\n<p>了解redis的内存模型，对优化redis内存占用有很大帮助。下面介绍几种优化场景。</p>\n<p>（1）利用jemalloc特性进行优化</p>\n<p>上一小节所讲述的90000个键值便是一个例子。由于jemalloc分配内存时数值是不连续的，因此key/value字符串变化一个字节，可能会引起占用内存很大的变动；在设计时可以利用这一点。</p>\n<p>例如，如果key的长度如果是8个字节，则SDS为17字节，jemalloc分配32字节；此时将key长度缩减为7个字节，则SDS为16字节，jemalloc分配16字节；则每个key所占用的空间都可以缩小一半。</p>\n<p>（2）使用整型/长整型</p>\n<p>如果是整型/长整型，Redis会使用int类型（8字节）存储来代替字符串，可以节省更多空间。因此在可以使用长整型/整型代替字符串的场景下，尽量使用长整型/整型。</p>\n<p>（3）共享对象</p>\n<p>利用共享对象，可以减少对象的创建（同时减少了redisObject的创建），节省内存空间。目前redis中的共享对象只包括10000个整数（0-9999）；可以通过调整REDIS_SHARED_INTEGERS参数提高共享对象的个数；例如将REDIS_SHARED_INTEGERS调整到20000，则0-19999之间的对象都可以共享。</p>\n<p>考虑这样一种场景：论坛网站在redis中存储了每个帖子的浏览数，而这些浏览数绝大多数分布在0-20000之间，这时候通过适当增大REDIS_SHARED_INTEGERS参数，便可以利用共享对象节省内存空间。</p>\n<p>（4）避免过度设计</p>\n<p>然而需要注意的是，不论是哪种优化场景，都要考虑内存空间与设计复杂度的权衡；而设计复杂度会影响到代码的复杂度、可维护性。</p>\n<p>如果数据量较小，那么为了节省内存而使得代码的开发、维护变得更加困难并不划算；还是以前面讲到的90000个键值对为例，实际上节省的内存空间只有几MB。但是如果数据量有几千万甚至上亿，考虑内存的优化就比较必要了。</p>\n<h2><a name=\"t53\"></a>3、关注内存碎片率</h2>\n<p>内存碎片率是一个重要的参数，对redis 内存的优化有重要意义。</p>\n<p>如果内存碎片率过高（jemalloc在1.03左右比较正常），说明内存碎片多，内存浪费严重；这时便可以考虑重启redis服务，在内存中对数据进行重排，减少内存碎片。</p>\n<p>如果内存碎片率小于1，说明redis内存不足，部分数据使用了虚拟内存（即swap）；由于虚拟内存的存取速度比物理内存差很多（2-3个数量级），此时redis的访问速度可能会变得很慢。因此必须设法增大物理内存（可以增加服务器节点数量，或提高单机内存），或减少redis中的数据。</p>\n<p>要减少redis中的数据，除了选用合适的数据类型、利用共享对象等，还有一点是要设置合理的数据回收策略（maxmemory-policy），当内存达到一定量后，根据不同的优先级对内存进行回收。</p>\n<h1><a name=\"t6\"></a>六、参考文献</h1>\n<p>《Redis开发与运维》</p>\n<p>《Redis设计与实现》</p>\n<p>https://redis.io/documentation</p>\n<p>http://redisdoc.com/server/info.html</p>\n<p>https://www.cnblogs.com/lhcpig/p/4769397.html</p>\n<p>https://searchdatabase.techtarget.com.cn/7-20218/</p>\n<p>http://www.cnblogs.com/mushroom/p/4738170.html</p>\n<p>http://www.imooc.com/article/3645</p>\n<p>http://blog.csdn.net/zhengpeitao/article/details/76573053</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113789\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113789votetotal\">3</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113789\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 8 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 4 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"}
{"url_object_id": "9f16c4dc5a6cd2f4b07fef3690f49f8b", "title": "du 及 df 命令的使用（附带示例）", "create_date": "2018/03/23", "url": "http://blog.jobbole.com/113780/", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/05/77d80105fd15f2465894827e23cc4842.jpeg"], "praise_nums": 1, "comment_nums": 0, "fav_nums": 2, "tags": "IT技术,Linux", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"http://linuxtechlab.com/du-df-commands-examples/\">shusain</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9457-1.html\">Linux中国/geekpi</a>   </div><p>在本文中，我将讨论 <code>du</code> 和 <code>df</code> 命令。<code>du</code> 和 <code>df</code> 命令都是 Linux 系统的重要工具，来显示 Linux 文件系统的磁盘使用情况。这里我们将通过一些例子来分享这两个命令的用法。</p>\n<ul>\n<li><strong>（推荐阅读：<a href=\"http://linuxtechlab.com/files-transfer-scp-rsync-commands/\">使用 scp 和 rsync 命令传输文件</a>）</strong></li>\n<li><strong>（另请阅读：<a href=\"http://linuxtechlab.com/linux-cloning-disks-using-dd-cat-commands/\">使用 dd 和 cat 命令为 Linux 系统克隆磁盘</a>）</strong></li>\n</ul>\n<h3 id=\"toc_1\">du 命令</h3>\n<p><code>du</code>（disk usage 的简称）是用于查找文件和目录的磁盘使用情况的命令。<code>du</code> 命令在与各种选项一起使用时能以多种格式提供结果。</p>\n<p>下面是一些例子：</p>\n<h4 id=\"toc_2\">1、 得到一个目录下所有子目录的磁盘使用概况</h4>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae1097a0d43e217756725\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ du /home\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae1097a0d43e217756725-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1097a0d43e217756725-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae1097a0d43e217756725-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">du</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">home</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1097a0d43e217756725-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/a7080196ba5d69aefcecf7bbf44c9556.jpg\" alt=\"du command\"></p>\n<p>该命令的输出将显示 <code>/home</code> 中的所有文件和目录以及显示块大小。</p>\n<h4 id=\"toc_3\">2、 以人类可读格式也就是 kb、mb 等显示文件/目录大小</h4>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae1097a0d448674261835\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ du -h /home\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae1097a0d448674261835-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1097a0d448674261835-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae1097a0d448674261835-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">du</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">h</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">home</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1097a0d448674261835-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/1b9dd42d7efa627e663eeb719c31051b.jpg\" alt=\"du command\"></p>\n<h4 id=\"toc_4\">3、 目录的总磁盘大小</h4>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae1097a0d44c850029987\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ du -s /home\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae1097a0d44c850029987-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1097a0d44c850029987-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae1097a0d44c850029987-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">du</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">home</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1097a0d44c850029987-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/3d49dd172fc018cabd4747f4db263811.jpg\" alt=\"du command\"></p>\n<p>它是 <code>/home</code> 目录的总大小</p>\n<h3 id=\"toc_5\">df 命令</h3>\n<p>df（disk filesystem 的简称）用于显示 Linux 系统的磁盘利用率。（LCTT 译注：<code>df</code> 可能应该是 disk free 的简称。）</p>\n<p>下面是一些例子。</p>\n<h4 id=\"toc_6\">1、 显示设备名称、总块数、总磁盘空间、已用磁盘空间、可用磁盘空间和文件系统上的挂载点。</h4>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae1097a0d44f029420543\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ df\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae1097a0d44f029420543-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1097a0d44f029420543-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae1097a0d44f029420543-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">df</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1097a0d44f029420543-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/ab5724c46d3e98a63c869827c65cd227.jpg\" alt=\"df command\"></p>\n<h4 id=\"toc_7\">2、 人类可读格式的信息</h4>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae1097a0d453692749017\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ df -h\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae1097a0d453692749017-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1097a0d453692749017-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae1097a0d453692749017-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">df</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">h</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1097a0d453692749017-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/5e54bd24a629aad15d72114b57687e18.jpg\" alt=\"df command\"></p>\n<p>上面的命令以人类可读格式显示信息。</p>\n<h4 id=\"toc_8\">3、 显示特定分区的信息</h4>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ae1097a0d456658414310\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ df -hT /etc\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ae1097a0d456658414310-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ae1097a0d456658414310-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ae1097a0d456658414310-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">df</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">hT</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">etc</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ae1097a0d456658414310-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/5b29e87fdba47b650c6958d569d553c2.jpg\" alt=\"df command\"></p>\n<p><code>-hT</code> 加上目标目录将以可读格式显示 <code>/etc</code> 的信息。</p>\n<p>虽然 <code>du</code> 和 <code>df</code> 命令有更多选项，但是这些例子可以让你初步了解。如果在这里找不到你要找的东西，那么你可以参考有关命令的 man 页面。</p>\n<p>另外，<a href=\"http://linuxtechlab.com/tips-tricks/\"><strong>在这</strong></a>阅读我的其他帖子，在那里我分享了一些其他重要和经常使用的 Linux 命令。</p>\n<p>如往常一样，欢迎你留下评论和疑问，因此在下面留下你的评论和疑问，我会回复你。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113780\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113780votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113780\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"}
